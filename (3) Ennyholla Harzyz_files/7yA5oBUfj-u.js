if (self.CavalryLogger) { CavalryLogger.start_js(["V86IT"]); }

__d("PinnedConversationNubsActionTaken",[],(function(a,b,c,d,e,f){e.exports={TAB_CLOSED_BY_USER:0,COMMENT_ADDED:1}}),null);
__d("BonfireFeatureGating",["gkx"],(function(a,b,c,d,e,f){"use strict";a={canReceiveBonfireRingInterop:function(){return b("gkx")("AT67-yEeEisuZnuRf9ZZfe8uDaUmU0f8iOgZ8XTHAvRp7_a_JJm4LDabRivTtsii-tCqADjQbwZjHRWhjygfaDJN")}};e.exports=a}),null);
__d("XGamesNavigationSliderAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/games/async/navigationslider/",{id:{type:"String",required:!0},referral_objects:{type:"StringVector",defaultValue:[]},num_items_per_page:{type:"Int",required:!0},num_rows:{type:"Int",defaultValue:1},width:{type:"Int",required:!0},height:{type:"Int",required:!0},days_since:{type:"Int"}})}),null);
__d("CanvasNavigationSlider",["Event","XGamesNavigationSliderAsyncController","AsyncRequest","DataStore"],(function(a,b,c,d,e,f){__p&&__p();var g="GamesNavigationSlider";h.init=function(a,b){"use strict";return new h(a,b)};function h(a,c){"use strict";__p&&__p();this.$1=c.autoscroll;this.$2=a;this.$3=c.referral_objects;this.$4=a.getNode().id;this.$5=c.height;this.$6=c.width;this.$7=c.days_since;this.$8=c.num_items_per_page;this.$9=c.num_rows;this.$10=!1;b("DataStore").set(g,this.$4,this);(a.getIndex()>0||this.$1)&&this.$11();var d=b("Event").listen(a.getNextArrow(),"click",function(){d.remove(),this.$11()}.bind(this).bind(this))}h.prototype.$11=function(){"use strict";if(this.$10)return;this.$10=!0;var a=b("XGamesNavigationSliderAsyncController").getURIBuilder().setString("id",this.$4).setInt("num_items_per_page",this.$8).setInt("num_rows",this.$9).setInt("width",this.$6).setInt("height",this.$5);this.$7&&(a=a.setInt("days_since",this.$7));new(b("AsyncRequest"))(a.getURI()).setData({referral_objects:this.$3}).send()};h.prototype.$12=function(a){"use strict";a.forEach(function(a){this.$2.push(a)}.bind(this))};h.update=function(a,c){"use strict";a=b("DataStore").get(g,a);a.$12(c)};e.exports=h}),null);
__d("NubController",["csx","ArbiterMixin","Dock"],(function(a,b,c,d,e,f,g){__p&&__p();function a(){}Object.assign(a.prototype,b("ArbiterMixin"),{init:function(a){this.el=a;this.nubButton=a.querySelector(".fbNubButton");this.closeButton=a.querySelector("._2dv8");b("Dock").registerNubController(a,this);this.closeButton&&this.closeButton.addEventListener("click",this.hide.bind(this));return this},buttonContentChanged:function(){this.inform("nub/button/content-changed")},flyoutContentChanged:function(){this.inform("nub/flyout/content-changed")},hide:function(){b("Dock").hide(this.el)},show:function(){b("Dock").show(this.el)}});e.exports=a}),null);
__d("BuddyListNub",["csx","cx","fbt","Arbiter","AsyncRequest","AvailableList","BootloadedComponent.react","ChannelConnection","ChatOptions","ChatSidebarActions","ChatSidebarStore","ChatSidebarVisibility","ChatVisibility","CSS","Dock","DOM","Event","intlNumUtils","JSLogger","JSResource","KeyboardShortcuts","Keys","NubController","OrderedFriendsList","Parent","PresencePrivacy","PresenceStatus","PresenceUtil","React","ReactDOM","Run","SidebarType","Style","Toggler","emptyFunction","translateKey"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k=40,l=253,m="285px",n=b("JSLogger").create("buddylist_nub");c=babelHelpers.inherits(a,b("NubController"));j=c&&c.prototype;function a(a,c,d,e){"use strict";__p&&__p();j.constructor.call(this);j.init.call(this,a);this.root=a;this.orderedList=c;this.button=b("DOM").find(a,"a.fbNubButton");this.unreadCount=b("DOM").find(a,"span._5ayx");this.label=b("DOM").find(a,"span.label");this.body=b("DOM").scry(a,"div.fbNubFlyoutBody")[0];this.container=b("Parent").bySelector(a,"._56ox");var f=b("DOM").find(a,"div.fbNubFlyoutTitlebar");b("Toggler").createInstance(f).setSticky(!1);b("Toggler").createInstance(a).setSticky(!0);e&&b("Run").onAfterLoad(function(){this.dropdown=b("ReactDOM").render(b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("ChatSidebarDropdown.react").__setRef("BuddyListNub"),onToggleSidebar:function(){},sidebarType:b("SidebarType").BUDDYLIST}),e)}.bind(this));c.subscribeOnce("render",this.flyoutContentChanged.bind(this));b("Run").onAfterLoad(function(){__p&&__p();var a=b("DOM").find(f,"div._4k48");a&&b("ReactDOM").render(b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("ChatSidebarComposeLink.react").__setRef("BuddyListNub"),className:"_3a-4"}),a);a=b("DOM").find(this.button,"div._1us9");a&&b("ReactDOM").render(b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("ChatSidebarComposeLink.react").__setRef("BuddyListNub"),className:"_3a-4"}),a);a=b("DOM").find(this.button,"div._1usa");a&&b("ReactDOM").render(b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("ChatSidebarDropdown.react").__setRef("BuddyListNub"),onToggleSidebar:function(){},sidebarType:b("SidebarType").BUDDYLIST_NUB}),a);a=b("DOM").find(f,"div._3gl7");a&&b("ReactDOM").render(b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("ChatSidebarGroupCreateButtonReactComponent").__setRef("BuddyListNub")}),a);a=b("DOM").find(this.button,"div._3gll");a&&b("ReactDOM").render(b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("ChatSidebarGroupCreateButtonReactComponent").__setRef("BuddyListNub"),className:"newGCF"}),a)}.bind(this));c.setScrollContainer(this.body);b("AvailableList").subscribe("buddylist/availability-changed",this._updateCount.bind(this));b("Arbiter").subscribe("chat/connect",function(){return this._handleConnect(!0)}.bind(this));b("Arbiter").subscribe("chat/option-changed",function(a,b){b.name=="hide_groups"?this.onResize():b.name==="hide_buddylist"&&(b.value?this.hide():this.show())}.bind(this));b("ChannelConnection").subscribe(b("ChannelConnection").CONNECTED,function(){return this._updateView()}.bind(this));b("ChannelConnection").subscribe(b("ChannelConnection").SHUTDOWN,function(){return this._updateView()}.bind(this));b("ChannelConnection").subscribe(b("ChannelConnection").RECONNECTING,function(){return this._updateView()}.bind(this));b("ChannelConnection").subscribe([b("ChannelConnection").MUTE_WARNING,b("ChannelConnection").UNMUTE_WARNING],function(){return this._updateView()}.bind(this));this.subscribe("show",this.onShow.bind(this));this.subscribe("hide",this.onHide.bind(this));this.subscribe("resize",this.onResize.bind(this));b("Event").listen(a,"keydown",this._onKeyDown.bind(this));b("Event").listen(this.button,"click",this.onButtonClick.bind(this));b("KeyboardShortcuts").register("q",function(event){this._isOpen||(this.onButtonClick(),this.show()),event.prevent()}.bind(this),{persistOnTransition:!0,shortcutInfo:{displayKeys:[b("translateKey")("q")],description:i._("Search Messenger contacts")}});b("Arbiter").subscribe("minisidebar/show",this.hide.bind(this));b("Arbiter").subscribe("sidebar/visibility",function(a,b){b?this.hide():this._onSidebarHide()}.bind(this));b("Style").set(this.body,"min-height",m);b("Arbiter").subscribe("sidebar/typeahead/active",function(a,c){c?(this._typeaheadActive=!0,b("CSS").hide(this.body.parentNode),this.orderedList.hide(),this.onResize()):(this._typeaheadActive=!1,this.onResize(),b("CSS").show(this.body.parentNode),this.orderedList.show())}.bind(this));b("OrderedFriendsList").getList(function(a){b("ChatSidebarStore").isEnabled()&&b("ChatSidebarStore").getVisibleType()===b("SidebarType").BUDDYLIST&&!b("ChatOptions").getSetting("hide_buddylist")&&!b("ChannelConnection").disconnected()&&!b("PresencePrivacy").isUserOffline()&&a.length>0&&this.show(),b("Event").listen(f,"click",function(a){b("CSS").matchesSelector(a.target,".titlebarTextWrapper")&&this._syncHideBuddylist(!0)}.bind(this)),this._updateView(),n.log("buddylist_initialized")}.bind(this))}a.prototype._handleVisibilityChange=function(){"use strict";this._updateView(),b("ChatVisibility").isOnline()||this.hide()};a.prototype._updateView=function(a){"use strict";__p&&__p();var c;if(!b("ChatVisibility").isOnline())a=i._("{Chat} (Off)",[i._param("Chat",i._("Chat"))]);else if(b("ChannelConnection").disconnected())a=i._("{Chat} (Disconnected)",[i._param("Chat",i._("Chat"))]);else{var d=b("PresenceStatus").getOnlineCount();if(d){var e=b("DOM").create("span",{className:"count"},"("+b("intlNumUtils").formatNumberWithThousandDelimiters(d)+")");a=i._({"*":"{Chat} {number-available}"},[i._param("Chat",i._("Chat")),i._param("number-available",e,[0,d])])}else a=i._("Chat"),c=!0}this._setPresenceIcon();this._setUnread();this._setLabel(a,c);this.buttonContentChanged()};a.prototype._setPresenceIcon=function(){"use strict";b("CSS").conditionClass(this.root,"offline",!b("ChatVisibility").isOnline()||b("ChannelConnection").disconnected())};a.prototype.onButtonClick=function(){"use strict";if(!b("ChatSidebarStore").isInitialized())return!0;b("ChatSidebarVisibility").shouldShowSidebarIgnoreEnabled(null,function(a,c){c=b("ChatSidebarStore").isEnabled();!c&&a?b("ChatSidebarActions").enable(b("SidebarType").SIDEBAR):b("ChatSidebarActions").show(c&&a?b("SidebarType").SIDEBAR:b("SidebarType").BUDDYLIST)})};a.prototype.onHide=function(){"use strict";this._isOpen=!1,this._buddyListRenderSubscription&&(this.orderedList.unsubscribe(this._buddyListRenderSubscription),this._buddyListRenderSubscription=null),this._hideBuddyList(),b("Arbiter").inform("buddylist/hide")};a.prototype._onKeyDown=function(event){"use strict";var a=b("Event").getKeyCode(event);if(a===b("Keys").ESC&&!b("CSS").hasClass(this.root,"menuOpened")){this.hide();return!1}else a==b("Keys").RETURN&&b("ChatSidebarVisibility").shouldShowSidebarIgnoreEnabled(null,function(a,c){b("ChatSidebarActions").enable(a?b("SidebarType").SIDEBAR:b("SidebarType").BUDDYLIST)})};a.prototype._onSidebarHide=function(event){"use strict";b("OrderedFriendsList").getList(function(a){b("ChatSidebarStore").isEnabled()&&!b("ChatOptions").getSetting("hide_buddylist")&&!b("ChannelConnection").disconnected()&&!b("PresencePrivacy").isUserOffline()&&a.lenth>0?this.show():this.hide()}.bind(this))};a.prototype.onResize=function(){"use strict";var a=this._typeaheadActive?b("Dock").getMaxFlyoutHeight(this.root)-60:l;b("Arbiter").inform("buddyList/resized",a,b("Arbiter").BEHAVIOR_PERSISTENT);this._typeaheadActive?b("Style").set(this.body,"max-height","none"):b("Style").set(this.body,"max-height",m);a=Math.max(250,a);a=Math.floor(a/k);this.orderedList.setNumTopFriends(a,!1,b("SidebarType").BUDDYLIST)};a.prototype._showBuddyList=function(){"use strict";this._buddyListRenderSubscription=this.orderedList.subscribe("render",function(){b("Style").get(this.body,"height")!=m&&b("Style").set(this.body,"height",m)}.bind(this)),this.orderedList.show(),n.bump("buddylist_show")};a.prototype._hideBuddyList=function(){"use strict";this.orderedList.hide(),n.bump("buddylist_hide")};a.prototype.onShow=function(){"use strict";this._isOpen=!0,b("ChannelConnection").disconnected()?(b("ChannelConnection").reconnect(),this._showBuddyList()):b("ChatVisibility").goOnline(this._showBuddyList.bind(this)),this._syncHideBuddylist(!1)};a.prototype._setLabel=function(a,c){"use strict";var d=this.label.textContent||this.label.innerText;if(d!==a){d=this.label.cloneNode(!0);b("DOM").setContent(d,a);b("DOM").replace(this.label,d);this.label=d}this.throbber&&b("CSS").conditionShow(this.throbber,!!c)};a.prototype._setUnread=function(a){"use strict";b("CSS").conditionShow(this.unreadCount,!!a)};a.prototype._updateCount=function(){"use strict";this._updateView()};a.prototype._syncHideBuddylist=function(a){"use strict";b("ChatOptions").setSetting("hide_buddylist",a,"buddylist"),new(b("AsyncRequest"))("/ajax/chat/settings.php").setHandler(b("emptyFunction")).setErrorHandler(b("emptyFunction")).setData({hide_buddylist:a,window_id:b("PresenceUtil").getSessionID()}).setAllowCrossPageTransition(!0).send()};b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,c){c.buddylist_visible=b("ChatSidebarStore").getVisibleType()===b("SidebarType").BUDDYLIST});e.exports=a}),null);
__d("MercuryFolders",["MercuryFoldersConfig","MessagingTag"],(function(a,b,c,d,e,f){__p&&__p();var g=[b("MessagingTag").INBOX,b("MessagingTag").PENDING,b("MessagingTag").OTHER,b("MessagingTag").ACTION_ARCHIVED];a={getSupportedFolders:function(){return g.filter(function(a){if(a===b("MessagingTag").PENDING)return!b("MercuryFoldersConfig").hide_message_filtered;else if(a===b("MessagingTag").OTHER)return!b("MercuryFoldersConfig").hide_message_requests;return!0}).concat()},getFromMeta:function(a){var c=a.folder;a.is_archived&&(c=b("MessagingTag").ACTION_ARCHIVED);return c}};e.exports=a}),null);
__d("MercuryUnreadState",["invariant","MercuryFolders","LogHistory","KeyedCallbackManager","MercuryActionType","MercuryConfig","MercuryDispatcher","MercuryGlobalActionType","MercurySingletonProvider","MercuryThreadlistConstants","MercuryThreadIDMap","MessagingTag","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","createObjectFrom"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=(b("MercuryFolders").getSupportedFolders()||[]).filter(function(a){return a!==b("MessagingTag").ACTION_ARCHIVED}),i="unread_thread_hash",j="unseen_thread_list",k=b("MercuryThreadlistConstants").MAX_UNREAD_COUNT,l=b("LogHistory").getInstance("mercury_unread_state");a.getForFBID=function(a){return m.getForFBID(a)};a.get=function(){return m.get()};function a(a){this.$1=a,this.$2=b("MercuryServerRequests").getForFBID(this.$1),this.$3=b("MercuryThreadIDMap").getForFBID(this.$1),this.$4=b("MercuryThreadInformer").getForFBID(this.$1),this.$5=b("MercuryThreads").getForFBID(this.$1),this.$6=b("MercuryDispatcher").getForFBID(this.$1),this.$7={},this.$8={},this.$9={},this.$10={},this.$11={},h.forEach(function(a){this.$9[a]=0,this.$10[a]=!1,this.$11[a]=new(b("KeyedCallbackManager"))()}.bind(this)),this.$6.subscribe("update-unread",this.$12.bind(this)),this.$6.subscribe("update-thread-ids",function(a,b){this.$13(b)}.bind(this))}a.prototype.getUnreadCount=function(a){if(this.exceedsMaxCount(a)){l.error("unguarded_unread_count_fetch","{}");return 0}return this.$14(a)};a.prototype.exceedsMaxCount=function(a){return this.$10[a]||this.$14(a)>k};a.prototype.markFolderAsRead=function(a){(this.$10[a]||this.$14(a)>0)&&this.$2.markFolderAsRead(a),b("MercuryConfig").MessengerInboxRequests&&a===b("MessagingTag").INBOX&&this.$14(b("MessagingTag").PENDING)>0&&this.$2.markFolderAsRead(b("MessagingTag").PENDING)};a.prototype.getIsThreadUnread=function(a,c){c=c||b("MessagingTag").INBOX;c=this.$15(c);return!!(c&&c[a])};a.prototype.$16=function(a,b){this.$11[a].setResource(i,b),this.$11[a].setResource(j,Object.keys(b))};a.prototype.$17=function(a,b){b=this.$11[a].executeOrEnqueue(i,b);b=this.$11[a].getUnavailableResources(b);b.length&&this.$2.fetchUnreadThreadIDs(a)};a.prototype.$15=function(a){return this.$11[a].getResource(i)};a.prototype.$14=function(a){var b=this.$11[a].getResource(j);if(b)return b.length;else return this.$9[a]};a.prototype.$12=function(a,c){__p&&__p();var d=void 0;(c.unread_thread_fbids||[]).forEach(function(a){d=a.folder;if(!this.$18(d))return;var c=a.thread_fbids||[];c=c.concat(a.other_user_fbids||[]);a=this.$19(c);this.$16(d,b("createObjectFrom")(a,!0));a.length>k&&(this.$10[d]=!0);this.$4.updatedUnreadState()}.bind(this));(c.message_counts||[]).forEach(function(a){if(a.unread_count===undefined)return;d=a.folder;a.unread_count>k?(this.$10[d]=!0,this.$16(d,{}),this.$4.updatedUnreadState()):(this.$9[d]=a.unread_count,this.$9[d]===0&&this.$16(d,{}),this.$4.updatedUnreadState())}.bind(this));(c.global_actions||[]).forEach(function(a){a.action_type===b("MercuryGlobalActionType").MARK_ALL_READ&&this.$20(a.folder,a.timestamp)}.bind(this));(c.actions||[]).forEach(function(a){__p&&__p();var c=b("MercuryActionType"),e=a.other_user_fbid?a.other_user_fbid:a.thread_fbid,f=a.thread_id?a.thread_id:e;if(a.action_type==c.DELETE_THREAD)h.forEach(function(a){this.$21(a,f)}.bind(this));else if(a.action_type==c.CHANGE_ARCHIVED_STATUS||a.action_type==c.CHANGE_FOLDER){e=this.$5.getThreadMetaNow(a.thread_id);!e&&g(0);d=b("MercuryFolders").getFromMeta(e);this.$18(d)&&e.unread_count>0&&this.$22(d,f);h.forEach(function(a){a!=d&&this.$21(a,f)}.bind(this))}else{d=this.$23(a);if(!this.$18(d))return;a.action_type==c.CHANGE_READ_STATUS?a.mark_as_read?this.$21(d,f,a.timestamp):this.$22(d,f,a.timestamp):(a.action_type==c.USER_GENERATED_MESSAGE||a.action_type==c.LOG_MESSAGE)&&(a.is_unread&&this.$22(d,f,a.timestamp))}}.bind(this))};a.prototype.$22=function(a,b,c){if(this.$10[a])return;this.$17(a,function(d){var e=this.$7[a]||0,f=this.$8[b]||0,g=c||Number.POSITIVE_INFINITY;g>=e&&g>=f&&!d[b]&&(d[b]=c||0,this.$16(a,d),this.$4.updatedUnreadState())}.bind(this))};a.prototype.$21=function(a,b,c){__p&&__p();if(this.$10[a])return;this.$17(a,function(d){if(c){var e=this.$8[b];(!e||e<c)&&(this.$8[b]=c)}e=d[b];if(c&&typeof e=="number"&&c<e)return;b in d&&(delete d[b],this.$16(a,d),this.$4.updatedUnreadState())}.bind(this))};a.prototype.$20=function(a,b){this.$10[a]=!1,this.$16(a,{}),this.$7[a]=Math.max(this.$7[a]||0,b||0),this.$4.updatedUnreadState()};a.prototype.$19=function(a){return a.map(this.$3.convertThreadIDIfAvailable,this.$3)};a.prototype.$13=function(a){h.forEach(function(b){var c=this.$15(b);if(!c)return;for(var d in a){var e=a[d];c[d]&&(c[e]=c[d],delete c[d])}this.$16(b,c)}.bind(this))};a.prototype.$23=function(a){var c=a.thread_id?this.$5.getThreadMetaNow(a.thread_id):null;return c?b("MercuryFolders").getFromMeta(c):a.folder?a.folder:""};a.prototype.$18=function(a){return!!a&&h.includes(a)};var m=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("ChatUnreadCount",["ChatConfig","ChatDispatcher","ChatUnreadCountActionTypes","MercuryIDs","MercurySingletonProvider","MercuryThreadInformer","MercuryThreads","MercuryUnreadState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};function a(a){this.$1=a,this.$2=b("MercuryThreadInformer").getForFBID(a),this.$3=b("MercuryThreads").getForFBID(a),this.$4=new Map(),this.$5=b("MercuryUnreadState").getForFBID(a),this.setupSubscriptions()}a.prototype.getUnreadCountForUID=function(a){__p&&__p();if(!a)return null;var c=b("MercuryIDs").getThreadIDFromUserID(a);if(!this.$5.getIsThreadUnread(c)&&!b("ChatConfig").get("unread_count_fix")){this.$4["delete"](a);return 0}c=this.$3.getOrFetch(c);c=c&&c.unread_count;!c&&b("ChatConfig").get("unread_count_fix")?this.$4["delete"](a):this.$4.set(a,c);return c};a.prototype.setupSubscriptions=function(){__p&&__p();this.$2.subscribe("threads-updated",function(a,c){a=Object.keys(c).some(function(a){a=b("MercuryIDs").getUserIDFromThreadID(a);if(!a)return!1;var c=this.getUnreadCountForUID(a);a=this.$4.get(a)||0;return c!==a}.bind(this));a&&b("ChatDispatcher").dispatch({type:b("ChatUnreadCountActionTypes").COUNT_UPDATED})}.bind(this)),this.$2.subscribe("unread-updated",function(){return b("ChatDispatcher").dispatch({type:b("ChatUnreadCountActionTypes").COUNT_UPDATED})})};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("NotificationBeeperConst",["keyMirror"],(function(a,b,c,d,e,f){a={IDLE_DELAY:1e4,ACTIVE_DELAY_LONG:4e3,FADE_OUT_LENGTH:1500,BeepStates:b("keyMirror")({PENDING:!0,RENDERED:!0,READY_TO_HIDE:!0,FADING_OUT:!0})};e.exports=a}),null);
__d("NotificationBeeperItemCloseButton.react",["cx","fbt","React","XUIAbstractGlyphButton.react"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){"use strict";var a=h._("Close");return b("React").createElement(b("XUIAbstractGlyphButton.react"),babelHelpers["extends"]({},this.props,{className:"_3soc",title:a,label:a,labelIsHidden:!0}))};function a(){"use strict";i.apply(this,arguments)}e.exports=a}),null);
__d("NotificationURI",["BusinessURI.brands","URI","VideoPermalinkURI","isFacebookURI"],(function(a,b,c,d,e,f){__p&&__p();a={localize:function(a){try{a=b("BusinessURI.brands")(a)}catch(b){return a.toString()}var c=a.getSubdomain();return a.getUnqualifiedURI().getQualifiedURI().setSubdomain(c).toString()},snowliftable:function(a){if(!a)return!1;a=new(b("URI"))(a);var c=a.getQueryData();return b("isFacebookURI")(a)&&(b("VideoPermalinkURI").isValid(a)||"fbid"in c)},isVaultSetURI:function(a){return this._areEquals(a,"/ajax/vault/sharer_preview.php")},isAlbumDraftRecoveryDialogURI:function(a){return this._areEquals(a,"/ajax/photos/upload/overlay/")},isQuicksilverURI:function(a){return this._areEquals(a,"/games/quicksilver/spotlight/")},isDirectURI:function(a){return this._startsWith(a,"/direct/")},isIGAccountCreationURI:function(a){return this._areEquals(a,"/ads/growth/aymt/instagram/account-creation-dialog/")},_areEquals:function(a,c){if(!a)return!1;a=new(b("URI"))(a);return b("isFacebookURI")(a)&&a.getPath()===c},_startsWith:function(a,c){if(!a)return!1;a=new(b("URI"))(a);return b("isFacebookURI")(a)&&a.getPath().startsWith(c)}};e.exports=a}),null);
__d("XLiveVideoLoadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live/video/load/",{video_id:{type:"FBID",required:!0}})}),null);
__d("NotificationListRendererUtils",["AsyncRequest","Bootloader","NotificationURI","PageTransitions","URI","VideoChainingCaller","XLiveVideoLoadController","idx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(event,a){b("Bootloader").loadModules(["FBStoriesLiveNotificationHandler"],function(b){b.renderLiveStory(a)},"NotificationListRendererUtils")}function h(event,a,c){b("Bootloader").loadModules(["TahoeController"],function(d){var e=b("NotificationURI").localize(new(b("URI"))(c.url)),f=a.video_channel_caller;d.openFromVideoLink(new(b("URI"))(e),{channelID:a.video_channel_id,caller:f?(d=b("VideoChainingCaller"))!=null?d[f]:d:null})},"NotificationListRendererUtils")}var i={openNotification:function(event,a){__p&&__p();var c=a.renderer_data;if(c==null)return;if(!i.isStoryOnlyLiveVideoNotification(a)&&(event.metaKey||event.ctrlKey||event.button===1))return;if(c.__typename==="LiveVideoNotificationRendererData"){event.preventDefault();c=b("XLiveVideoLoadController").getURIBuilder().setFBID("video_id",c.video_id).getURI();c=new(b("AsyncRequest"))(c).setHandler(function(c){c.payload?i.openNotificationInSurface(event,a):b("PageTransitions").go(a.url)});c.send()}},openNotificationInSurface:function(event,a){var b=a.renderer_data;if(b==null)return;b.bucket_data?g(event,b):b.can_render_in_tahoe&&h(event,b,a)},isStoryOnlyLiveVideoNotification:function(a){a=a.renderer_data;return a==null?!1:a.__typename==="LiveVideoNotificationRendererData"&&!!a.bucket_data}};e.exports=i}),null);
__d("RelationshipDelightTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RelationshipDelightLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RelationshipDelightLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RelationshipDelightLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAlertID=function(a){this.$1.alert_id=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setMetadata=function(a){this.$1.metadata=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={alert_id:!0,event:!0,metadata:!0,vc:!0};e.exports=a}),null);
__d("RelationshipDelightUtils",["NotificationRelationshipDelightsConfig","QE2Logger","RelationshipDelightTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function h(a){a=a.eligible_buckets;return!!a&&a.indexOf("SO_NOTIFICATIONS")!==-1}function i(){b("QE2Logger").logExposureForUser(b("NotificationRelationshipDelightsConfig").universeName)}function a(a){var c=b("NotificationRelationshipDelightsConfig").shouldDecorateNotificationWithHearts,d=b("NotificationRelationshipDelightsConfig").shouldLogExposureForNotification;if(h(a)===!1)return!1;d&&i();return c===!0}function j(a,event,c){var d=event+"-"+a;if(g[d])return;g[d]=!0;d=new(b("RelationshipDelightTypedLogger"))().setEvent(event).setAlertID(a);c&&d.setMetadata(JSON.stringify(c));d.log()}c={shouldHeartBadge:function(a){var c=b("NotificationRelationshipDelightsConfig").shouldDecorateBadgeWithHearts,d=b("NotificationRelationshipDelightsConfig").shouldLogExposureForBadge;if(h(a)===!1)return!1;d&&i();return c===!0},shouldHeartBeeper:a,shouldHeartNotification:a,logNotificationAnimation:function(a,b,c){j(a,"notification_animated",{animation:b,rowIndex:c})},logBeeperAnimation:function(a){j(a,"beeper_animated")},logBadgeAnimation:function(a){j(a,"badge_animated")}};e.exports=c}),null);
__d("NotificationBeeperItemContents.react",["cx","Animation","AsyncRequest","BootloadedComponent.react","Bootloader","FBProfilePhotoShadow.react","Image.react","ImageBlock.react","JSResource","NotificationBeeperItemCloseButton.react","NotificationInterpolator","NotificationListRendererUtils","NotificationURI","NotificationUserActions","React","ReactDOM","RelationshipDelightUtils","TextWithEntities.react","Timestamp.react","URI"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.isLiveVideo=null,this.$2=function(a){__p&&__p();this.$1();this.props.onHide();if(a.button===1||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)return;var c=this.props.notification;b("NotificationListRendererUtils").openNotification(a,c);if(a.isDefaultPrevented()===!0)return;var d=c.primerAttributes;if(d&&(d.rel==="async"||d.rel==="async-post")){var e=new(b("AsyncRequest"))(d.ajaxify||c.url);d.rel==="async-post"&&e.setMethod("POST");e.send();a.preventDefault()}else d&&d.rel==="theater"?(a.persist(),b("Bootloader").loadModules(["PhotoSnowlift"],function(b){b.bootstrap(d.ajaxify||c.url,a.currentTarget)},"NotificationBeeperItemContents.react"),a.preventDefault()):d&&(d.rel==="dialog"||d.rel==="dialog-post")&&(b("Bootloader").loadModules(["AsyncDialog"],function(b){b.bootstrap(d.ajaxify||c.url,a.currentTarget,"dialog")},"NotificationBeeperItemContents.react"),a.preventDefault())}.bind(this),this.$3=function(){this.$1(),this.props.onHide()}.bind(this),c}a.prototype.$1=function(){"use strict";b("NotificationUserActions").markNotificationsAsRead([this.props.notification.alert_id])};a.prototype.$4=function(){"use strict";new(b("Animation"))(b("ReactDOM").findDOMNode(this.refs.inner)).from("opacity","0").to("opacity","1").duration(200).go()};a.prototype.$5=function(){"use strict";var a=this.$6();a=JSON.parse(a);return a.content_id};a.prototype.$7=function(){"use strict";if(this.isLiveVideo===null){var a=this.$6();this.isLiveVideo=a.indexOf("live_video")!==-1}return!!this.isLiveVideo};a.prototype.$6=function(){"use strict";return this.props.notification.tracking||"{}"};a.prototype.$8=function(){"use strict";var a=this.props.notification,c=b("RelationshipDelightUtils").shouldHeartBeeper(a);if(!c)return null;b("RelationshipDelightUtils").logBeeperAnimation(a.alert_id);return b("React").createElement("div",{className:"_5_xp"},b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("RelationshipDelightsActorAnimation.react").__setRef("NotificationBeeperItemContents.react")}))};a.prototype.componentDidMount=function(){"use strict";this.props.onReadyToHide(this.props.notification.alert_id),this.$7()&&b("Bootloader").loadModules(["VideoPlayerMetaData","PhotoSnowliftVideoNode"],function(a,b){b=this.$5();b&&a.genVideoData(b)}.bind(this),"NotificationBeeperItemContents.react")};a.prototype.componentDidUpdate=function(a){"use strict";(a.notification.alert_id!==this.props.notification.alert_id||a.notification.creation_time!==this.props.notification.creation_time)&&(this.$4(),this.props.onReadyToHide(this.props.notification.alert_id))};a.prototype.render=function(){"use strict";var a=this.props.notification,c=a.thumbnail?a.thumbnail.uri:null,d=a.icon?a.icon.uri:null,e=b("NotificationURI").localize(new(b("URI"))(a.url));return b("React").createElement("div",{ref:"inner",className:this.props.className},b("React").createElement(b("NotificationBeeperItemCloseButton.react"),{onClick:this.$3}),b("React").createElement("a",{href:e,onClick:this.$2,className:"_3soi"},b("React").createElement(b("ImageBlock.react"),{className:"_3soj",spacing:"medium"},b("React").createElement(b("FBProfilePhotoShadow.react"),{className:"_2yt7"},b("React").createElement(b("Image.react"),{src:c,className:"_3sok"+(c?"":" hidden_elem")})),b("React").createElement("div",{className:"_3sol"},b("React").createElement(b("TextWithEntities.react"),{renderEmoticons:!0,renderEmoji:!0,interpolator:b("NotificationInterpolator"),ranges:a.title.ranges,aggregatedranges:a.title.aggregated_ranges,text:a.title.text}),b("React").createElement(b("ImageBlock.react"),{className:"_3som"},b("React").createElement(b("Image.react"),{className:"_1x8t"+(d?"":" hidden_elem"),src:d}),b("React").createElement(b("Timestamp.react"),{time:a.timestamp.time,text:a.timestamp.text,verbose:a.timestamp.verbose})))),this.$8()))};e.exports=a}),null);
__d("NotificationBeeperItem.react",["cx","CSSFade","NotificationBeeperConst","NotificationBeeperItemContents.react","NotificationBeeperItemRenderersList","React","ReactDOM","Style","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("NotificationBeeperConst").FADE_OUT_LENGTH;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={encounteredException:!1,fadedIn:!1,hidden:!1},this.$3=function(){this.setState({hidden:!0})}.bind(this),b}a.prototype.componentDidCatch=function(){"use strict";this.props.onReadyToHide(this.props.notification.alert_id),this.setState(function(a){return babelHelpers["extends"]({},a,{encounteredException:!0})})};a.prototype.componentDidMount=function(){"use strict";b("setTimeoutAcrossTransitions")(function(){this.setState({fadedIn:!0})}.bind(this),50),this.props.onInserted(this.props.notification.alert_id)};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.cancel()};a.prototype.render=function(){"use strict";if(this.state.encounteredException)return null;var a=this.props.notification,c=a.renderer_data;a=a.tracking;c=this.$4(c);return b("React").createElement("li",{className:this.state.hidden?"hidden_elem":"",ref:function(a){return this.$2=a}.bind(this),"data-gt":a},b("React").createElement(c,{className:"_3sod"+(this.state.fadedIn?" _3soe":""),notification:this.props.notification,onHide:this.$3,onReadyToHide:this.props.onReadyToHide,onPreventHide:this.props.onPreventHide}))};a.prototype.componentDidUpdate=function(a,c,d){"use strict";if(!this.$2)return;a=b("ReactDOM").findDOMNode(this.$2);if(!a)return;this.props.fadingOut?(this.$1=b("CSSFade").hide(a,{callback:this.$3,duration:i}),a.style.transitionDuration="0ms"):(this.$1&&(this.$1.cancel(),this.$1=undefined),b("Style").set(a,"opacity","1"))};a.prototype.$4=function(a){"use strict";return a&&a.__typename==="LiveVideoNotificationRendererData"&&a.video_id==null?b("NotificationBeeperItemContents.react"):b("NotificationBeeperItemRenderersList")[a&&a.__typename]||b("NotificationBeeperItemContents.react")};e.exports=a}),null);
__d("NotificationImpressions",["AsyncSignal","NotificationTokens","URI"],(function(a,b,c,d,e,f){var g="/ajax/notifications/impression.php";function a(a,c){var d={ref:c};b("NotificationTokens").untokenizeIDs(a).forEach(function(a,b){d["alert_ids["+b+"]"]=a});new(b("AsyncSignal"))(new(b("URI"))(g).getQualifiedURI().toString(),d).send()}e.exports={log:a}}),null);
__d("SoundPlayer",["URI","createArrayFromMixed"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();function h(a){var c=new(b("URI"))(a);return c.getDomain()?a:new(b("URI"))(window.location.href).setPath(c.getPath()).toString()}function i(a){a=new(b("URI"))(a).getPath();if(/\.mp3$/.test(a))return"audio/mpeg";return/\.og[ga]$/.test(a)?"audio/ogg":""}var j={preload:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(g.has(e))return;var f=document.createElement("audio");if(!f||!f.canPlayType||!f.canPlayType(i(e)))continue;f.preload="auto";f.src=h(e);document.body&&document.body.appendChild(f);g.set(e,f);return}},play:function(a){__p&&__p();var c=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];for(var d=b("createArrayFromMixed")(a),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(e){if(f>=d.length)break;h=d[f++]}else{f=d.next();if(f.done)break;h=f.value}var i=h;g.has(i)||j.preload(i);var k=g.get(i);if(!k)continue;c.loop&&k.setAttribute("loop","");c.volume&&(k.volume=c.volume);k.play();return}},pause:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=g.get(e);if(e){e.pause();return}}},stop:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=g.get(e);if(f){f.pause();f.removeAttribute("src");f.src=h(e);return}}}};e.exports=j}),null);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],(function(a,b,c,d,e,f){__p&&__p();var g="fb_sounds_playing3";function h(){__p&&__p();var a=b("WebStorage").getLocalStorage();if(a)try{a=a[g];if(a){a=JSON.parse(a);if(Array.isArray(a))return a}}catch(a){}return[]}function i(a){var c=b("WebStorage").getLocalStorage();if(c){var d=h();d.push(a);while(d.length>5)d.shift();try{c[g]=JSON.stringify(d)}catch(a){}}}function j(a){return h().some(function(b){return b===a})}a={play:function(a,c,d){a=b("createArrayFromMixed")(a);c=c||a[0]+Math.floor(Date.now()/1e3);if(j(c))return;b("SoundPlayer").play(a,{loop:!!d});i(c)},isSupported:function(){return!!b("WebStorage").getLocalStorage()}};e.exports=a}),null);
__d("SoundRPC",["Event","FBJSON","SoundSynchronizer"],(function(a,b,c,d,e,f){__p&&__p();function g(a,c,d){b("SoundSynchronizer").play(a,c,d)}a={playLocal:g,playRemote:function(a,c,d,e){c={name:"SoundRPC",data:{paths:c,sync:d,loop:e}};a.postMessage(b("FBJSON").stringify(c),"*")},supportsRPC:function(){return!!window.postMessage},_listen:function(){b("Event").listen(window,"message",function(a){if(!/\.facebook.com$/.test(a.origin))return;var c={};try{c=b("FBJSON").parse(a.data)}catch(a){}c.name==="SoundRPC"&&g(c.data.paths,c.data.sync,c.data.loop)})}};e.exports=a}),null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","Visibility","isFacebookURI"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=!1;c={init:function(a){},play:function(a,c,d){g?b("SoundRPC").playRemote(g.contentWindow,a,c,!1):b("SoundRPC").playLocal(a,c,d),h=!0},hasPlayedSoundBefore:function(){return h},playOnlyIfImmediate:function(a,c,d){if(!h&&b("Visibility").isHidden())return;this.play(a,c,d)},stop:function(a){g||b("SoundPlayer").stop(a)}};d=new(b("URI"))(location.href);d.getSubdomain()&&d.getSubdomain()!=="www"&&d.setSubdomain("www");f=d.getDomain();function a(){if(b("UserAgent_DEPRECATED").ie()<9)return!1;return b("SoundInitialData").RPC_DISABLED?!1:b("SoundSynchronizer").isSupported()&&b("SoundRPC").supportsRPC()}b("isFacebookURI")(d)&&location.host!==f&&a()&&(g=document.createElement("iframe"),g.setAttribute("src","//"+f+"/sound_iframe.php"),g.style.display="none",document.body.appendChild(g));e.exports=c}),null);
__d("NotificationSound",["Sound"],(function(a,b,c,d,e,f){__p&&__p();var g=5e3;b("Sound").init(["audio/mpeg"]);function a(a){this._soundPath=a,this._lastPlayed=0}Object.assign(a.prototype,{play:function(a){if(!this._soundPath)return;var c=Date.now();if(c-this._lastPlayed<g)return;this._lastPlayed=c;b("Sound").playOnlyIfImmediate(this._soundPath,a)}});e.exports=a}),null);
__d("NotificationBeeper.react",["cx","Arbiter","ChannelConstants","FacebookWebNotificationsSubscription","NotificationBeeperConst","NotificationBeeperItem.react","NotificationConstants","NotificationImpressions","NotificationSound","NotificationUpdates","NotificationUserActions","NotifTestIDs","React","SubscriptionsHandler","clearTimeout","setTimeoutAcrossTransitions","shield"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("NotificationBeeperConst").ACTIVE_DELAY_LONG,j=b("NotificationBeeperConst").BeepStates,k=b("NotificationBeeperConst").FADE_OUT_LENGTH,l=b("NotificationBeeperConst").IDLE_DELAY,m="beeper";c=b("NotificationConstants").PayloadSourceType;var n=c.CLIENT,o=c.OTHER_APPLICATION;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={beeps:{},fading:!1,hovering:!1,soundEnabled:this.props.soundEnabled},this.onMouseEnter=function(){this.$2&&b("clearTimeout")(this.$2);var a=[],c=this.state.beeps;Object.keys(c).forEach(function(b){c[b].state!=j.PENDING?a.push(b):c[b].state=j.RENDERED});b("NotificationUserActions").markNotificationsAsSeen(a);this.setState({hovering:!0,fading:!1,beeps:c})}.bind(this),this.onMouseLeave=function(){this.$5(i),this.setState({hovering:!1})}.bind(this),this.$6=function(a){this.state.hovering||this.$5(),this.state.soundEnabled&&this.state.beeps[a].shouldPlaySound&&(this.$3||(this.$3=new(b("NotificationSound"))(this.props.soundPath)),this.$3.play(a)),this.props.shouldLogImpressions&&b("NotificationImpressions").log([a],m)}.bind(this),this.onReadyToHide=function(a,b){this.setState(function(b){var c=babelHelpers["extends"]({},b.beeps);c[a]=babelHelpers["extends"]({},c[a],{state:j.READY_TO_HIDE});return babelHelpers["extends"]({},b,{beeps:c})}),this.$2||this.$5(b)}.bind(this),this.$8=function(a){this.setState(function(b){var c=babelHelpers["extends"]({},b.beeps);c[a]=babelHelpers["extends"]({},c[a],{state:j.RENDERED});return babelHelpers["extends"]({},b,{beeps:c})})}.bind(this),this.$7=function(){this.$2=null,this.setState(function(a){var b=babelHelpers["extends"]({},a.beeps);Object.keys(b).forEach(function(a){b[a].state==j.READY_TO_HIDE&&(b[a]=babelHelpers["extends"]({},b[a],{state:j.FADING_OUT}))});return babelHelpers["extends"]({},a,{beeps:b,fading:!0})}),b("setTimeoutAcrossTransitions")(b("shield")(this.$9,this),k)}.bind(this),this.$9=function(){__p&&__p();if(!this.state.fading)return;this.setState(function(a){var b=babelHelpers["extends"]({},a.beeps);Object.keys(b).forEach(function(a){b[a].state==j.FADING_OUT&&delete b[a]});return babelHelpers["extends"]({},a,{beeps:b,fading:!1})});b("setTimeoutAcrossTransitions")(function(){this.setState(function(a){var b=babelHelpers["extends"]({},a.beeps);Object.keys(b).forEach(function(a){b[a].state==j.PENDING&&(b[a]=babelHelpers["extends"]({},b[a],{state:j.RENDERED}))});return babelHelpers["extends"]({},a,{beeps:b})})}.bind(this))}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){"use strict";__p&&__p();var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("NotificationUpdates").subscribe("update-notifications",function(a,b){if(b.payloadsource===o||b.payloadsource===n){a=b.nodes;a&&a.length&&this.handleBeepChanges(this.$4(a))}}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("notif_sound_pref_changed"),function(a,b){this.setState({soundEnabled:b.obj.enabled})}.bind(this)));a.addSubscriptions(b("FacebookWebNotificationsSubscription").subscribe({event:"NEW_BEEPER",callback:function(a){var b=a.notification;a=a.should_play_sound;if(b!==null){var c;this.handleBeepChanges((c={},c[b.alert_id]={notification:b,shouldPlaySound:a},c))}}.bind(this)}));this.$1=a;b("Arbiter").inform("NotificationBeeper/mounted",null,b("Arbiter").BEHAVIOR_PERSISTENT)};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.release(),this.$1=null};a.prototype.$5=function(a){"use strict";this.$2&&b("clearTimeout")(this.$2),this.$2=b("setTimeoutAcrossTransitions")(b("shield")(this.$7,this),a==null?l:a)};a.prototype.handleBeepChanges=function(a){"use strict";var b=this.state.fading?j.PENDING:j.RENDERED,c=!1,d=babelHelpers["extends"]({},this.state.beeps);Object.keys(a).reverse().forEach(function(e){var f=a[e],g=d[e];(!g||g.notification.alert_id!==f.notification.alert_id||g.notification.creation_time!==f.notification.creation_time)&&(g&&(c=!0,delete d[e]),d[e]=babelHelpers["extends"]({},f,{state:b}))});c&&this.$5();this.setState({beeps:d})};a.prototype.render=function(){"use strict";__p&&__p();var a=this.state.beeps,c=[];Object.keys(a).reverse().forEach(function(d){var e=a[d];if(e.state==j.PENDING)return;c.push(b("React").createElement(b("NotificationBeeperItem.react"),{key:d,fadingOut:this.state.fading&&e.state==j.FADING_OUT,notification:e.notification,onInserted:this.$6,onReadyToHide:this.onReadyToHide,onPreventHide:this.$8}))}.bind(this),this);var d=c.length>0;d=(d?"":"hidden_elem")+" _50d1";return b("React").createElement("ul",{ref:"container",className:d,"data-gt":this.props.tracking,"data-testid":b("NotifTestIDs").BEEPER_LIST,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},c)};a.prototype.$4=function(a){"use strict";return a.reduce(function(a,b){a[b.alert_id]={notification:b,shouldPlaySound:!1};return a},{})};e.exports=a}),null);
__d("NotificationBeeperContainer",["NotificationBeeper.react","React","ReactDOM"],(function(a,b,c,d,e,f){a={renderBeeper:function(a,c){b("ReactDOM").render(b("React").createElement(b("NotificationBeeper.react"),a),c)}};e.exports=a}),null);
__d("LiveVideoBeeperItemContents.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("LiveVideoBeeperItemContentsImpl.react").__setRef("LiveVideoBeeperItemContents.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),babelHelpers["extends"]({},this.props,{ref:"itemContents"}))})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("ConversationNubAddTabSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NOTIFICATION:"notification",PAGE_REFRESH:"page_refresh",USER_PIN:"user_pin",UNSEEN_NOTIFICATION:"unseen_notification",UNKNOWN:"unknown"})}),null);
__d("ConversationNubTabStateListStorage",[],(function(a,b,c,d,e,f){"use strict";function a(){this.$1=[]}a.prototype.modify=function(a){this.$1=a(this.$1)};a.prototype.getData=function(){return this.$1};e.exports=a}),null);
__d("differenceSets",["filterSet"],(function(a,b,c,d,e,f){"use strict";function a(a){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("filterSet")(a,function(a){return!d.some(function(b){return b.has(a)})})}e.exports=a}),null);
__d("ConversationNubTabStateList",["invariant","ConversationNubTabStateListStorage","differenceSets"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(){this.$2=new Set(),this.$1=new(b("ConversationNubTabStateListStorage"))()}a.prototype.modifyTabState=function(a,b){this.modifyTabs(function(c){var d=c.findIndex(function(b){return b.tabID===a});d!==-1||g(0);b(c[d]);return c})};a.prototype.$3=function(a){return new Set(a.map(function(a){return a.tabID}))};a.prototype.modifyTabs=function(a){try{this.$1.modify(function(c){var d=this.$3(c);c=a(c);var e=this.$3(c);this.$2=b("differenceSets")(d,e);return c}.bind(this))}finally{this.$2=new Set()}};a.prototype.getTabs=function(){return this.$1.getData()};a.prototype.getTabState=function(a){a=this.getTabStateIfExists(a);a||g(0);return a};a.prototype.getTabStateIfExists=function(a){return this.getTabs().find(function(b){return b.tabID===a})};a.prototype.push=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.modifyTabs(function(a){b.forEach(function(b){a.find(function(a){return a.tabID===b.tabID})?g(0):a.push(b)});return a})};a.prototype.remove=function(a){this.modifyTabs(function(b){var c=b.findIndex(function(b){return b.tabID===a});c!==-1&&b.splice(c,1);return b})};e.exports=a}),null);
__d("ConversationNubTabState",["invariant","ConversationNubTabStateList"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=12;function a(){this.$1=Object.create(null),this.$2=new(b("ConversationNubTabStateList"))(),this.$3=Infinity}a.prototype.anyTabHasFocus=function(){return this.getUnsortedLoadedTabs().some(function(a){return a.getIsFocused()})};a.prototype.anyTabHasText=function(){return this.getUnsortedLoadedTabs().some(function(a){return a.getHasText()})};a.prototype.getTabState=function(a){return this.$2.getTabState(a)};a.prototype.getTabStateIfExists=function(a){return this.$2.getTabStateIfExists(a)};a.prototype.getUnloadedTabs=function(){var a=this.$2.getTabs().filter(function(a){return!this.getLoadedTab(a.tabID)}.bind(this));return a};a.prototype.setMaxDockTabs=function(a){this.$3=a};a.prototype.getNumDockTabs=function(){var a=this.$3,b=this.getTotalTabCount();return Math.min(a,b)};a.prototype.getNumMenuTabs=function(){return this.getTotalTabCount()-this.getNumDockTabs()};a.prototype.addTabState=function(a){this.$2.push(a)};a.prototype.addLoadedTab=function(a,b){var c=this.getTabState(a);if(!c)return;c=this.getLoadedTab(a);if(c)return;this.$1[a]=b;this.$4()};a.prototype.getLoadedTab=function(a){return this.$1[a]};a.prototype.getLoadedTabByFeedbackTarget=function(a){return this.getLoadedTabs().find(function(b){return b.getPersistentState().ftID===a})};a.prototype.isTabInDock=function(a){a=this.getLoadedTab(a);if(!a)return!1;a=this.$5(a);return 0<=a&&a<this.getNumDockTabs()};a.prototype.clearTabNotifications=function(a){this.$2.modifyTabState(a,function(a){a.unseenCommentsSinceLastCleared={},a.hasFakeInitBadge=!1,a.badgeCount=0,a.isBlinkingUnread=!1})};a.prototype.deleteTab=function(a){var b=this.getLoadedTab(a);b&&(delete this.$1[a],b.destroy());this.$2.remove(a);return Boolean(b)};a.prototype.deleteAllTabs=function(){this.getUnsortedLoadedTabs().forEach(function(a){return this.deleteTab(a.getTabID())}.bind(this))};a.prototype.modifyTabState=function(a,b){return this.$2.modifyTabState(a,b)};a.prototype.moveTabToDockLeft=function(a){__p&&__p();var b=this.getLoadedTab(a);if(!b)return;this.$2.modifyTabs(function(c){__p&&__p();var d=c.findIndex(function(b){return b.tabID===a});d!==-1||g(0);var e=c[d],f=this.$5(b),h=this.getLoadedTabs().length,i=this.getNumDockTabs();if(f<0||h===0)return c;else if(i===0){f!==0&&(c.splice(d,1),c.unshift(e));return c}h=i-1;if(f===h)return c;c.splice(d,1);f<h&&(h-=1);i=this.getLoadedTabs()[h];var j=this.getTabState(i.getTabID());j||g(0);d=c.findIndex(function(a){return a.tabID===j.tabID});c.splice(d,0,e);return c}.bind(this))};a.prototype.getLoadedTabs=function(){var a=this.$2.getTabs().map(function(a){return this.getLoadedTab(a.tabID)}.bind(this)).filter(Boolean);return a};a.prototype.getUnsortedLoadedTabs=function(){var a=Object.values(this.$1);return a};a.prototype.getTotalTabCount=function(){return this.getUnsortedLoadedTabs().length};a.prototype.getTabsForDockOldestFirst=function(){return this.getLoadedTabs().slice(0,this.getNumDockTabs())};a.prototype.getTabsForDockNewestFirst=function(){return this.getTabsForDockOldestFirst().slice().reverse()};a.prototype.getTabsForMenuOldestFirst=function(){return this.getLoadedTabs().slice(this.getNumDockTabs())};a.prototype.getTabsForMenuNewestFirst=function(){return this.getLoadedTabs().slice(this.getNumDockTabs()).reverse()};a.prototype.$4=function(){var a=this.getLoadedTabs().length;if(a>h){a=a-h;a=this.getTabsForMenuOldestFirst().slice(0,a);a.map(function(a){return a.getTabID()}).forEach(function(a){return this.deleteTab(a)}.bind(this))}};a.prototype.$5=function(a){return this.getLoadedTabs().indexOf(a)};e.exports=new a()}),null);
__d("ConversationNubAddCommentSubscription",["Arbiter","ConversationNubTabState","UFIUIEvents"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return b("Arbiter").subscribe(b("UFIUIEvents").Comment,function(c,d){c=d.ft_id;d=d.form;if(!c||!d)return;var e=b("ConversationNubTabState").getLoadedTabByFeedbackTarget(c);e&&e.isFormForThisUFI(d)&&a(e,c)})}e.exports={subscribe:a}}),null);
__d("ConversationNub",["csx","cx","Arbiter","ConversationNubHeader","ConversationNubTabState","ConversationNubTabsUpdateEventController","ConversationNubUtils","CSS","DOM","EventListener","NotificationUserActions","SubscriptionsHandler","UFIComposerIsTypingStore","URI","containsNode","debounce","guid"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ConversationNubTabsUpdateEventController").minimizeAndInformTabUpdate,j=b("ConversationNubTabsUpdateEventController").popOutAndInformTabUpdate,k=b("ConversationNubTabState"),l=10,m=500,n=100;a.createDefaultState=function(a,c,d,e,f,g){return{tabID:a,permalinkURI:c?new(b("URI"))(c):null,ftID:d,notifAlertID:e,notificationType:f,title:g,keepAtBottom:!1,isTabRaised:!1,isBlinkingUnread:!1,badgeCount:0,allSeenNewComments:{},unseenCommentsSinceLastCleared:{},hasFakeInitBadge:!1}};function a(a,c,d,e){__p&&__p();var f=arguments.length<=4||arguments[4]===undefined?!1:arguments[4],g=arguments.length<=5||arguments[5]===undefined?!1:arguments[5];this.$13=!1;this.$14=!1;this.$1=a;this.$12=c;this.$5=b("guid")();this.$7=null;this.$8=!1;this.$9=null;this.$10=f;this.$11=g;this.$15=e;this.$6=new(b("SubscriptionsHandler"))();this.$16();this.$17();d!=null&&k.modifyTabState(this.$12,function(a){d?a.hasFakeInitBadge=!1:(a.hasFakeInitBadge=!0,this.$18(1),this.$19(!0))}.bind(this));this.$20()}a.prototype.$20=function(){this.$21(),this.$22(),b("ConversationNubUtils").informShouldRecheckTabVisibility(this),this.forceReflow()};a.prototype.getPersistentState=function(){return k.getTabState(this.$12)};a.prototype.getPersistentStateIfExists=function(){return k.getTabStateIfExists(this.$12)};a.prototype.$16=function(){__p&&__p();var a=this.$23();if(a){this.$6.addSubscriptions(b("EventListener").listen(a,"click",this.$24.bind(this)),b("EventListener").listen(a,"mouseenter",this.$25.bind(this)),b("EventListener").listen(a,"mouseleave",this.$26.bind(this)));a=b("ConversationNubUtils").getCloseButtonElem(a);a&&b("ConversationNubUtils").addCloseButtonListeners(a,this.$6,this.$27.bind(this))}a=this.$28();a&&(k.modifyTabState(this.$12,function(a){a.keepAtBottom=!0}),this.$6.addSubscriptions(b("EventListener").listen(a,"scroll",b("debounce")(this.$29.bind(this),n)),b("Arbiter").subscribe("reflow",this.$30.bind(this))));a=this.$31();a&&this.$6.addSubscriptions(b("EventListener").listen(a,"focusin",this.$32.bind(this,!0)),b("EventListener").listen(a,"focusout",this.$32.bind(this,!1)))};a.prototype.$17=function(){__p&&__p();var a=this.$33();if(!a){this.$2=null;return}var c=function(){var a=this.getPersistentState();return{permalinkURI:a.permalinkURI,ftID:a.ftID,tabID:a.tabID}}.bind(this);a=new(b("ConversationNubHeader"))(a,c);this.$6.addSubscriptions(a.subscribe("closeButton",this.$27.bind(this)),a.subscribe("showMenu",this.$34.bind(this)),a.subscribe("hideMenu",this.$35.bind(this)),a.subscribe("minimizeButton",this.$36.bind(this,!0)),a.subscribe("clickHeader",this.$36.bind(this,!0)),a.subscribe("menuPermalinkClick",this.$36.bind(this,!1)),b("UFIComposerIsTypingStore").addListener(function(){var a=this.getPersistentStateIfExists();if(!a)return;var c=this.$14;a=b("UFIComposerIsTypingStore").getValueFor(a.ftID);this.$14=a===!0;c!==this.$14&&b("ConversationNubTabsUpdateEventController").informTabsUpdated()}.bind(this)));this.$2=a};a.prototype.$33=function(){return this.$1&&b("DOM").scry(this.$1,".fbNubFlyoutTitlebar")[0]};a.prototype.$23=function(){return this.$1&&b("DOM").scry(this.$1,".fbNubButton")[0]};a.prototype.$28=function(){!this.$3&&this.$1&&(this.$3=b("DOM").scry(this.$1,".uiScrollableAreaWrap")[0]);return this.$3};a.prototype.$31=function(){!this.$4&&this.$1&&(this.$4=b("DOM").scry(this.$1,".fbNubFlyoutBodyContent")[0]);return this.$4};a.prototype.$37=function(){var a=this.$23();return a?b("DOM").scry(a,"._37op")[0]:null};a.prototype.$27=function(){b("ConversationNubUtils").informShouldCloseTab(this.$12,this.getFeedbackTargetID(),b("ConversationNubUtils").CLOSE_REASON_TAB_X_OUT)};a.prototype.$36=function(a){i(this,a)};a.prototype.$34=function(){this.$1&&b("CSS").addClass(this.$1,"_1uw3")};a.prototype.$35=function(){this.$1&&b("CSS").removeClass(this.$1,"_1uw3")};a.prototype.$24=function(){this.getPersistentState().isTabRaised?i(this,!0):j(this,!0)};a.prototype.$25=function(){this.getPersistentState().isBlinkingUnread&&(this.$9=new Date())};a.prototype.$26=function(){var a=this.$9;if(a&&this.getPersistentState().isBlinkingUnread){var b=new Date();b-a>=m&&this.$19(!1)}this.$9=null};a.prototype.$38=function(){var a=this.$28();if(a){var b=a.scrollHeight;b>0&&!this.$39(a)&&(this.$8=!0,a.scrollTop=b)}};a.prototype.$39=function(a){a=a||this.$28();return!!(a&&a.scrollTop>=a.scrollHeight-a.clientHeight-l)};a.prototype.$29=function(){if(!k.getTabStateIfExists(this.$12)||!this.getPersistentState().isTabRaised)return;k.modifyTabState(this.$12,function(a){a.keepAtBottom=this.$39(),b("ConversationNubUtils").informShouldRecheckTabVisibility(this)}.bind(this));this.$8||this.clearJewelNotifications();this.$8=!1};a.prototype.$32=function(a){if(this.$13===a)return;this.$13=a;this.$13&&this.clearJewelNotifications();b("ConversationNubTabsUpdateEventController").informTabsUpdated()};a.prototype.getIsFocused=function(){return this.$13};a.prototype.getPageID=function(){return this.$15};a.prototype.getHasText=function(){return this.$14};a.prototype.$30=function(){var a=this.getPersistentState();if(!a.isTabRaised)return;a.keepAtBottom&&(this.$38(),this.$7&&clearTimeout(this.$7),this.$7=setTimeout(function(){a.keepAtBottom&&this.$38()}.bind(this),100))};a.prototype.$18=function(a){k.modifyTabState(this.$12,function(b){b.badgeCount=a,this.$21()}.bind(this))};a.prototype.$19=function(a){k.modifyTabState(this.$12,function(b){b.isBlinkingUnread=a,this.$22()}.bind(this))};a.prototype.$21=function(){var a=this.$37();if(!a)return;var c=this.getPersistentState().badgeCount,d=c>0;d?(b("DOM").setContent(a,c),b("CSS").show(a)):(b("CSS").hide(a),b("DOM").setContent(a,c))};a.prototype.$22=function(){if(this.$1){var a=this.getPersistentState().isBlinkingUnread;this.$1&&b("CSS").conditionClass(this.$1,"_53tf",a)}};a.prototype.getRootDOM=function(){return this.$1};a.prototype.getShouldShowIntroNux=function(){return this.$10};a.prototype.getShouldShowHideNux=function(){return this.$11};a.prototype.getTabID=function(){return this.$12};a.prototype.getNotificationPayloadAlertID=function(){return this.getPersistentState().notifAlertID};a.prototype.getNotificationType=function(){return this.getPersistentState().notificationType};a.prototype.setNotificationType=function(a){k.modifyTabState(this.$12,function(b){b.notificationType=a})};a.prototype.getFeedbackTargetID=function(){return this.getPersistentState().ftID};a.prototype.getPermalinkURI=function(){return this.getPersistentState().permalinkURI};a.prototype.getTitle=function(){return this.getPersistentState().title};a.prototype.getBadgeCount=function(){return this.getPersistentState().badgeCount};a.prototype.getIsRaised=function(){return this.getPersistentState().isTabRaised};a.prototype.getSessionID=function(){return this.$5};a.prototype.markCommentsAsSeenWithoutBadging=function(a){k.modifyTabState(this.$12,function(b){a.forEach(function(a){b.allSeenNewComments[a]=!0})})};a.prototype.attemptAddNewCommentsToBadge=function(a){__p&&__p();k.modifyTabState(this.$12,function(b){__p&&__p();a.forEach(function(a){if(b.allSeenNewComments[a])return;b.allSeenNewComments[a]=!0;b.unseenCommentsSinceLastCleared[a]=!0});var c=Object.keys(b.unseenCommentsSinceLastCleared).length;b.hasFakeInitBadge&&(c+=1);var d=b.badgeCount;this.$18(c);this.$19(c>0&&c>d)}.bind(this))};a.prototype.clearBadge=function(){k.clearTabNotifications(this.$12),this.$21(),this.$22()};a.prototype.clearJewelNotifications=function(){var a=this.getNotificationPayloadAlertID();a&&b("NotificationUserActions").markNotificationsAsRead([a])};a.prototype.popOutAndInformTabUpdate=function(){this.popOut(),b("ConversationNubTabsUpdateEventController").informTabsUpdated()};a.prototype.popOut=function(){k.modifyTabState(this.$12,function(a){this.$1&&b("CSS").addClass(this.$1,"_5r93"),a.isTabRaised=!0,this.clearBadge(),a.keepAtBottom&&this.$38()}.bind(this))};a.prototype.minimize=function(){k.modifyTabState(this.$12,function(a){this.$1&&b("CSS").removeClass(this.$1,"_5r93"),a.isTabRaised=!1,this.$2&&this.$2.hideMenu(),this.clearBadge()}.bind(this))};a.prototype.forceReflow=function(){this.$30()};a.prototype.isFormForThisUFI=function(a){return this.$1&&b("containsNode")(this.$1,a)};a.prototype.destroy=function(){this.$6.release(),this.$2&&this.$2.destroy(),this.$2=null,this.$7&&clearTimeout(this.$7),this.minimize(),this.$1&&(b("DOM").remove(this.$1),b("Arbiter").inform("ConversationNub/destroy",{root:this.$1}),this.$1=null)};e.exports=a}),null);
__d("XConversationNubActionTakenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/conversation/nub_story/action_taken/",{})}),null);
__d("ConversationNubActionTakenReporter",["Arbiter","AsyncRequest","ConversationNubAddCommentSubscription","ConversationNubUtils","PinnedConversationNubsActionTaken","SubscriptionsHandler","XConversationNubActionTakenController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$2=function(a,c){this.$4(c,b("PinnedConversationNubsActionTaken").COMMENT_ADDED)}.bind(this),this.$3=function(event,a){a.tabID;var c=a.ftID;a.tabState;a.sessionID;a=a.reason;(a===b("ConversationNubUtils").CLOSE_REASON_TAB_X_OUT||a===b("ConversationNubUtils").CLOSE_REASON_OVERFLOW_X_OUT||a===b("ConversationNubUtils").CLOSE_REASON_UNPIN)&&this.$4(c,b("PinnedConversationNubsActionTaken").TAB_CLOSED_BY_USER)}.bind(this),this.$1=new(b("SubscriptionsHandler"))(b("ConversationNubAddCommentSubscription").subscribe(this.$2),b("Arbiter").subscribe(b("ConversationNubUtils").CLOSE_TAB_EVENT,this.$3))}a.prototype.destroy=function(){this.$1.release()};a.prototype.$4=function(a,c){var d=b("XConversationNubActionTakenController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(d).setMethod("POST").setData({ft_id:a,action:c}).setAllowCrossPageTransition(!0).send()};e.exports=a}),null);
__d("ConversationNubHeader",["csx","ArbiterMixin","Bootloader","ConversationNubUtils","DOM","Event","EventListener","Keys","SubscriptionsHandler","ifRequired","mixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;function i(a,c){return b("EventListener").listen(a,"keydown",function(a){b("Event").getKeyCode(a)===b("Keys").RETURN&&c(a)})}c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));h=c&&c.prototype;function a(a,c){h.constructor.call(this),this.$ConversationNubHeader6=!1,this.$ConversationNubHeader1=a,this.$ConversationNubHeader3=c,this.$ConversationNubHeader4=null,this.$ConversationNubHeader5=!1,this.$ConversationNubHeader2=new(b("SubscriptionsHandler"))(),this.$ConversationNubHeader7()}a.prototype.$ConversationNubHeader7=function(){var a=this.$ConversationNubHeader1;this.$ConversationNubHeader2.addSubscriptions(b("EventListener").listen(a,"click",this.$ConversationNubHeader8.bind(this)));a=b("ConversationNubUtils").getCloseButtonElem(a);a&&b("ConversationNubUtils").addCloseButtonListeners(a,this.$ConversationNubHeader2,this.$ConversationNubHeader9.bind(this));a=this.$ConversationNubHeader10();a&&this.$ConversationNubHeader2.addSubscriptions(b("EventListener").listen(a,"click",this.$ConversationNubHeader11.bind(this)),i(a,this.$ConversationNubHeader11.bind(this)));a=this.$ConversationNubHeader12();a&&this.$ConversationNubHeader2.addSubscriptions(b("EventListener").listen(a,"click",this.$ConversationNubHeader13.bind(this)),b("EventListener").listen(a,"mouseover",this.$ConversationNubHeader14.bind(this)),b("EventListener").listen(a,"focus",this.$ConversationNubHeader15.bind(this)),i(a,this.$ConversationNubHeader16.bind(this)))};a.prototype.$ConversationNubHeader12=function(){return b("DOM").scry(this.$ConversationNubHeader1,"._1rf1")[0]};a.prototype.$ConversationNubHeader10=function(){return b("DOM").scry(this.$ConversationNubHeader1,"._4a56")[0]};a.prototype.$ConversationNubHeader17=function(){return b("ConversationNubUtils").getCloseButtonElem(this.$ConversationNubHeader1)};a.prototype.$ConversationNubHeader9=function(){this.inform("closeButton")};a.prototype.$ConversationNubHeader11=function(a){a.type==="click"&&a.kill(),this.inform("minimizeButton")};a.prototype.$ConversationNubHeader8=function(){this.inform("clickHeader")};a.prototype.$ConversationNubHeader18=function(){this.inform("showMenu")};a.prototype.$ConversationNubHeader19=function(){this.inform("hideMenu");var a=this.$ConversationNubHeader12();a&&a.blur()};a.prototype.$ConversationNubHeader20=function(){this.inform("menuPermalinkClick")};a.prototype.$ConversationNubHeader21=function(a){__p&&__p();if(this.$ConversationNubHeader4)return;var c=this.$ConversationNubHeader12();if(!c)return;a&&(this.$ConversationNubHeader5=!0);b("Bootloader").loadModules(["React","ReactDOM","ConversationNubHeaderMenu.react"],function(a,b,d){if(this.$ConversationNubHeader6)return;var e=babelHelpers["extends"]({},this.$ConversationNubHeader3(),{onMenuShow:this.$ConversationNubHeader18.bind(this),onMenuHide:this.$ConversationNubHeader19.bind(this),onPermalinkClick:this.$ConversationNubHeader20.bind(this),showOnMount:this.$ConversationNubHeader5});this.$ConversationNubHeader4=b.render(a.createElement(d,e),c)}.bind(this),"ConversationNubHeader")};a.prototype.$ConversationNubHeader13=function(a){a.kill(),this.$ConversationNubHeader21(!0)};a.prototype.$ConversationNubHeader14=function(){this.$ConversationNubHeader21(!1)};a.prototype.$ConversationNubHeader15=function(){this.$ConversationNubHeader21(!1)};a.prototype.$ConversationNubHeader16=function(){this.$ConversationNubHeader4?this.$ConversationNubHeader4.toggle():this.$ConversationNubHeader21(!0)};a.prototype.hideMenu=function(){this.$ConversationNubHeader4&&this.$ConversationNubHeader4.hide()};a.prototype.destroy=function(){this.$ConversationNubHeader6=!0;var a=this.$ConversationNubHeader12();a&&this.$ConversationNubHeader4&&b("ifRequired")("ReactDOM",function(b){b.unmountComponentAtNode(a)});this.$ConversationNubHeader2.release()};e.exports=a}),null);
__d("ConversationNubTabsUpdateEventController",["Arbiter","ConversationNubUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="ConversationNub/tabsUpdated",h="ConversationNub/minimizedByUser",i="ConversationNub/maximizedByUser",j=!1;function k(a){j||b("Arbiter").inform(g,a)}function a(a){return b("Arbiter").subscribe(g,function(b,c){j=!0,a(c),j=!1})}function c(a,c){c&&b("Arbiter").inform(h,{tab:a}),a.minimize(),k()}function d(a,c){if(!c&&!b("ConversationNubUtils").allowProgrammaticPopOut())return;c&&b("Arbiter").inform(i,{tab:a});a.popOut();k()}e.exports={TAB_MINIMIZED_BY_USER_EVENT:h,TAB_MAXIMIZED_BY_USER_EVENT:i,informTabsUpdated:k,subscribeToTabsUpdated:a,minimizeAndInformTabUpdate:c,popOutAndInformTabUpdate:d}}),null);
__d("XConversationNubTogglePinController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/conversation/nub_story/toggle_pin/",{ft_id:{type:"String"},pin:{type:"Bool",defaultValue:!1},with_render:{type:"Bool",defaultValue:!1},notif_setting:{type:"Enum",enumType:1}})}),null);
__d("XConversationsToggleController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/conversation/toggle_feature/",{turn_conversations_on:{type:"Bool",defaultValue:!1}})}),null);
__d("isBusinessURI",["isFacebookURI"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("isFacebookURI")(a)&&a.getSubdomain()==="business"}e.exports=a}),null);
__d("isGamesURI",["isFacebookURI"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("isFacebookURI")(a)&&a.getPath().startsWith("/games")}e.exports=a}),null);
__d("ConversationNubUtils",["csx","Arbiter","AsyncRequest","ConversationNubTabState","DOM","Event","EventListener","Keys","NotificationConversationController","URI","XConversationNubTogglePinController","XConversationsToggleController","isBusinessURI","isCanvasAppURI","isGamesURI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ConversationNubTabState"),i=Object.freeze({DISABLE:"disable",ENABLE:"enable"}),j="ConversationNubUtils/closeTab",k="ConversationNubUtils/unpinnedFromHeader",l="ConversationNubUtils/recheckTabVisibility",m="ConversationNubUtils/openPermalinkFromHeader",n="ConversationNubUtils/turnOff",o="ConversationNubUtils/turnOn",p="tab-x-out",q="browser-tab-sync",r="overflow-x-out",s="unpin";function a(a){var b=Object.values(i);return b.find(function(b){return b===a})||null}function t(a,c,d,e){e=e||{};e=e.notif_setting;a=b("XConversationNubTogglePinController").getURIBuilder().setString("ft_id",String(a)).setBool("pin",c);e&&a.setEnum("notif_setting",e);c=a.getURI();e=new(b("AsyncRequest"))().setURI(c).setMethod("POST");d&&e.setAllowCrossPageTransition(!0);e.send()}function u(a){var c=b("XConversationsToggleController").getURIBuilder().setBool("turn_conversations_on",a).getURI();a?H():G();c=new(b("AsyncRequest"))().setURI(c).setAllowCrossPageTransition(!0).setHandler(function(a){a.getPayload().conversationsStatus?H():G()}).setErrorHandler(function(b){a?G():H()}).setMethod("POST");c.send()}function v(a,b,c){t(a,!0,b,c)}function w(a,b,c){t(a,!1,b,c)}function c(a,b){v(a,!1,b)}function d(a,b){w(a,!1,b)}function f(a,b){v(a,!0,b)}function g(a,b){w(a,!0,b)}function x(){u(!1),b("NotificationConversationController").deleteAllTabs()}function y(){u(!0)}function z(a){return b("DOM").scry(a,"._4iz6")[0]}function A(a,c,d){var e=function(){d()};c.addSubscriptions(b("EventListener").listen(a,"click",e),b("EventListener").listen(a,"keydown",function(a){b("Event").getKeyCode(a)===b("Keys").RETURN&&e()}))}function B(){var a=b("URI").getRequestURI();return!b("isCanvasAppURI")(a)&&!b("isBusinessURI")(a)&&!b("isGamesURI")(a)}function C(a,c,d){var e=h.getLoadedTab(a);if(!e)return;var f=e.getPersistentState(),g=e.getSessionID();e=e.getPageID();b("Arbiter").inform(j,{tabID:a,ftID:c,tabState:f,sessionID:g,reason:d,pageID:e})}function D(a){a=h.getLoadedTab(a);if(!a)return;b("Arbiter").inform(k,{tab:a})}function E(a){b("Arbiter").inform(l,{tab:a})}function F(a){a=h.getLoadedTab(a);if(!a)return;b("Arbiter").inform(m,{tab:a})}function G(){b("Arbiter").inform(n,{})}function H(){b("Arbiter").inform(o,{})}e.exports={CLOSE_TAB_EVENT:j,UNPIN_FROM_HEADER_EVENT:k,OPEN_PERMALINK_FROM_HEADER_EVENT:m,TURN_CONVERSATIONS_OFF_EVENT:n,TURN_CONVERSATIONS_ON_EVENT:o,CLOSE_REASON_TAB_X_OUT:p,CLOSE_REASON_SYNCHRONIZED_FROM_OTHER_TAB:q,CLOSE_REASON_OVERFLOW_X_OUT:r,CLOSE_REASON_UNPIN:s,coerceToPinRequestNotifSetting:a,sendPinRequest:c,sendUnpinRequest:d,sendPinRequestAcrossTransitions:f,sendUnpinRequestAcrossTransitions:g,getCloseButtonElem:z,addCloseButtonListeners:A,informShouldCloseTab:C,informDidUnpinFromHeaderMenu:D,informShouldRecheckTabVisibility:E,informOpenPermalinkFromHeader:F,allowProgrammaticPopOut:B,turnConversationsOff:x,turnConversationsOn:y}}),null);
__d("ConversationNubPermalinkUtils",["URI","isFacebookURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a.substr(-1)==="/"?a.slice(0,-1):a}function h(a,b){a=a.getPath();b=b.getPath();return g(a)===g(b)}function i(a,b,c){a=a.getQueryData();b=b.getQueryData();a=a[c];b=b[c];return a==null&&b==null?!0:a===b}function a(a){var c=new(b("URI"))(window.location.href);return c&&a&&b("isFacebookURI")(c)&&b("isFacebookURI")(a)&&h(c,a)&&i(c,a,"fbid")&&i(c,a,"story_fbid")}e.exports={isOnPermalink:a}}),null);
__d("DockTabsViewportFantaTabUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=269;function a(){return g+1}function b(a){return Math.floor(a/g)}function c(a){if(!a)return null;a=a.fantaTabModelStateGetter;return a?a():null}function d(a){return a?a.size:0}e.exports={getTabCountToFitWidth:b,getMinRequiredWidthForFirstFantaTab:a,getFantaTabModelFromCallbacks:c,getNumFantaTabsFromModel:d}}),null);
__d("DockTabsViewportPinnedConversationTabUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=496+9+2,h=210+9+2,i=52;function j(){return g}function k(){return h}function a(){return i}function b(a){return a.getIsRaised()?j():k()}function c(){return j()+i}function d(a){a=a||{};a=a.pinnedConvoTabStateGetter;return a?a():null}function f(a){return a?a.getTotalTabCount():0}e.exports={getRaisedPinnedConvoTabWidth:j,getLoweredPinnedConvoTabWidth:k,getPinnedConvoSelectorWidth:a,getPinnedConvoTabWidth:b,getMinRequiredWidthForFirstConvoTab:c,getPinnedConvoTabsStateFromCallbacks:d,getNumPinnedConvoTabsFromModel:f}}),null);
__d("DockTabsViewportCalculator",["csx","Arbiter","DataStore","Dock","DockTabsViewportFantaTabUtils","DockTabsViewportPinnedConversationTabUtils","DOM","Event","FullScreen","SubscriptionsHandler","Vector","ViewportBounds","ge","getViewportDimensions","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=50;a=35;var i=a,j="dock-tab-viewport-inst",k=b("DockTabsViewportFantaTabUtils").getMinRequiredWidthForFirstFantaTab,l=b("DockTabsViewportFantaTabUtils").getFantaTabModelFromCallbacks,m=b("DockTabsViewportFantaTabUtils").getNumFantaTabsFromModel,n=b("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab,o=b("DockTabsViewportPinnedConversationTabUtils").getNumPinnedConvoTabsFromModel,p=b("DockTabsViewportPinnedConversationTabUtils").getPinnedConvoTabsStateFromCallbacks;function q(a){return a?b("Vector").getElementDimensions(a).x:0}function r(a){this.$1=a,this.$3=0,this.$4=0,this.$5=null,this.$6=null,this.$7=!1,this.$8=!1,this.$9=!1,this.$2=new(b("SubscriptionsHandler"))(),this.$10(),this.$11()}r.prototype.$10=function(){var a=this.$12.bind(this);this.$2.addSubscriptions(b("Event").listen(window,"resize",a),b("Dock").subscribe("resize",a),b("Arbiter").subscribeOnce("sidebar/initialized",a,b("Arbiter").SUBSCRIBE_NEW),b("FullScreen").subscribe("changed",function(){b("FullScreen").isFullScreen()?(this.$7=!0,this.$8=!1):(this.$7=!1,this.$8&&(b("setImmediate")(function(){a()}),this.$8=!1))}.bind(this)))};r.prototype.registerFantaTabCallbacks=function(a){this.$5=a};r.prototype.registerPinnedConvoTabCallbacks=function(a){this.$6=a};r.prototype.forceRecalculateFBDockWidth=function(){this.$11(),this.$13({forceRecalculateChatTabs:!1,pinnedConvoUpdateData:null})};r.prototype.forceRecalculateChatTabs=function(){this.$13({forceRecalculateChatTabs:!0,pinnedConvoUpdateData:null})};r.prototype.forceRecalculatePinnedConvoTabs=function(a){this.$13({forceRecalculateChatTabs:!0,pinnedConvoUpdateData:a})};r.prototype.$12=function(){if(b("FullScreen").isFullScreen()||this.$7){this.$8=!0;return}this.forceRecalculateFBDockWidth()};r.prototype.$13=function(a){var b=a.forceRecalculateChatTabs;a=a.pinnedConvoUpdateData;var c=this.$14(),d=c.chatTabAvailableWidth;c=c.pinnedConvoTabAvailableWidth;this.$15(d,!!b);this.$16(c,a)};r.prototype.$16=function(a,b){var c=this.$6||{};c=c.onAvailableWidthChanged;c&&c(a,b)};r.prototype.$15=function(a,b){b=this.$5||{};b=b.onAvailableWidthChanged;b&&b(a)};r.prototype.$17=function(){var a=l(this.$5);return m(a)};r.prototype.$18=function(){return k()};r.prototype.$14=function(){__p&&__p();var a=this.$3,b={chatTabAvailableWidth:a,pinnedConvoTabAvailableWidth:0},c={chatTabAvailableWidth:0,pinnedConvoTabAvailableWidth:a},d=this.$17(),e=p(this.$6),f=o(e);if(!e||f===0)return b;else if(d===0)return c;e=this.$18();if(a<=e)return b;f=n();d=a-e;if(d<f)return b;else c=f;d=c;b=Math.max(e,a-c);return{chatTabAvailableWidth:b,pinnedConvoTabAvailableWidth:d}};r.prototype.$11=function(){this.$3=this.$19(),this.$20("DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY")};r.prototype.$21=function(){var a=this.$1;if(!a)return{buddyListNubWidth:0,employeeNubsWidth:0};var c=q(a),d=q(b("DOM").find(a,"._56ox")),e=q(b("DOM").scry(a,"._56oy")[0]);a=q(b("DOM").scry(a,"._ph1")[0]);c=Math.max(c-d-e-a,0);return{buddyListNubWidth:d,employeeNubsWidth:c}};r.prototype.$19=function(){__p&&__p();var a=b("getViewportDimensions").withoutScrollbars().width;a-=b("ViewportBounds").getLeft()+b("ViewportBounds").getRight();a-=h;var c=this.$21(),d=c.buddyListNubWidth;c=c.employeeNubsWidth;a-=d;this.$4=Math.max(this.$4,c);a-=this.$4;a-=i;return Math.max(a,0)};r.prototype.enableTestInforms_FOR_TEST_ONLY=function(){this.$9=!0};r.prototype.$20=function(a){this.$9&&b("Arbiter").inform(a)};r.prototype.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$14().chatTabAvailableWidth};r.prototype.getPinnedConvoTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$14().pinnedConvoTabAvailableWidth};r.prototype.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$3};e.exports={getInstance:function(a){__p&&__p();var c=b("ge")("pagelet_dock");if(!c||!b("DOM").contains(c,a))return null;a=b("DataStore").get(c,j);if(a instanceof r)return a;var d=b("DOM").scry(c,".fbDockWrapperRight .fbDock")[0];a=new r(d);b("DataStore").set(c,j,a);return a}}}),null);
__d("ConversationNubViewportManager",["DockTabsViewportCalculator","DockTabsViewportPinnedConversationTabUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab;function a(a,c,d){this.$1=a,this.$3=c,this.$2=b("DockTabsViewportCalculator").getInstance(this.$1),this.$2&&this.$2.registerPinnedConvoTabCallbacks(babelHelpers["extends"]({},d,{pinnedConvoTabStateGetter:function(){return this.$3}.bind(this)}))}a.prototype.getNumDockTabsToShow=function(a){return this.getCouldFitAtLeastOneDockTab(a)?1:0};a.prototype.getCouldFitAtLeastOneDockTab=function(a){var b=g();return b<=a};a.prototype.forceRecalculatePinnedConvoTabs=function(a){this.$2&&this.$2.forceRecalculatePinnedConvoTabs(a)};e.exports=a}),null);
__d("ConversationNubVisibilityDedupeUtils",["Bootloader","emptyFunction","ifRequired"],(function(a,b,c,d,e,f){"use strict";function a(a){b("Bootloader").loadModules(["UFICommentVisibilityStore"],a,"ConversationNubVisibilityDedupeUtils")}function c(a){return b("ifRequired")("UFICommentVisibilityStore",function(b){return b.isFeedbackTargetVisible(a)},b("emptyFunction").thatReturnsFalse)}e.exports={bootloadUFIVisibilityModule:a,isFeedbackTargetVisible:c}}),null);
__d("XNotificationNubStoryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/conversation/nub_story/",{notif_alert_id:{type:"String"},notif_id:{type:"Int"},ft_id:{type:"String"},force_minimized:{type:"Bool",defaultValue:!1}})}),null);
__d("NotificationConversationController",["csx","cx","Arbiter","AsyncRequest","Bootloader","ConversationNub","ConversationNubActionTakenReporter","ConversationNubPermalinkUtils","ConversationNubTabState","ConversationNubTabsUpdateEventController","ConversationNubUtils","ConversationNubViewportManager","ConversationNubVisibilityDedupeUtils","CSS","DOM","PinnedConversationNubsConfig","SubscriptionsHandler","URI","XNotificationNubStoryController","ge","ifRequired","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ConversationNubVisibilityDedupeUtils").isFeedbackTargetVisible,j=1,k=b("ConversationNubTabState"),l=Object.create(null),m=null,n=null,o=null,p=null,q=null,r=null,s=!1,t=null,u=null,v=null,w=null,x=Object.create(null);function y(){n||(n=b("DOM").scry(b("ge")("pagelet_dock"),"._1mw-")[0]);return n}function z(){if(!o){var a=y();a&&(o=b("DOM").scry(a,"._1tvj")[0])}return o}function A(){if(!p){var a=y();a&&(p=b("DOM").scry(a,"._2ikx .fbNubButton")[0])}return p}a.prototype.init=function(){__p&&__p();if(s)return;s=!0;var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("ConversationNubTabsUpdateEventController").subscribeToTabsUpdated(this.$2.bind(this)),b("Arbiter").subscribe(b("ConversationNubUtils").CLOSE_TAB_EVENT,function(a,b){a=b||{};b=a.tabID;b&&this.$3(b)}.bind(this)));this.$1=new(b("ConversationNubActionTakenReporter"))();t=a};a.prototype.$4=function(a){a=m?m.getNumDockTabsToShow(a):j;k.setMaxDockTabs(a)};a.prototype.$5=function(a,c){this.$4(a);if(c){var d=c.tabToPromote;c=c.tabToOpenIfInDock;d&&!k.isTabInDock(d.getTabID())&&k.moveTabToDockLeft(d.getTabID());b("ConversationNubUtils").allowProgrammaticPopOut()&&c&&k.isTabInDock(c.getTabID())&&c.popOut()}this.$6(a)};a.prototype.$2=function(a){m&&m.forceRecalculatePinnedConvoTabs(a)};a.prototype.$6=function(a){__p&&__p();var c=k.getTotalTabCount(),d=k.getNumDockTabs();a=m?m.getCouldFitAtLeastOneDockTab(a):!1;a=c>0&&a;d=d<c&&a;c=y();c&&(b("CSS").conditionClass(c,"_1tvf",a),b("CSS").conditionClass(c,"_1dex",d),b("CSS").conditionClass(c,"_1tvi",d));a=b("PinnedConversationNubsConfig").pinnedToLeft?k.getTabsForDockOldestFirst():k.getTabsForDockNewestFirst();a.forEach(function(a){a.getIsRaised()&&a.clearBadge()});c=k.getTabsForMenuNewestFirst();this.$7(a);this.$8(c)};a.prototype.handleNotificationsRead=function(a){this.init();k.getUnsortedLoadedTabs().forEach(function(b){var c=b.getNotificationPayloadAlertID();c&&a[c]&&b.clearBadge()});k.getUnloadedTabs().forEach(function(b){b.notifAlertID&&a[b.notifAlertID]&&k.clearTabNotifications(b.tabID)});var b=k.getTabsForMenuNewestFirst();this.$8(b)};a.prototype.handleNewNotificationFromGraphQL=function(a,c){this.init();a=b("nullthrows")(a);var d=a.tab_id,e=a.notification,f=a.feedback_target_id;a=a.permalink_uri;e=b("nullthrows")(e);var g=e.notif_id,h=e.alert_id;e=e.notif_type;this.$9(b("nullthrows")(d),b("nullthrows")(g),b("nullthrows")(f),b("nullthrows")(h),a?new(b("URI"))(a):null,c,e)};a.prototype.$9=function(a,c,d,e,f,g,h){e=b("XNotificationNubStoryController").getURIBuilder().setString("notif_alert_id",e).setInt("notif_id",c);this.$10(d,g);this.$11(a,d,h,f,e)};a.prototype.$10=function(a,b){x[a]||(x[a]=b)};a.prototype.$11=function(a,c,d,e,f){__p&&__p();if(l[a])return;var g=k.getLoadedTab(a);if(g){d&&g.setNotificationType(d);return}(b("ConversationNubPermalinkUtils").isOnPermalink(e)||i(c))&&f.setBool("force_minimized",!0);l[a]=!0;new(b("AsyncRequest"))().setURI(f.getURI()).setAllowCrossPageTransition(!0).setFinallyHandler(function(){delete l[a]}).send()};a.prototype.$12=function(a){__p&&__p();var c=!0;k.getUnsortedLoadedTabs().forEach(function(b){var d=b.getFeedbackTargetID(),e=a[d];e=e?Object.keys(e):[];if(e.length){var f=b.getBadgeCount();i(d)?(b.markCommentsAsSeenWithoutBadging(e),b.clearBadge()):b.attemptAddNewCommentsToBadge(e);d=b.getBadgeCount();f!==d&&(c=!0)}});c&&b("ConversationNubTabsUpdateEventController").informTabsUpdated()};a.prototype.$13=function(a){if(w)return;b("Bootloader").loadModules(["ConversationNubSurveys"],function(b){w||(w=new b(a))},"NotificationConversationController")};a.prototype.$14=function(a,c,d){if(v){v.addTab(a,d);delete x[a.getPersistentState().ftID];return}b("Bootloader").loadModules(["ConversationNubLogger"],function(b){v||(v=new b(c)),v.addTab(a,d),delete x[a.getPersistentState().ftID]},"NotificationConversationController")};a.prototype.$15=function(){if(u)return;b("Bootloader").loadModules(["ConversationNubUFICentralUpdateManager"],function(a){if(u)return;u=new a(this.$12.bind(this))}.bind(this),"NotificationConversationController")};a.prototype.$7=function(a){var c=z();if(!c)return;b("Bootloader").loadModules(["React","ReactDOM","ConversationNubDockedTabGroup.react"],function(b,d,e){r=d.render(b.createElement(e,{dockTabs:a}),c)},"NotificationConversationController")};a.prototype.$16=function(a){a.popOut(),b("ConversationNubTabsUpdateEventController").informTabsUpdated({tabToPromote:a})};a.prototype.$8=function(a){var c=A();if(!c)return;b("Bootloader").loadModules(["React","ReactDOM","ConversationNubCollapsedSelectorMenu.react"],function(b,d,e){q=d.render(b.createElement(e,{menuTabs:a,onTabSelected:this.$16}),c)}.bind(this),"NotificationConversationController")};a.prototype.$17=function(){if(!m){var a=y();if(a){var c={onAvailableWidthChanged:this.$5.bind(this)};m=new(b("ConversationNubViewportManager"))(a,k,c)}}};a.prototype.storyFromServer=function(a,c){__p&&__p();s||this.init();var d=c.attempt_open_on_init,e=c.ft_id,f=c.init_without_badge,g=c.notif_alert_id,h=c.notification_type,j=c.permalink_uri,l=c.promote_on_init,m=c.tab_add_source,n=c.tab_id,o=c.title,p=c.should_show_intro_nux,q=c.should_show_hide_nux;c=c.page_id;var r=k.getLoadedTab(n);if(r){(l||d)&&b("ConversationNubTabsUpdateEventController").informTabsUpdated({tabToPromote:l?r:null,tabToOpenIfInDock:d?r:null});return}f=f||i(e);r=k.getTabStateIfExists(n);if(r)f=null;else{r=b("ConversationNub").createDefaultState(n,j,e,g,h,o);k.addTabState(r)}j=new(b("ConversationNub"))(a,n,f,c,Boolean(p),Boolean(q));k.addLoadedTab(n,j);d=d||j.getPersistentState().isTabRaised;this.$15();this.$17();b("ConversationNubTabsUpdateEventController").informTabsUpdated({tabToPromote:l?j:null,tabToOpenIfInDock:d?j:null});this.$13(k);g=x[e]||m||"unknown";this.$14(j,k,g)};a.prototype.deleteAllTabs=function(){k.deleteAllTabs(),b("ConversationNubTabsUpdateEventController").informTabsUpdated()};a.prototype.$3=function(a){a=k.deleteTab(a);a&&b("ConversationNubTabsUpdateEventController").informTabsUpdated()};a.prototype.unsubscribe=function(){t&&t.release(),t=null,v&&v.destroy(),v=null,w&&w.destroy(),w=null,u&&u.destroy(),u=null,this.$1.destroy(),b("ifRequired")("ReactDOM",function(a){var b=A();q&&b&&a.unmountComponentAtNode(b);b=z();r&&b&&a.unmountComponentAtNode(b)})};function a(){}e.exports=new a()}),null);
__d("PinnedConversationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PinnedConversationLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PinnedConversationLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PinnedConversationLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAttemptOpenOnInit=function(a){this.$1.attempt_open_on_init=a;return this};a.prototype.setBadgeCount=function(a){this.$1.badge_count=a;return this};a.prototype.setClientEventTimeMs=function(a){this.$1.client_event_time_ms=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setFtID=function(a){this.$1.ft_id=a;return this};a.prototype.setIsRaised=function(a){this.$1.is_raised=a;return this};a.prototype.setNotificationType=function(a){this.$1.notification_type=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setPromoteOnInit=function(a){this.$1.promote_on_init=a;return this};a.prototype.setReason=function(a){this.$1.reason=a;return this};a.prototype.setTabID=function(a){this.$1.tab_id=a;return this};a.prototype.setTabSessionID=function(a){this.$1.tab_session_id=a;return this};a.prototype.setTabsInDock=function(a){this.$1.tabs_in_dock=a;return this};a.prototype.setTabsInMenu=function(a){this.$1.tabs_in_menu=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWindowInnerHeight=function(a){this.$1.window_inner_height=a;return this};a.prototype.setWindowInnerWidth=function(a){this.$1.window_inner_width=a;return this};c={attempt_open_on_init:!0,badge_count:!0,client_event_time_ms:!0,event:!0,ft_id:!0,is_raised:!0,notification_type:!0,page_id:!0,promote_on_init:!0,reason:!0,tab_id:!0,tab_session_id:!0,tabs_in_dock:!0,tabs_in_menu:!0,vc:!0,window_inner_height:!0,window_inner_width:!0};e.exports=a}),null);
__d("ConversationNubLogger",["Arbiter","ConversationNubAddCommentSubscription","ConversationNubTabsUpdateEventController","ConversationNubUtils","PinnedConversationTypedLogger","SubscriptionsHandler","UFIUIEvents"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=new(b("SubscriptionsHandler"))(),this.$2=a,this.$3(),this.$4()}a.prototype.$4=function(){__p&&__p();this.$1.addSubscriptions(b("ConversationNubAddCommentSubscription").subscribe(function(a){var c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_add_comment");this.$5(c,a)}.bind(this))),this.$1.addSubscriptions(b("Arbiter").subscribe(b("UFIUIEvents").ReactionButtonClicked,function(a,c){a=c.ft_id;if(!a)return;c=this.$2.getLoadedTabByFeedbackTarget(a);if(!c)return;a=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_react_post");this.$5(a,c)}.bind(this)))};a.prototype.$3=function(){__p&&__p();this.$1.addSubscriptions(b("Arbiter").subscribe(b("ConversationNubUtils").CLOSE_TAB_EVENT,function(a,c){a=c.tabState;var d=c.sessionID;c=c.reason;c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_close").setReason(c);this.$6(c,a,d)}.bind(this))),this.$1.addSubscriptions(b("Arbiter").subscribe(b("ConversationNubUtils").UNPIN_FROM_HEADER_EVENT,function(a,c){a=c.tab;c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_hide");this.$5(c,a)}.bind(this))),this.$1.addSubscriptions(b("Arbiter").subscribe(b("ConversationNubTabsUpdateEventController").TAB_MAXIMIZED_BY_USER_EVENT,function(a,c){a=c.tab;c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_maximize");this.$5(c,a)}.bind(this))),this.$1.addSubscriptions(b("Arbiter").subscribe(b("ConversationNubTabsUpdateEventController").TAB_MINIMIZED_BY_USER_EVENT,function(a,c){a=c.tab;c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_minimize");this.$5(c,a)}.bind(this))),this.$1.addSubscriptions(b("Arbiter").subscribe(b("ConversationNubUtils").OPEN_PERMALINK_FROM_HEADER_EVENT,function(a,c){a=c.tab;c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_open_permalink_from_header");this.$5(c,a)}.bind(this)))};a.prototype.$5=function(a,b){a.setTabID(b.getTabID()).setPageID(b.getPageID()).setClientEventTimeMs(Date.now()).setTabsInMenu(this.$2.getNumMenuTabs()).setTabsInDock(this.$2.getNumDockTabs()).setWindowInnerWidth(window.innerWidth).setWindowInnerHeight(window.innerHeight);a.setFtID(b.getFeedbackTargetID()).setIsRaised(b.getIsRaised()).setBadgeCount(b.getBadgeCount()).setTabSessionID(b.getSessionID());b=b.getNotificationType();b&&a.setNotificationType(b);a.log()};a.prototype.$6=function(a,b,c){a.setTabID(b.tabID).setClientEventTimeMs(Date.now()).setTabsInMenu(this.$2.getNumMenuTabs()).setTabsInDock(this.$2.getNumDockTabs()).setWindowInnerWidth(window.innerWidth).setWindowInnerHeight(window.innerHeight),a.setFtID(b.ftID).setIsRaised(b.isTabRaised).setBadgeCount(b.badgeCount).setTabSessionID(c),b.notificationType&&a.setNotificationType(b.notificationType),a.log()};a.subscriptionTriggered=function(a){new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_subscription_triggered").setReason(a).log()};a.prototype.addTab=function(a,c){c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_add").setReason(c);this.$5(c,a)};a.prototype.destroy=function(){this.$1.release()};e.exports=a}),null);
__d("ConversationNotificationListeners",["Bootloader","ConversationNubAddTabSource","ConversationNubLogger","FacebookWebNotificationsSubscription","NotificationConstants","NotificationUpdates","once"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("NotificationConstants").PayloadSourceType.LIVE_SEND;function h(){b("NotificationUpdates").subscribe("update-notifications",function(a,c){c.payloadsource===g&&c.readState&&Object.keys(c.readState).length&&b("Bootloader").loadModules(["NotificationConversationController"],function(a){a.handleNotificationsRead(c.readState)},"ConversationNotificationListeners")})}var i=b("once")(function(){h(),b("FacebookWebNotificationsSubscription").subscribe({event:"NEW_PINNED_CONVERSATION",callback:function(a){b("ConversationNubLogger").subscriptionTriggered("graphql"),b("Bootloader").loadModules(["NotificationConversationController"],function(c){c.handleNewNotificationFromGraphQL(a,b("ConversationNubAddTabSource").NOTIFICATION)},"ConversationNotificationListeners")}})});e.exports={initialize:function(){i()}}}),null);
__d("FBPaymentsDialogContainerMount",["FBPaymentsDialogContainer.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={mount:function(a){b("ReactDOM").render(b("React").createElement(b("FBPaymentsDialogContainer.react"),null),a)}};e.exports=a}),null);
__d("XGamesHideableXOutAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/games/async/xout/hide/",{unit_type:{type:"String"},fbs:{type:"Int"},app_id:{type:"Int"},extra_data:{type:"String"}})}),null);
__d("GamesUninstallXOut.react",["cx","AsyncRequest","CSS","Dialog","DOMContainer.react","GamesXOut.react","React","ReactDOM","URI","XGamesHideableXOutAsyncController"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={pending:!1},this.$1=function(){var a=b("XGamesHideableXOutAsyncController").getURIBuilder().setInt("app_id",this.props.appID).setString("extra_data",this.props.extraData).setString("unit_type",this.props.unitType).setInt("fbs",this.props.fbs).getURI();this.$2=new(b("AsyncRequest"))(a).setMethod("POST");this.$2.send()}.bind(this),this.$3=function(){var a=new(b("URI"))("/ajax/settings/apps/delete_app.php").setQueryData({app_id:this.props.appID,legacy:!1,dialog:!0,xout:!0});new(b("Dialog"))().setAsync(new(b("AsyncRequest"))(a).setRelativeTo(b("ReactDOM").findDOMNode(this))).setCausalElement(b("ReactDOM").findDOMNode(this)).show()}.bind(this),c}a.appUninstalled=function(a){"use strict";b("CSS").addClass(a,"_4ksu")};a.prototype.render=function(){"use strict";return b("React").createElement(b("GamesXOut.react"),{onClick:this.$3},b("React").createElement(b("DOMContainer.react"),null,this.props.domChild))};a.propTypes={unitType:c.string.isRequired,appID:c.string.isRequired,domChild:c.any.isRequired,extraData:c.string.isRequired,fbs:c.number.isRequired};e.exports=a}),null);
__d("ChatActivity",["Arbiter","Event","JSLogger","MercuryConfig","PresenceState","UserActivity"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MercuryConfig").activity_limit||6e4,h=b("MercuryConfig").idle_limit||18e5,i=b("MercuryConfig").idle_poll_interval||3e5,j=b("JSLogger").create("chat_activity"),k=Date.now(),l=!0;function a(){var a=Date.now();return!!(l&&a-k<g)}var m=Object.assign(new(b("Arbiter"))(),{isActive:a});function n(){var a=k;k=Date.now();k-a>h&&(j.debug("idle_to_active",a),b("PresenceState").doSync());m.inform("activity")}b("Event").listen(window,"focus",function(){l=!0,n()});b("Event").listen(window,"blur",function(){l=!1});b("UserActivity").subscribe(function(){n()});function o(a){a=a&&a.at&&b("PresenceState").verifyNumber(a.at);typeof a!=="number"&&(a=null);return a||0}setInterval(function(){var a=Date.now(),c=o(b("PresenceState").get()),d=Math.max(k,c);a-d>h&&(j.debug("idle",{cookie:c,local:k}),m.inform("idle",a-d))},i);b("PresenceState").registerStateStorer(function(a){var b=o(a);b<k&&(a.at=k);return a});b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.chat_activity={activity_limit:g,idle_limit:h,idle_poll_interval:i,last_active_time:k}});e.exports=m}),null);
__d("MercuryNotificationRenderer",["fbt","MercuryAssert","MercuryIDs","MercuryMessages","MercuryParticipants","MercuryThreads","MercuryViewer","MessagingGenericAdminTextType"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("MercuryMessages").get(),i=b("MercuryThreads").get(),j="source:messenger_growth:event_upcoming_bump";function a(a,c){__p&&__p();b("MercuryAssert").isThreadID(a),i.getThreadMeta(a,function(d){__p&&__p();h.getThreadMessagesRange(a,0,1,function(e){__p&&__p();e=e.length&&e[e.length-1];var f=[];e.tags!==undefined&&(f=f.concat(e.tags));e.log_message_data&&(e.log_message_data.message_type==b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST||e.log_message_data.message_type==b("MessagingGenericAdminTextType").WORK_INVITE_CLAIMED)?c(g._("New contact added")):f.indexOf(j)!==-1?c(g._("You have an upcoming event.")):e&&e.author!=b("MercuryViewer").getID()?b("MercuryParticipants").get(e.author,function(e){var f=e.short_name,h=d.custom_nickname;if(h){e=b("MercuryIDs").getUserIDFromParticipantID(e.id);h[e]&&(f=h[e])}d.name?c(g._("{senderName} messaged {groupName}",[g._param("senderName",f),g._param("groupName",d.name)])):b("MercuryIDs").isGroupChat(a)?c(g._("{name} messaged your group",[g._param("name",f)])):c(g._("{name} messaged you",[g._param("name",f)]))}):c(g._("New message!"))})})}e.exports={renderDocumentTitle:a}}),null);
__d("MercuryTimestampTracker",["MercuryActionType","MercuryDispatcher","MercuryPayloadSource","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};function a(a){this.$1=a,this.$3=0,this.$2=b("MercuryDispatcher").getForFBID(this.$1),this.$2.subscribe("update-messages",this.$4.bind(this))}a.prototype.$4=function(a,c){if(!c.actions||!c.actions.length)return;if(c.payload_source===b("MercuryPayloadSource").CLIENT_SEND_MESSAGE||c.payload_source===b("MercuryPayloadSource").UNKNOWN)return;for(var a=0;a<c.actions.length;a++){var d=c.actions[a],e=d.action_type;e==b("MercuryActionType").USER_GENERATED_MESSAGE&&d.thread_id&&d.timestamp>this.$3&&(this.$3=d.timestamp)}};a.prototype.getLastUserMessageTimestamp=function(){return this.$3};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("ChatTitleBarBlinker",["ChatActivity","DocumentTitle","JSLogger","MercuryThreadInformer","MercuryNotificationRenderer","PresenceState","MercuryTimestampTracker"],(function(a,b,c,d,e,f){"use strict";__p&&__p();d=b("MercuryThreadInformer").get();var g=b("MercuryTimestampTracker").get(),h=b("JSLogger").create("chat_title"),i=null,j=0,k=!1;function l(){if(i){i.stop();i=null;return!0}return!1}function m(a){a=a||g.getLastUserMessageTimestamp();j<=a&&(j=a,(l()||k)&&b("PresenceState").doSync())}f={blink:function(a,c){!i&&j<c&&b("MercuryNotificationRenderer").renderDocumentTitle(a,function(a){i||(i=b("DocumentTitle").blink(a))})},stopBlinking:function(){m()},blinkingElsewhere:function(){k=!0}};function n(a){a=b("PresenceState").verifyNumber(a.sb2);return!a||a<=j?null:a}function a(a){a=a&&n(a);a&&(j=a,h.debug("load",j),l(),k=!1)}function c(a){var b=n(a);b||(h.debug("store",j),a.sb2=j,k=!1);return a}b("PresenceState").registerStateStorer(c);b("PresenceState").registerStateLoader(a);d.subscribe("thread-read-changed",function(a,b){a=g.getLastUserMessageTimestamp();var c=0;for(var d in b)b[d].mark_as_read&&b[d].timestamp>=a&&b[d].timestamp>c&&(c=b[d].timestamp);c&&m(c)});b("ChatActivity").subscribe("activity",function(){return m()});c=b("PresenceState").getInitial();c&&(j=n(c)||0);e.exports=f}),null);
__d("MercuryIgnoredBlockedParticipants.bs",["bs_caml_obj","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){d=d.participants.filter(function(c){return c!==b("MercuryIDs").getParticipantIDFromUserID(a)});return d.filter(function(a){return c.has(a)!==!1})}function a(a,b,c){if(c.is_canonical)return!1;else return g(a,b,c).length>0}function c(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function d(a,c,d){var e=d.is_canonical;if(e){e=d.participants.filter(function(c){return b("bs_caml_obj").caml_notequal(c,b("MercuryIDs").getParticipantIDFromUserID(a))});return!e.every(function(a){return!c.has(a)})}else return!1}f.findIntersection=g;f.isPresentInGroupThread=a;f.participantsInGroupThread=c;f.qualifiesAs=d}),null);
__d("MercuryBrowserAlerts",["ArbiterMixin","Bootloader","ChatActivity","ChatConfig","ChatOptions","ChatTitleBarBlinker","CurrentUser","Event","MercuryIgnoredBlockedParticipants.bs","MercuryIDs","MercuryThreadInfo","MercuryThreads","MercuryViewer","MessagingTag","MessengerState.bs","Sound","UserActivity","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreads").get(),h=3,i=6e5,j=new Map(),k=null;function l(){return!b("UserActivity").isOnTab()&&!b("UserActivity").hasBeenInactive()}function m(){j=new Map()}function n(a){b("ChatOptions").getSetting("sound")&&!l()&&b("Sound").play([b("ChatConfig").get("sound.notif_ogg_url"),b("ChatConfig").get("sound.notif_mp3_url")],a,!1)}var o=Object.assign({init:function(){b("Event").listen(window,"focus",function(){m(),clearInterval(k)}),b("Event").listen(window,"blur",function(){k=setInterval(m,i)}),b("gkx")("AT505jRFtG_7w3nhZICN2g5HZo5KZ4FP0G7n7x_oCDMvQmeZOfjSNcbXcUzDHS_pr0yjnx5p-38r7Z_8WJZNypI6")&&b("CurrentUser").isWorkUser()&&(this._availabilityStatusStore=null,b("Bootloader").loadModules(["WorkChatAvailabilityStatusStore"],function(a){this._availabilityStatusStore=a}.bind(this),"MercuryBrowserAlerts"))},messageReceived:function(a){__p&&__p();var c=this._availabilityStatusStore&&this._availabilityStatusStore.getIsDoNotDisturb(b("MercuryIDs").getUserIDFromParticipantID(b("MercuryViewer").getID()));if(c||a.author&&b("MercuryViewer").isViewer(a.author)||!a.is_unread||a.folder!=b("MessagingTag").INBOX&&a.folder!=b("MessagingTag").ARCHIVED)return;var d=a.thread_id,e=b("ChatActivity").isActive();if(e){var f=!1;o.inform("before-alert",{threadID:d,cancelAlert:function(){f=!0}})}g.getThreadMeta(d,function(c){__p&&__p();var g=b("MercuryThreadInfo").isMuted(c),i=b("MercuryIDs").getUserIDFromParticipantID(b("MercuryViewer").getID());if(g)if(!b("MercuryThreadInfo").areMentionsMuted(c)){if(!a.profile_ranges||!a.profile_ranges.some||!a.profile_ranges.some(function(a){return a.id===i}))return}else return;var k=b("CurrentUser").getID();b("MessengerState.bs").compute(k,function(g){__p&&__p();g=g.blocked_ids;if(b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(k,g,c))return;g=a.timestamp;if(e)f||n(g);else{b("ChatTitleBarBlinker").blink(d,g);var i=j.get(d)||0;i<h&&(j.set(d,i+1),n(g))}b("ChatTitleBarBlinker").blinkingElsewhere()})})}},b("ArbiterMixin"));e.exports=o}),null);
__d("ChatAppActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({INITIAL_DISPLAY_DONE:null,HIDE:null,LOAD:null,TTI:null,UNHIDE:null})}),null);
__d("ChatAppActions",["ChatDispatcher","ChatAppActionTypes"],(function(a,b,c,d,e,f){"use strict";a={tti:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").TTI})},hide:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").HIDE})},unhide:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").UNHIDE})},setInitialDisplayDone:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").INITIAL_DISPLAY_DONE})},load:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").LOAD})}};e.exports=a}),null);
__d("ChatAppStore",["ChatAppActionTypes","ChatDispatcher","FluxStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("ChatDispatcher")),this.$ChatAppStore2={initialDisplayDone:!1,isHidden:!1,isInitialized:!1,isLoaded:!1},this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2)}a.prototype.__onDispatch=function(a){__p&&__p();a=a.type;this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2);switch(a){case b("ChatAppActionTypes").INITIAL_DISPLAY_DONE:this.$ChatAppStore2.initialDisplayDone=!0;this.__emitChange();break;case b("ChatAppActionTypes").HIDE:this.$ChatAppStore2.isHidden=!0;this.__emitChange();break;case b("ChatAppActionTypes").UNHIDE:this.$ChatAppStore2.isHidden=!1;this.__emitChange();break;case b("ChatAppActionTypes").TTI:this.$ChatAppStore2.isInitialized=this.$ChatAppStore2.isLoaded=!0;this.__emitChange();break;case b("ChatAppActionTypes").LOAD:this.$ChatAppStore2.isLoaded=!0;this.__emitChange();break}};a.prototype.getPreviousState=function(){return this.$ChatAppStore1};a.prototype.getState=function(){return this.$ChatAppStore2};a.__moduleID=e.id;e.exports=new a()}),null);
__d("ChatPrivacyActionController",["ChatVisibility","JSLogger","PresencePrivacy"],(function(a,b,c,d,e,f){__p&&__p();a=function a(c,d){__p&&__p();this._userID=c;this._logger=b("JSLogger").create("blackbird");this._getState=function(){return b("ChatVisibility").isOnline()?b("PresencePrivacy").allows(this._userID)?a.NORMAL:a.BLOCKED:a.OFFLINE};this._togglePrivacy=function(){__p&&__p();this._getState();switch(this._getState()){case a.OFFLINE:if(b("ChatVisibility").isOnline()){this._logger.error("tabs_already_online");break}this._logger.log("tabs_go_online",{tab_id:this._userID});b("ChatVisibility").goOnline(function(){b("PresencePrivacy").allows(this._userID)||(this._getState()!==a.BLOCKED&&this._logger.error("privacy_action_controller_blocked_inconsistency"),this._togglePrivacy())}.bind(this));break;case a.BLOCKED:b("PresencePrivacy").allow(this._userID);this._logger.log("tabs_unblock",{tab_id:this._userID});break;case a.NORMAL:b("PresencePrivacy").disallow(this._userID);this._logger.log("tabs_block",{tab_id:this._userID});break}};c=function(){d&&d(this._getState())}.bind(this);c();this._subscribeToken=b("PresencePrivacy").subscribe("privacy-changed",c)};a.OFFLINE="offline";a.BLOCKED="blocked";a.NORMAL="normal";Object.assign(a.prototype,{togglePrivacy:function(){this._logger.log("gear_menu_toggle_privacy",{tab_id:this._userID}),this._togglePrivacy()},destroy:function(){this._subscribeToken&&b("PresencePrivacy").unsubscribe(this._subscribeToken)}});e.exports=a}),null);
__d("ChatTimezoneWarning",["MercuryParticipants","MercuryViewer","MessengerBotIDs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1;a={updateUserTimezoneWarning:function(a,c,d){__p&&__p();b("MercuryParticipants").get(b("MercuryViewer").getID(),function(e){__p&&__p();var f=e.employee,h=e.timezone,i=0;if(a.timezone_warning_dismiss_count!==undefined){var j=a.timezone_warning_dismiss_count;for(var j=Object.entries(j),k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{l=j.next();if(l.done)break;m=l.value}m=m;var n=m[0];m=m[1];n===e.fbid&&(i=Number(m))}}else return;f&&h&&i<g&&b("MercuryParticipants").getMulti(a.participants,function(a){__p&&__p();var f={},g=!0;for(var i in a){g=g&&a[i].employee;var j=!!b("MessengerBotIDs")[a[i].fbid];if(a[i].timezone!==undefined&&a[i].timezone!==null&&h!==a[i].timezone&&!j){j=a[i].fbid;f[j]=a[i]}}Object.keys(f).length>0&&g?(f.self=e,c(f)):d()})})}};e.exports=a}),null);
__d("FantaAvailableStatus",["AvailableListConstants","ChatVisibility","MercuryIDs","PresenceStatus","ShortProfiles"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={isAvailable:function(a,c){var d=void 0;a=this.getStatus(a,c);c=b("MercuryIDs").getUserIDFromThreadID(c);c&&(d=b("ShortProfiles").getNow(c));return a===b("AvailableListConstants").ACTIVE&&(d===undefined||d===null||!d.is_messenger_only)},getStatus:function(a,c){__p&&__p();var d=b("AvailableListConstants").OFFLINE;c=b("MercuryIDs").getUserIDFromThreadID(c);if(c)d=b("PresenceStatus").get(c);else if(a&&a.participants){c=a.participants.map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)});d=b("PresenceStatus").getGroup(c)}b("ChatVisibility").isOnline()||(d=b("AvailableListConstants").OFFLINE);return d}}}),null);
__d("ChatVideoCallButton.react",["cx","fbt","invariant","Bootloader","FantaAvailableStatus","FBIDCheck","FBRTCCallabilityStore","FBRTCCore","RTWebUserActionLogger","RTWebLoggingPage","RTWebLoggingSurface","immutable","ImmutableObject","Keys","LayerFadeOnHide","Link.react","MercuryIDs","MercuryParticipants","MercuryThreadIDMap","MessengerRTCFunnelLogger","ReactComponentWithPureRenderMixin","React","RTCCallState","TrackingNodes","FBRTCLogger","VideoCallTypedLogger","XUIAmbientNUX.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MercuryThreadIDMap").get(),k=b("FBRTCLogger").Trigger;a=b("React").PropTypes;var l={isCallable:!1,user:null};c=b("React").createClass({displayName:"ChatVideoCallButton",mixins:[b("ReactComponentWithPureRenderMixin")],_subscription:null,_rtcStoreSubscription:null,propTypes:{isAudio:a.bool,isGroupChat:a.bool,onRTCNuxCloseButtonClick:a.func.isRequired,rtcNuxShown:a.bool.isRequired,threadID:a.string,thread:a.object,viewer:a.string.isRequired,shown:a.bool,rtcCallData:a.object.isRequired},getDefaultProps:function(){return{shown:!0,rtcCallData:{call_state:"NO_ONGOING_CALL"}}},getInitialState:function(){return babelHelpers["extends"]({},l)},componentDidMount:function(){var a=this.props,c=a.isAudio;a=a.isGroupChat;a=b("RTWebUserActionLogger").getCallType(a);c=b("RTWebUserActionLogger").getAudioVideoComponent(c);b("RTWebUserActionLogger").logImpression({callType:a,page:b("RTWebLoggingPage").FACEBOOK,surface:b("RTWebLoggingSurface").CHAT_TAB,component:c});this.setState({isCallable:this._getIsCallable(),user:this._computeParticipant()});this._rtcStoreSubscription=b("FBRTCCallabilityStore").addListener(function(a){this.setState({isCallable:this._getIsCallable(),user:this._computeParticipant()})}.bind(this))},componentDidUpdate:function(){if(!this._subscription){var a=this._getParticipantID();this.state.user&&this.state.user.id!==a&&this.setState({user:this._computeParticipant()})}a=this._getIsCallable();a!==this.state.isCallable&&this.setState({isCallable:a})},componentWillUnmount:function(){this._subscription&&this._subscription.remove(),this._rtcStoreSubscription&&this._rtcStoreSubscription.remove()},_getParticipantID:function(){var a=b("MercuryIDs").getUserIDFromThreadID(this.props.threadID);if(a===this.props.viewer||!b("FBIDCheck").isUser_deprecated(a))return null;a&&b("FBIDCheck").isUser_deprecated(a)||i(0);return b("MercuryIDs").getParticipantIDFromUserID(a)},_computeParticipant:function(){var a=this._getParticipantID(),c=null;if(a){var d=b("MercuryParticipants").getNow(a);this._subscription&&this._subscription.remove();d?(this._subscription=null,c=d):this._subscription=b("MercuryParticipants").getMulti([a],function(b){this._subscription=null,this.setState({user:b[a]})}.bind(this))}return c},_getIsCallable:function(){if(!this.props.threadID)return!1;if(this.props.isGroupChat)return!0;var a=b("MercuryIDs").getUserIDFromThreadID(this.props.threadID);if(a===this.props.viewer||!b("FBIDCheck").isUser_deprecated(a))return!1;a&&b("FBIDCheck").isUser_deprecated(a)||i(0);return!b("FBRTCCallabilityStore").isBlocked(a,this.props.thread)&&b("FBRTCCallabilityStore").isCallable(a,this.props.thread)},getTooltipLabel:function(){if(this.props.isGroupChat)return this.props.isAudio?h._("Start a group call"):h._("Start a group video chat");var a=this.state.user;return!a||!a.fbid?undefined:this.props.isAudio?b("FBRTCCallabilityStore").voiceCallButtonTooltip(a.fbid,a.short_name,this.state.isCallable,this.props.thread):b("FBRTCCallabilityStore").callButtonTooltip(a.fbid,a.short_name,this.state.isCallable,this.props.thread)},render:function(){if(!this.props.shown)return null;var a=b("TrackingNodes").getTrackingInfo(this.props.isAudio?b("TrackingNodes").types.VIDEOCHAT:b("TrackingNodes").types.VOICECHAT),c=JSON.stringify({videochat:"call_clicked_bhat_tab"}),d=this.props.threadID&&b("FantaAvailableStatus").isAvailable(this.props.thread,this.props.threadID);d=d&&this.state.isCallable;return b("React").createElement("div",null,b("React").createElement(b("Link.react"),{"aria-label":this.getTooltipLabel(),className:"button _3olv"+(this.props.isAudio?" _2fpc":"")+(this.props.isAudio?"":" _2fpd")+(this.state.isCallable?" enabled":""),"data-ft":a,"data-gt":c,"data-hover":"tooltip","data-tooltip-content":this.getTooltipLabel(),"data-tooltip-position":"above",onClick:this._handleClick,onKeyUp:this._handleKeyUp,ref:"button"}),b("React").createElement("div",{className:d&&!this.props.isAudio?"_18pe":""}),b("React").createElement(b("XUIAmbientNUX.react"),{alignment:"right",behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},contextRef:function(){return this.refs.button}.bind(this),onCloseButtonClick:this.props.onRTCNuxCloseButtonClick,shown:this.props.rtcNuxShown,width:"auto"},h._("You can now make a group call.")))},_handleClick:function(a){a.preventDefault(),this._startCall()},_handleKeyUp:function(a){a.preventDefault();if(a.keyCode!==b("Keys").RETURN)return;a.target&&(a.target instanceof HTMLElement||i(0),a.target.blur());this._startCall()},_startCall:function(){__p&&__p();var a=this.props,c=a.isAudio;a=a.isGroupChat;a=b("RTWebUserActionLogger").getCallType(a);c=b("RTWebUserActionLogger").getAudioVideoComponent(c);b("RTWebUserActionLogger").logClick({callType:a,page:b("RTWebLoggingPage").FACEBOOK,surface:b("RTWebLoggingSurface").CHAT_TAB,component:c});b("MessengerRTCFunnelLogger").startFunnel("ChatTab");if(!this.state.isCallable){b("MessengerRTCFunnelLogger").endFunnel("callee_not_callable");return}this.props.onRTCNuxCloseButtonClick();this._initiateCall()},_initiateCall:function(){__p&&__p();var a=this.props,c=a.isAudio,d=a.isGroupChat;a=a.threadID;!a&&i(0);var e=c?"audio":"video";if(d)b("MercuryIDs").isLocalThread(a)?j.getServerIDFromClientID(a,function(a){return this._initiateGroupCall(a)}.bind(this)):(b("MessengerRTCFunnelLogger").appendAction("start_in_group_thread"),this._initiateGroupCall(b("MercuryIDs").getThreadFBIDFromThreadID(a)));else{d=this.state.user&&this.state.user.fbid;if(!d)return;b("MessengerRTCFunnelLogger").appendAction("start_in_p2p_thread");b("FBRTCCore").startOutgoingCall(d,e,!!c);new(b("VideoCallTypedLogger"))().setEvent("chat_tab_call_click").log()}},_initiateGroupCall:function(a){__p&&__p();var c=this.props,d=c.isAudio;c=c.rtcCallData;var e=c.call_state;c=c.server_info_data;if(e!=="NO_ONGOING_CALL"&&c){b("MessengerRTCFunnelLogger").appendAction("join_existing_call");b("FBRTCCore").startGroupCall({conferenceName:"GROUP:"+a,hasVideo:!d,serverInfoData:c,trigger:e!==b("RTCCallState").AUDIO_GROUP_CALL?d?k.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:k.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:d?k.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:k.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON});return}b("Bootloader").loadModules(["FBRTCSupport","MercuryThreads","MessengerParticipantsFetcher.bs","FBRTCUnsupportedBrowserMessage","MessengerRTCGroupCallParticipantsPickerDialogController"],function(c,d,e,f,g){__p&&__p();if(!c.isGroupCallWebtrcSupported()){b("MessengerRTCFunnelLogger").endFunnel("unsupported_browser");f.showForOutgoingGroupCall();return}d.get().getThreadMeta(this.props.threadID,function(c){var d=c.participants?c.participants.filter(function(a){return a!==b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)}.bind(this)).map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)}):[];d.length>0&&e.fetch({ids:d}).done(function(d){b("MessengerRTCFunnelLogger").appendAction("render_participant_picker"),g.render({participants:b("immutable").Map(d.map(function(a){return[a.id,new(b("ImmutableObject"))(a)]})),thread:c,viewerID:this.props.viewer,trigger:this.props.isAudio?k.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:k.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON,conferenceName:"GROUP:"+a,hasVideo:!this.props.isAudio})}.bind(this))}.bind(this))}.bind(this),"ChatVideoCallButton.react")}});e.exports=c}),null);
__d("DisplayGenderConst",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:"UNKNOWN",FEMALE:"FEMALE",MALE:"MALE",NEUTER:"NEUTER"})}),null);
__d("MessengerGroupsSyncStatus.bs",["MessengerGroupsSyncStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a==null)return null;else switch(a){case"OPT_IN":return b("MessengerGroupsSyncStatus").OPT_IN;case"OPT_OUT":return b("MessengerGroupsSyncStatus").OPT_OUT;case"PENDING_OPT_IN":return b("MessengerGroupsSyncStatus").PENDING_OPT_IN;case"PENDING_OPT_OUT":return b("MessengerGroupsSyncStatus").PENDING_OPT_OUT;case"UNSET":return b("MessengerGroupsSyncStatus").UNSET;case"UNSUPPORTED":return b("MessengerGroupsSyncStatus").UNSUPPORTED;default:return null}}f.fromNullableString=a}),null);
__d("MessengerServerPayloadTransformer.bs",["URI","FBID.bs","bs_array","Utils.bs","bs_string","getByPath","bs_caml_array","MercuryIDs","bs_caml_format","GenderConst","bs_js_primitive","WorkModeConfig","bs_js_null_undefined","DisplayGenderConst","MessagingThreadType","WorkForeignEntityType","MercuryParticipantTypes","MessengerGroupsSyncStatus.bs","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();var c=a.location_coordinates;c=c==null?[null,null]:[c.latitude,c.longitude];var d=a.location_page,e;if(d==null)e=null;else{d=d.address;e=d==null?null:d.full_address}d=a.allows_rsvp;d=d?1:0;var f=b("bs_array").fold_left(function(a,b){a[b.node.id]=b.guest_list_state;return a},{},a.event_reminder_members.edges),g=a.lightweight_event_creator;return{creator_id:g==null?null:g.id,event_members:f,event_time:a.time,event_type:a.lightweight_event_type,latitude:c[0],longitude:c[1],location_address:e,location_name:a.location_name,note:a.note,oid:a.id,related_event:a.related_event,repeat_mode:a.repeat_mode,seconds_to_notify_before:a.seconds_to_notify_before,status:a.lightweight_event_status,title:a.event_title,track_rsvp:d}}function h(a){__p&&__p();a=a.associated_object;if(a==null)return null;else{var c=a.action_link,d;if(c==null)d=null;else{var e=b("WorkModeConfig").is_work_user;e=e?b("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";d=new(b("URI"))(c).setDomain(e)}c=a.profile_picture;return{id:a.id,name:a.name,action_link:d,profile_picture:c==null?null:{uri:c.uri},room_type:a.room_type,privacy_mode:a.privacy_mode,approval_mode_toggleable:a.approval_mode_toggleable,start_timestamp:a.start_timestamp,event_place:a.event_place,mentorship_program:a.mentorship_program}}}function i(a){a=a.related_page_thread;if(a==null)return null;else{var c=b("bs_array").map(function(a){return a.name},a.custom_thread_tags.nodes),d=a.page;d=d==null?null:d.id;return{flagged:a.is_flagged,pageID:d,customTagNames:c}}}function j(a){__p&&__p();var c=a.thread_key.other_user_id;if(c==null)return!1;else{a=a.all_participants.nodes;return b("bs_array").fold_left(function(a,b){b=b.messaging_actor;if(b.id===c)return b.__typename==="User";else return a},!1,a)}}function k(a){__p&&__p();if(a.length===0)return null;else{var c={};b("bs_array").iter(function(a){var b=a.nickname;if(b==null)return 0;else{c[a.participant_id]=b;return 0}},a);return c}}function l(a){if(!(a==null)&&a!=="")return"#"+b("bs_string").sub(a,2,a.length-2|0);else return null}function a(a){return a.thread_key.thread_fbid}function c(a){return a.thread_key.other_user_id}function d(a){return b("bs_js_primitive").null_undefined_to_opt(b("getByPath")(a,["messages","page_info"]))}function m(a){__p&&__p();var c=a.gender,d=a.url,e;if(d==null)e=null;else{var f=b("WorkModeConfig").is_work_user;f=f?b("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";e=new(b("URI"))(d).getUnqualifiedURI().setDomain(f).setProtocol("https").toString()}d=a.big_image_src;f=a.big_image_src;var g=a.__typename,h;switch(g){case"Page":h=b("MercuryParticipantTypes").PAGE;break;case"User":h=b("MercuryParticipantTypes").USER;break;default:h=null}g=a.accepts_messenger_user_feedback;var i=a.is_viewer_friend,j=a.is_messenger_user,k=a.is_verified,l=a.is_messenger_platform_bot,m=a.is_message_blocked_by_viewer,n=a.is_blocked_by_viewer,o=a.is_viewer_subscribed_to_message_updates,p=a.scim_company_user,q;if(p==null)q=null;else{p=p.company_title;if(p==="")q=null;else{var r=b("bs_js_null_undefined").bind(a.work_info,function(a){return b("bs_js_null_undefined").bind(a.work_community,function(a){return a.name})}),s=a.work_foreign_entity_info;q=!(r==null)&&!(s==null)&&s.type===b("WorkForeignEntityType").NOT_FOREIGN?""+(String(p)+(" \u2022 "+(String(r)+""))):p}}s=a.work_info;r=a.is_employee;p=a.work_foreign_entity_info;return{id:"fbid:"+a.id,fbid:a.id,gender:c==null?b("GenderConst").NOT_A_PERSON:c===b("DisplayGenderConst").MALE?b("GenderConst").MALE_SINGULAR:c===b("DisplayGenderConst").FEMALE?b("GenderConst").FEMALE_SINGULAR:b("GenderConst").NOT_A_PERSON,href:e,image_src:d==null?null:d.uri,big_image_src:f==null?null:f.uri,name:a.name,short_name:b("Utils.bs").$pipe$unknown(b("bs_js_primitive").null_undefined_to_opt(a.short_name),a.name),type:h,vanity:a.username,accepts_messenger_user_feedback:g==null?!1:g,is_friend:i==null?!1:i,is_messenger_user:j==null?!1:j,is_business_enabled:a.__typename==="Page"?!0:!1,is_verified:k==null?!1:k,is_messenger_platform_bot:l==null?!1:l,is_messenger_ignored:null,is_messenger_blocked:m==null?!1:m,is_facebook_blocked:n==null?!1:n,is_subscribed_to_page_updates:o==null?!0:o,title:q,availability_status:s==null?null:s.availability_status,employee:r==null?!1:r,instant_game_channel:a.__typename==="Page"?a.instant_game_channel:null,work_foreign_entity_info:p==null?null:p}}function e(a){return b("bs_array").map(function(a){return m(a.messaging_actor)},a.all_participants.nodes)}function n(a,c){__p&&__p();c=c.read_receipts;if(c==null)return 0;else{var d={};b("bs_array").iter(function(c){var e=c.actor;if(!(e==null)&&a!==e.id){d[e.id]={action:b("bs_caml_format").caml_float_of_string(c.action),watermark:b("bs_caml_format").caml_float_of_string(c.watermark)};return 0}else return 0},c.nodes);return[d]}}function o(a){__p&&__p();a=a.delivery_receipts;if(a==null)return[];else return a.nodes.sort(function(a,c){a=b("bs_caml_format").caml_float_of_string(a.timestamp_precise);c=b("bs_caml_format").caml_float_of_string(c.timestamp_precise);if(a>c)return-1;else if(a===c)return 0;else return 1})}function p(a,c,d){var e=c.messages;if(e==null)return 0;else return[b("bs_array").map(function(e){return b("MessengerMessageTransformer.bs").transformMessage(a,e,{thread_id:null,thread_fbid:c.thread_key.thread_fbid,other_user_fbid:c.thread_key.other_user_id,folder:b("bs_string").lowercase(c.folder)},d)},e.nodes)]}function q(a,c,d){__p&&__p();var e=b("bs_array").map(function(c){var d=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),e=c.extensible_attachment,f;if(e==null)f=null;else{var a=e.story_attachment;f={legacy_attachment_id:e.legacy_attachment_id,story_attachment:a==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(a)}}return{snippet:c.snippet,message_sender:c.message_sender,timestamp_precise:c.timestamp_precise,commerce_message_type:c.commerce_message_type,extensible_attachment:f,blob_attachments:d,sticker:c.sticker,extensible_message_admin_text:c.extensible_message_admin_text}},c.last_message.nodes);e={thread_key:c.thread_key,name:c.name,all_participants:c.all_participants,last_message:{nodes:e},unread_count:c.unread_count,message_count:c.messages_count,image:c.image,updated_time_precise:c.updated_time_precise,mute_until:c.mute_until,is_pin_protected:c.is_pin_protected,is_viewer_subscribed:c.is_viewer_subscribed,is_canonical_neo_user:c.is_canonical_neo_user,thread_queue_enabled:c.thread_queue_enabled,folder:c.folder,has_viewer_archived:c.has_viewer_archived,is_page_follow_up:c.is_page_follow_up,cannot_reply_reason:c.cannot_reply_reason,ephemeral_ttl_mode:c.ephemeral_ttl_mode,customization_info:c.customization_info,thread_admins:c.thread_admins,approval_mode:c.approval_mode,joinable_mode:c.joinable_mode,thread_queue_metadata:c.thread_queue_metadata,event_reminders:c.event_reminders,montage_thread:c.montage_thread,last_read_receipt:c.last_read_receipt,related_page_thread:c.related_page_thread,rtc_call_data:c.rtc_call_data,associated_object:c.associated_object,reactions_mute_mode:c.reactions_mute_mode,mentions_mute_mode:c.mentions_mute_mode,privacy_mode:c.privacy_mode,customization_enabled:c.customization_enabled,thread_type:c.thread_type,participant_add_mode_as_string:c.participant_add_mode_as_string,participants_event_status:c.participants_event_status,marketplace_thread_data:c.marketplace_thread_data,page_comm_item:c.page_comm_item,group_approval_queue:c.group_approval_queue,admin_model_status_string:c.admin_model_status_string,groups_sync_status_string:c.groups_sync_status_string,groups_sync_metadata:c.groups_sync_metadata,description:c.description};c=e.customization_info;var f;if(c==null)f=[null,null,null];else{var m=c.emoji;f=[l(c.outgoing_bubble_color),m==null?null:{emoji:m},k(c.participant_customizations)]}m=e.page_comm_item;c=m==null?[null,null,null,null,null]:[m.comm_status,m.comm_source_id,m.id,m.subtitle,m.comm_item_owners];m=e.last_message.nodes.length!==0?[b("bs_caml_array").caml_array_get(e.last_message.nodes,0)]:0;var n=e.last_read_receipt.nodes.length!==0?[b("bs_caml_array").caml_array_get(e.last_read_receipt.nodes,0)]:0;if(m){var o=m[0];a=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:o.extensible_attachment,blob_attachments:o.blob_attachments,sticker:o.sticker},d)}else a=[];if(m){o=m[0].extensible_message_admin_text;if(o==null)d=null;else{o=o.game;d=o==null?null:o.id}}else d=null;o=e.cannot_reply_reason;var p=e.thread_queue_metadata,q=e.thread_type,r=e.montage_thread,s=e.image,t=e.thread_key.other_user_id,u=e.thread_queue_metadata,v=e.name,w=e.thread_key.other_user_id;if(w==null){var x=e.thread_key.thread_fbid;x=x==null?null:x}else x=w;w=e.rtc_call_data;var y;if(w==null)y=null;else{var z=w.initiator;y={call_state:w.call_state,server_info_data:w.server_info_data,initiator_fbid:z==null?null:b("bs_js_null_undefined").fromOption(b("FBID.bs").ofString(z.id))}}w=e.marketplace_thread_data;if(w==null)z=null;else{var A=w.for_sale_item,B;if(A==null)B=null;else{var C=A.id,D=A.formatted_price,E=A.location,F;if(E==null)F=null;else{E=E.reverse_geocode;F={reverse_geocode:E==null?null:{city:E.city,state:E.state}}}E=A.primary_photo;var G;if(E==null)G=null;else{E=E.image;G=E==null?null:E.uri}B={id:C==null?0:b("bs_caml_format").caml_float_of_string(C),story_id:A.story_id,title:A.group_commerce_item_title,price:D==null?null:D.text,location:F,is_sold:A.is_sold,image_uri:G,url:A.url}}E=w.buyer;C=w.seller;z={for_sale_item:B,buyer_fbid:E==null?0:b("bs_caml_format").caml_float_of_string(E.id),seller_fbid:C==null?0:b("bs_caml_format").caml_float_of_string(C.id)}}D=e.group_approval_queue;F=e.groups_sync_metadata;if(F==null)G=null;else{A=F.fb_group;G=A==null?null:A.url}return{admin_ids:b("bs_array").map(function(a){return a.id},e.thread_admins),approval_mode:e.approval_mode,approval_queue_ids:p==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(a.id))},p.approval_requests.nodes),can_reply:o==null?!0:!1,cannot_reply_reason:e.cannot_reply_reason,custom_color:f[0],custom_like_icon:f[1],custom_nickname:f[2],customization_enabled:e.customization_enabled,thread_type:q==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingThreadType")[q])),participant_add_mode:e.participant_add_mode_as_string,ephemeral_ttl_mode:e.ephemeral_ttl_mode,folder:b("bs_string").lowercase(e.folder),has_email_participant:o==null?!1:o===b("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT,has_montage:r==null?!1:!0,image_src:s==null?null:s.uri,is_archived:e.has_viewer_archived,is_page_follow_up:e.is_page_follow_up,is_canonical_user:j(e),is_canonical:t==null?!1:!0,is_pin_protected:e.is_pin_protected,is_subscribed:e.is_viewer_subscribed,is_canonical_neo_user:e.is_canonical_neo_user,is_thread_queue_enabled:u==null?!1:!0,joinable_mode:{mode:b("bs_caml_format").caml_int_of_string(e.joinable_mode.mode),link:e.joinable_mode.link},last_message_timestamp:m?b("bs_caml_format").caml_float_of_string(m[0].timestamp_precise):0,last_message_type:m?m[0].commerce_message_type:null,last_read_timestamp:n?b("bs_caml_format").caml_float_of_string(n[0].timestamp_precise):0,lightweight_event:e.event_reminders.nodes.length===0?null:g(b("bs_caml_array").caml_array_get(e.event_reminders.nodes,0)),message_count:e.message_count,mute_until:e.mute_until,name:v==null?"":v,other_user_fbid:e.thread_key.other_user_id,page_thread_info:i(e),participants:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id)},e.all_participants.nodes),participants_event_status:e.participants_event_status,read_only:o==null?!1:o===b("MessengerThreadCannotReplyReason").READ_ONLY,recipients_loadable:o==null?!0:o!==b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE,server_timestamp:b("bs_caml_format").caml_float_of_string(e.updated_time_precise),snippet_attachments:a,snippet_sender:m?b("MercuryIDs").getParticipantIDFromUserID(m[0].message_sender.messaging_actor.id):null,snippet:m?m[0].snippet:null,thread_fbid:x,thread_id:"",timestamp:b("bs_caml_format").caml_float_of_string(e.updated_time_precise),unread_count:e.unread_count,rtc_call_data:y,marketplace_thread_data:z,associated_object:h(e),reactions_mute_mode:e.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:e.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,comm_status:c[0],page_comm_item_id:c[2],comm_source_id:c[1],subtitle:c[3],comm_item_owners:c[4],group_approval_queue:D==null?null:D.nodes,game_id:d,admin_model_status:e.admin_model_status_string,groups_sync_status:b("MessengerGroupsSyncStatus.bs").fromNullableString(e.groups_sync_status_string),groups_sync_fb_url:G,description:e.description}}f.getThreadFBID=a;f.getOtherUserID=c;f.getMessagePageInfo=d;f.transformParticipant=m;f.transformParticipants=e;f.transformReadReceipts=n;f.transformDeliveryReceipts=o;f.transformMessages=p;f.transformThread=q}),null);
__d("MercuryCanonicalGroupThreadManager",["Bootloader","KeyedCallbackManager","MercuryIDs","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MercuryThreads","MessengerServerPayloadTransformer.bs","MercuryServerDispatcher","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=new(b("KeyedCallbackManager"))(),this.$3=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1),this.$6=b("MercuryThreads").getForFBID(this.$1),this.$4={},this.$8(),this.$9(),this.$7={}}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};a.prototype.getCanonicalGroupThreadIDForParticipants=function(a,b){a=this.$10(a);var c=this.$11(a);c=this.$2.executeOrEnqueue(c,b);this.$12(a);return c};a.prototype.unsubscribe=function(a){a&&this.$2.unsubscribe(a)};a.prototype.$11=function(a){return a.sort().join(",")};a.prototype.$13=function(a,c){c=b("MercuryIDs").getThreadIDFromThreadFBID(c);this.$2.setResource(a,c);this.$4[c]=a};a.prototype.$12=function(a){var c=this.$11(a);c={canonical_group_key:c,participants:a};b("MercuryServerDispatcher").trySend("/ajax/mercury/search_canonical_groups.php",c,null,this.$1)};a.prototype.$8=function(){b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_canonical_groups.php":{request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a){this.handleUpdate(a)}.bind(this)}})};a.prototype.$10=function(a){a.indexOf(this.$1)===-1&&a.push(this.$1);return a};a.prototype.handleUpdate=function(a){if(a.graphql_payload){var c=b("MessengerServerPayloadTransformer.bs").transformThread(a.viewer,a.graphql_payload,a.for_page);this.$3.handleUpdate({threads:[c],payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}c=a.canonical_group;if(c)for(var d in c)this.$13(d,c[d])};a.prototype.getNow=function(a){a=this.$11(this.$10(a));return this.$2.getResource(a)};a.prototype.$9=function(){b("Bootloader").loadModules(["MercuryThreadInformer"],function(a){a=a.getForFBID(this.$1);var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(a.subscribe("threads-deleted",function(a,b){for(var c in b)this.$4[c]&&(this.$2.setResource(this.$4[c],undefined),delete this.$4[c])}.bind(this)));this.$5=c}.bind(this),"MercuryCanonicalGroupThreadManager")};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("FantaGetMessageActions",["FantaDispatcher","MercuryCanonicalGroupThreadManager","MercuryIDs","MercuryTypeaheadConstants","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ADD_PARTICIPANTS:null,CLEAR_PARTICIPANTS:null,CLEAR_PREVIEW:null,FETCH_MORE_MESSAGES:null,ON_BOOTLOAD_TYPEAHEAD:null,ON_GET_APPROVAL_QUEUE_RESPONSE:null,ON_GET_THREAD_PREVIEW_RESPONSE:null,ON_GET_THREAD_RESPONSE:null,ON_MESSAGE_STORE_RESPONSE:null,ON_PAGE_NULL_RESPONSE:null,ON_PRIVACY_STATE_CHANGE:null,ON_SHOW_CONTEXT_BANNER_TIMER:null,REFRESH_THREAD:null,THREADS_UPDATED:null});a={Types:g,addParticipants:function(a,c){__p&&__p();var d=c.length===1&&c[0].getInfo().render_type===b("MercuryTypeaheadConstants").THREAD_TYPE,e=void 0;if(d){d=c[0].getInfo().mercury_thread;d&&(e=b("MercuryIDs").getThreadIDFromThreadFBID(d.thread_fbid))}else if(c.length===1){d=c[0].info&&c[0].info.uid;d&&(e=b("MercuryIDs").getThreadIDFromUserID(d))}else if(c.length===0){b("FantaDispatcher").dispatch({type:g.CLEAR_PARTICIPANTS,tabID:a});return}else(function(){var d=b("MercuryCanonicalGroupThreadManager").get(),e=c.map(function(a){return a.info.uid});b("FantaDispatcher").dispatch({type:g.CLEAR_PREVIEW,tabID:a,tokens:c});var f=d.getCanonicalGroupThreadIDForParticipants(Array.from(e),function(e){d.unsubscribe(f),e&&b("FantaDispatcher").dispatch({type:g.ADD_PARTICIPANTS,previewTabID:e,tabID:a,tokens:c})})})();e&&b("FantaDispatcher").dispatch({type:g.ADD_PARTICIPANTS,previewTabID:e,tabID:a,tokens:c})},onBootloadTypeahead:function(a,c){b("FantaDispatcher").dispatch({type:g.ON_BOOTLOAD_TYPEAHEAD,tabID:a,thread:c})},fetchMoreMessages:function(a){b("FantaDispatcher").dispatch({type:g.FETCH_MORE_MESSAGES,threadID:a})},refreshThread:function(a){b("FantaDispatcher").dispatch({type:g.REFRESH_THREAD,threadID:a})},onGetThreadResponse:function(a){b("FantaDispatcher").dispatch({type:g.ON_GET_THREAD_RESPONSE,thread:a})},onGetThreadPreviewResponse:function(a,c){b("FantaDispatcher").dispatch({type:g.ON_GET_THREAD_PREVIEW_RESPONSE,tabID:a,thread:c})},onApprovalQueueResponse:function(a,c){b("FantaDispatcher").dispatch({type:g.ON_GET_APPROVAL_QUEUE_RESPONSE,membershipParticipants:c,tabID:a})},onShowContextBannerTimer:function(a){b("FantaDispatcher").dispatch({type:g.ON_SHOW_CONTEXT_BANNER_TIMER,threadID:a})},onMessageStoreResponse:function(a,c){b("FantaDispatcher").dispatch({type:g.ON_MESSAGE_STORE_RESPONSE,messages:a,tabID:c})},threadsUpdated:function(a){b("FantaDispatcher").dispatch({type:g.THREADS_UPDATED,threads:a})},onPrivacyStateChange:function(a,c){b("FantaDispatcher").dispatch({type:g.ON_PRIVACY_STATE_CHANGE,threadID:a,privacyState:c})},onPageNullResponse:function(a,c){b("FantaDispatcher").dispatch({type:g.ON_PAGE_NULL_RESPONSE,threadID:a,nullStateCTA:c})}};e.exports=a}),null);
__d("FantaTabSheetActions",["FantaDispatcher","LogHistory","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CLOSE_ADD_FRIENDS_SHEET:null,CLOSE_ADD_MORE_FRIENDS_SHEET:null,CLOSE_EMPLOYEE_PERSONAL_USER_SHEET:null,CLOSE_EMPLOYEE_WORK_USER_SHEET:null,CLOSE_NAME_CONVERSATION_TAB_SHEET:null,CLOSE_PAGE_INDICATOR_SHEET:null,CLOSE_READ_ONLY_PERMANENT_SHEET:null,CLOSE_READ_ONLY_SHEET:null,CLOSE_USER_FOCUS_AND_BYPASS_SHEET:null,CLOSE_USER_TIMEZONE_SHEET:null,ON_BOOTLOAD_EVENT_REMINDER:null,ON_WORK_DO_NOT_DISTURB_RESPONSE:null,ON_MENTORSHIP_PROGRAM_RESPONSE:null,ON_IS_PAGE_TAB:null,OPEN_ADD_MORE_FRIENDS_SHEET:null,OPEN_APPOINTMENT_SHEET:null,OPEN_BYPASS_FOCUS_SHEET:null,OPEN_EMPLOYEE_AWAY_SHEET:null,OPEN_EMPLOYEE_PERSONAL_USER_SHEET:null,OPEN_EMPLOYEE_WORK_USER_SHEET:null,OPEN_NAME_CONVERSATION_TAB_SHEET:null,OPEN_PAGE_INDICATOR_SHEET:null,OPEN_READ_ONLY_PERMANENT_SHEET:null,OPEN_READ_ONLY_SHEET:null,OPEN_USER_FOCUS_SHEET:null,OPEN_USER_TIMEZONE_SHEET:null,OPEN_WORK_DO_NOT_DISTURB_SHEET:null,OPEN_MENTORSHIP_PROGRAM_SHEET:null}),h=b("LogHistory").getInstance("fanta_sheets");function i(a){b("FantaDispatcher").dispatch(a),h.log(a.type,a.tabID)}a={Types:g,openUserFocusSheet:function(a){i({type:g.OPEN_USER_FOCUS_SHEET,tabID:a})},openBypassFocusSheet:function(a){i({type:g.OPEN_BYPASS_FOCUS_SHEET,tabID:a})},closeUserFocusAndBypassSheet:function(a){i({type:g.CLOSE_USER_FOCUS_AND_BYPASS_SHEET,tabID:a})},openUserTimezoneSheet:function(a,b){i({type:g.OPEN_USER_TIMEZONE_SHEET,tabID:a,timezoneInfo:b})},closeUserTimezoneSheet:function(a){i({type:g.CLOSE_USER_TIMEZONE_SHEET,tabID:a})},openAddMoreFriendsSheet:function(a){i({type:g.OPEN_ADD_MORE_FRIENDS_SHEET,tabID:a})},closeAddMoreFriendsSheet:function(a){i({type:g.CLOSE_ADD_MORE_FRIENDS_SHEET,tabID:a})},closeAddFriendsSheet:function(a){i({type:g.CLOSE_ADD_FRIENDS_SHEET,tabID:a})},openNameConversationSheet:function(a){i({type:g.OPEN_NAME_CONVERSATION_TAB_SHEET,tabID:a})},closeNameConversationSheet:function(a){i({type:g.CLOSE_NAME_CONVERSATION_TAB_SHEET,tabID:a})},openReadOnlySheet:function(a){i({type:g.OPEN_READ_ONLY_SHEET,tabID:a})},closeReadOnlySheet:function(a){i({type:g.CLOSE_READ_ONLY_SHEET,tabID:a})},openReadOnlyPermanentSheet:function(a){i({type:g.OPEN_READ_ONLY_PERMANENT_SHEET,tabID:a})},closeReadOnlyPermanentSheet:function(a){i({type:g.CLOSE_READ_ONLY_PERMANENT_SHEET,tabID:a})},openEmployeeAwaySheet:function(a){i({type:g.OPEN_EMPLOYEE_AWAY_SHEET,tabID:a})},openEmployeePersonalUserSheet:function(a){i({type:g.OPEN_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})},closeEmployeePersonalUserSheet:function(a){i({type:g.CLOSE_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})},openEmployeeWorkUserSheet:function(a){i({type:g.OPEN_EMPLOYEE_WORK_USER_SHEET,tabID:a})},closeEmployeeWorkUserSheet:function(a){i({type:g.CLOSE_EMPLOYEE_WORK_USER_SHEET,tabID:a})},openPageIndicatorSheet:function(a,b){i({type:g.OPEN_PAGE_INDICATOR_SHEET,description:b,tabID:a})},closePageIndicatorSheet:function(a){i({type:g.CLOSE_PAGE_INDICATOR_SHEET,tabID:a})},openWorkDoNotDisturbSheet:function(a,b){i({type:g.OPEN_WORK_DO_NOT_DISTURB_SHEET,description:b,tabID:a})},openMentorshipProgramSheet:function(a){i({type:g.OPEN_MENTORSHIP_PROGRAM_SHEET,tabID:a})},onIsPageTab:function(a,b){i({type:g.ON_IS_PAGE_TAB,pageIndicator:b,tabID:a})},onBootloadEventReminder:function(a){i({type:g.ON_BOOTLOAD_EVENT_REMINDER,tabID:a})},openAppointmentBannerSheet:function(a){i({type:g.OPEN_APPOINTMENT_SHEET,tabID:a})},onWorkDoNotDisturbResponse:function(a,b,c){i({type:g.ON_WORK_DO_NOT_DISTURB_RESPONSE,tabID:a,status:b,description:c})},onMentorshipProgramResponse:function(a,b,c){i({type:g.ON_MENTORSHIP_PROGRAM_RESPONSE,tabID:a,groupID:c,programName:b})}};e.exports=a}),null);
__d("MercurySheetPolicy",["keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={ChatThreadIsMutedTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatUserFocusSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserFocusBypassSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserTimezoneSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserBlockedTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatUploadWarningTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatThreadIsMessageBlockedSheet:{isPermanent:!0,isSheetWithInput:!1},ChatReadOnlyTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatReadOnlyPermanentTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatOfflineTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNoRecipientsTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNewMessagesTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatNameConversationTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatEmployeeAwaySheet:{isPermanent:!0,isSheetWithInput:!1},ChatEventReminderTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatAppointmentBanner:{isPermanent:!0,isSheetWithInput:!1},ChatMontageSheet:{isPermanent:!1,isSheetWithInput:!1},ChatJoinCallSheet:{isPermanent:!0,isSheetWithInput:!1},FantaAddFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},FantaAddMoreFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},ChatRoomAssociatedObjectSheet:{isPermanent:!1,isSheetWithInput:!1},ChatWorkDoNotDisturbSheet:{isPermanent:!1,isSheetWithInput:!1},ChatMentorshipProgramSheet:{isPermanent:!1,isSheetWithInput:!1},ChatGroupsSyncTabSheet:{isPermanent:!0,isSheetWithInput:!1}};a={canReplaceOpenSheet:function(a,b){var c=this.getType(b),d=this.isPermanent(b);b=this.isSheetWithInput(b);var e=this.getType(a),f=this.isPermanent(a);a=this.isSheetWithInput(a);if(a)return!!(c!==e&&b);if(f&&!d)return!1;return e===this.sheets.ChatThreadIsMessageBlockedSheet?!1:!0},getType:function(a){var b=a.getType||a.type&&a.type.getType||function(){return a};b=b.call(a);return b},isPermanent:function(a){if(typeof a==="string"&&g[a])return g[a].isPermanent;var b=a.isPermanent||a.type&&a.type.isPermanent||function(){return!1};b=b.call(a);return b},isSheetWithInput:function(a){if(typeof a==="string"&&g[a])return g[a].isSheetWithInput;var b=a.isSheetWithInput||a.type&&a.type.isSheetWithInput||function(){return!1};b=b.call(a);return b},sheets:b("keyMirror")(g)};e.exports=a}),null);
__d("MessageRequestUtils",["MessagingTag"],(function(a,b,c,d,e,f){"use strict";a={isMessageRequest:function(a){return(a.folder===b("MessagingTag").PENDING||a.folder===b("MessagingTag").OTHER)&&a.can_reply},isFiltered:function(a){return a.folder===b("MessagingTag").OTHER}};e.exports=a}),null);
__d("TimeSpentRoomTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP:"GROUP",EVENT:"EVENT"})}),null);
__d("MessageThreadAssociatedObjectUtils",["TimeSpentRoomTypeEnum"],(function(a,b,c,d,e,f){"use strict";a={shouldRender:function(a){return a&&a.room_type===b("TimeSpentRoomTypeEnum").GROUP&&!a.is_workplace_community},isLinkedToGroupChat:function(a){return a&&a.room_type===b("TimeSpentRoomTypeEnum").GROUP&&!a.is_workplace_community}};e.exports=a}),null);
__d("MessengerGroupAdminModelStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REQUIRED:"required",OPTIONAL:"optional",NOT_SUPPORTED:"not_supported"})}),null);
__d("MessengerParticipantAddModeTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADD:"ADD",INVITE:"INVITE",ADD_INVITE:"ADD_INVITE"})}),null);
__d("MessengerAdminGroupUtils",["fbt","CurrentUser","MercuryConfig","MercuryIDs","MessageThreadAssociatedObjectUtils","MessagingSourceEnum","MessageRequestUtils","MessengerApprovalModeTypes","MessengerGroupAdminModelStatus","MessengerJoinableModeType","MessengerParticipantAddModeTypes","QE2Logger","WorkModeConfig","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="messenger_use_new_group_participant_suggestion_ranking",i="show_nullstate_chat_tab_composer",j="show_nullstate_chat_tab_group_chat",k={isJoinableAndOpenThread:function(a){return this.isJoinableThread(a)&&this.isApprovalOpenThread(a)},isJoinableAndApprovalRequiredThread:function(a){return!!(this.isJoinableThread(a)&&a&&a.approval_mode===b("MessengerApprovalModeTypes").APPROVALS)},isWorkGroupSyncedChat:function(a){return!!(b("gkx")("AT7fEWlWLwzcomQ12uRE_cG5HZJE7FbXXRCfPurxhw8vIpN6D0E7mGAi-hDkDV8fg1mjxj-jQMaCESDTVOkEzzqV")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},isWorkSyncedChatThreadCreationMessage:function(a){return!!(a.log_message_data&&a.log_message_data.name&&a.tags&&a.tags.indexOf(b("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_CREATION)!==-1)},shouldAddToApprovalQueue:function(a,b){return!!(this.isJoinableAndApprovalRequiredThread(a)&&a&&!k.isAdmin(a.admin_ids,b))},isJoinableThread:function(a){return!!(b("gkx")("AT5xrCi08i7kM3hip_Bf4sUgmdKPV1QphRx_J6kDVSso_LwnuXnsPyhq98JRQV_MqHjleZ_pelk8UHK4mDklEDU4gdH-DgPi3glxyQ2_7CHTgw")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE)},isGroupChat:function(a){return!!(a&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},shouldInvite:function(a){return!!(b("gkx")("AT5xrCi08i7kM3hip_Bf4sUgmdKPV1QphRx_J6kDVSso_LwnuXnsPyhq98JRQV_MqHjleZ_pelk8UHK4mDklEDU4gdH-DgPi3glxyQ2_7CHTgw")&&a&&a.participant_add_mode===b("MessengerParticipantAddModeTypes").INVITE)},isApprovalOpenThread:function(a){return!!(b("gkx")("AT5xrCi08i7kM3hip_Bf4sUgmdKPV1QphRx_J6kDVSso_LwnuXnsPyhq98JRQV_MqHjleZ_pelk8UHK4mDklEDU4gdH-DgPi3glxyQ2_7CHTgw")&&a&&a.approval_mode===b("MessengerApprovalModeTypes").OPEN)},isAdminRequired:function(a){return!!(a&&a.admin_model_status===b("MessengerGroupAdminModelStatus").REQUIRED)},isOwner:function(a,b){return a&&(this.isJoinableThread(b)||this.canSeeAdminV2Feature(b))},canSeeAdminV2Feature:function(a){return b("gkx")("AT40OYqleZgx4_fLMr8MfXL_p194P9S4sUc6KbJKgvwElmT2Aj8TCRUAE4QBlOnOrqktka6w0qRv70XxEE3mR93T57P4MxmwmjYSU_ecGje_hg")&&this.isAdminRequired(a)},canSeeJoinableGroupOptions:function(a){var c=b("WorkModeConfig").is_work_user;return!c&&this.isJoinableThread(a)},canSeeGroupOptionsSection:function(a,c){var d=b("WorkModeConfig").is_work_user;c=this.isAdmin(a.admin_ids,c);return!d&&(this.isJoinableThread(a)||c&&this.canSeeAdminV2Feature(a))},canSeeBotsInGroupTypeahead:function(){var a=b("CurrentUser").isWorkUser();return a&&b("gkx")("AT5GhC4rylRpYKpnZf2oEtsedOSc0WCJLB5V8z6-mqCNieSKORSJnqenUlgYVRpQaRNASrJq2SeIYY3m4QNhPBlK")},canMakeOthersAdmins:function(a,b,c){return this.isOwner(a,c)&&!b},canMakeSelfAdmin:function(a,b){return(this.isJoinableThread(b)||this.isAdminRequired(b))&&b.admin_ids.length===0&&a},canRemoveAdmin:function(a,b,c){return this.isAdminRequired(c)&&c.admin_ids.length===1?!1:this.isOwner(a,c)&&b},canRemoveFromGroup:function(a,b){return this.isAdminRequired(b)?a:this.isOwner(a,b)||!this.isJoinableThread(b)},showJoinableLink:function(a){var b=!!(a&&a.joinable_mode&&a.joinable_mode.link);a=k.isJoinableThread(a);return a&&b},showJoinableApprovalToggle:function(a,b){if(a.associated_object&&!a.associated_object.approval_mode_toggleable)return!1;b=k.isAdmin(a.admin_ids,b);return k.isOwner(b,a)},showApprovalQueue:function(a,b){b=k.isAdmin(a.admin_ids,b);b=k.isOwner(b,a);var c=this.getPendingRequestNumber(a);if(a&&this.isAdminRequired(a))return this.isAdminRequired(a)&&b&&c>0;else{a=k.isJoinableAndApprovalRequiredThread(a);return a&&b&&c>0}},showParticipantsModal:function(a,b,c){return this.isJoinableThread(c)&&!a&&!b},useNewGroupMemberSuggestionRanking:function(){b("QE2Logger").logExposureForUser(h);return b("MercuryConfig").MessengerNewGroupParticipantSuggestionQE},showDefaultListForNewPersonAddChatTab:function(){b("QE2Logger").logExposureForUser(j);return b("MercuryConfig").ChatGroupChat},showDefaultListForNewChatTab:function(){b("QE2Logger").logExposureForUser(i);return b("MercuryConfig").ChatComposer},canUpdateThreadCustomization:function(a,c){var d=k.isJoinableThread(a);c=k.isAdmin(a.admin_ids,c);var e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},canUpdateThreadDescription:function(a,c){var d=k.isJoinableThread(a);c=k.isAdmin(a.admin_ids,c);var e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},isAdmin:function(a,c){if(!a)return!1;return b("MercuryIDs").isValid(c)?a.indexOf(b("MercuryIDs").getUserIDFromParticipantID(c))!==-1:a.indexOf(c)!==-1},getLeaveGroupBodyText:function(a,b){return this.isOwner(a,b)?g._("Leaving this group will remove you as an owner and allow other members to manage the group. You will no longer be able to send or receive new messages."):g._("You will stop receiving messages from this conversation and people will see that you left.")},getLeaveGroupTitleText:function(a,b){return this.isOwner(a,b)?g._("Leave this conversation?"):g._("Leave Conversation?")},getLeaveGroupButtonText:function(a,b){return this.isOwner(a,b)?g._("Leave conversation"):g._("Leave")},getMakeOwnerBodyText:function(a,b,c){if(a)return b?g._("As a group admin, you will be able to manage who can join and customize this conversation."):g._("As a group admin, \"{owner's name}\" will be able to manage who can join and customize this conversation.",[g._param("owner's name",c)]);else return b?g._("As a group owner, you will be able to manage group ownership and remove members from the conversation. Only owners will be able to add other owners."):g._("As a group owner, \"{owner's name}\" will be able to manage group ownership and remove members from the conversation. They will be able to remove ownership from other owners.",[g._param("owner's name",c)])},getMakeOwnerTitleText:function(a,b){if(a)return b?g._("Become group admin?"):g._("Add group admin?");else return b?g._("Become group owner?"):g._("Add group owner?")},getMakeOwnerButtonText:function(a,b){if(a)return b?g._("Become admin"):g._("Make admin");else return b?g._("Become owner"):g._("Make owner")},getRemoveOwnerBodyText:function(a,b,c,d){if(b&&c)return a?null:g._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group. Any other member will be able to own the group.");else if(b&&!c)return a?g._("You will no longer be able to manage who can join and customize this conversation."):g._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group.");else return a?g._("\"{owner's name}\" will no longer be able to manage who can join and customize this conversation.",[g._param("owner's name",d)]):g._("\"{owner's name}\" will no longer manage group ownership and remove members from the conversation. They will still be a participant in the group.",[g._param("owner's name",d)])},getRemoveOwnerTitleText:function(a){return a?g._("Remove as group admin?"):g._("Remove as group owner?")},getRemoveOwnerButtonText:function(a){return a?g._("Remove"):g._("Remove owner")},getPendingRequestNumber:function(a){if(a&&a.approval_queue_ids&&a.approval_queue_ids.length)return a.approval_queue_ids.length;else if(a&&this.isAdminRequired(a)&&a.group_approval_queue&&a.group_approval_queue.length)return a.group_approval_queue.length;return 0}};e.exports=k}),null);
__d("MessengerRoomPrivacyMode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({WHITELISTED_MODE:0,PUBLIC_MODE:1})}),null);
__d("FantaComposeViewReducers",["Bootloader","FantaGetMessageActions","FantaTabSheetActions","MercuryDataSourceWrapper","MercurySheetPolicy","MercuryTypeaheadConstants","MessengerRoomPrivacyMode","MessengerAdminGroupUtils","ifRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaGetMessageActions").Types,h=b("FantaTabSheetActions").Types;function a(a,b){switch(b.type){case g.ON_GET_THREAD_RESPONSE:case g.ON_GET_THREAD_PREVIEW_RESPONSE:var c=b.thread;b=b.tabID||c.thread_id;a=i(a,c,b)}return a}function i(a,c,d){c.participants.length===0&&(a=j(a,d,c),a=l(a,d,b("MercurySheetPolicy").sheets.FantaAddFriendsSheet));return a}function c(a,b){switch(b.type){case g.ON_BOOTLOAD_TYPEAHEAD:b=b.thread;var c=b.thread_id;a=j(a,c,b)}return a}function j(a,c,d){__p&&__p();var e=a.mercury.tabContents.get(c);if(!e||e.typeahead)return a;b("ifRequired")("ChatTabTypeaheadRenderer",function(f){__p&&__p();b("ifRequired")("ContextualTypeaheadView",function(g){__p&&__p();b("ifRequired")("MercuryTypeahead",function(h){__p&&__p();if(!a.mercury.tabContents.get(c))return;var i=!!(d&&d.participants&&d.participants.length===0),j=!!(d&&d.associated_object&&d.associated_object.privacy_mode===b("MessengerRoomPrivacyMode").WHITELISTED_MODE),k=i?b("MercuryDataSourceWrapper").chat_typeahead_source:j?b("MercuryDataSourceWrapper").chat_add_people_froup_source:b("MercuryDataSourceWrapper").chat_add_people_source;k.setShowThreads(i);i?k.setShowDefaultList(b("MessengerAdminGroupUtils").showDefaultListForNewChatTab()):j||k.setShowDefaultList(b("MessengerAdminGroupUtils").showDefaultListForNewPersonAddChatTab());j&&k.setQueryData({thread_id:d.thread_fbid});i=new h(k,g);i.setViewOption("renderer",f);i.setExcludedParticipantsFromThreadMeta(d);e=e.merge({typeahead:i});a=a.setIn(["mercury","tabContents",c],e)},function(){return k(c,d)})},function(){return k(c,d)})},function(){return k(c,d)});return a}function d(a,c){switch(c.type){case h.OPEN_ADD_MORE_FRIENDS_SHEET:var d=c.tabID,e=a.mercury.tabContents.get(d).thread;if(e){a=j(a,d,e);return l(a,c.tabID,b("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet)}}return a}function k(a,c){b("Bootloader").loadModules(["ChatTabTypeaheadRenderer","ContextualTypeaheadView","MercuryTypeahead"],function(d,e,f){b("FantaGetMessageActions").onBootloadTypeahead(a,c)},"FantaComposeViewReducers")}function l(a,c,d){__p&&__p();var e=a.mercury.tabContents.get(c),f=a.tabGroup.tabs.get(c);if(!f||!e)return a;f=e;f=f.openSheet;if(f&&!b("MercurySheetPolicy").canReplaceOpenSheet(f,d))return a;e=e.merge({openSheet:d});a=a.setIn(["mercury","tabContents",c],e);return a}function f(a,c){switch(c.type){case g.ADD_PARTICIPANTS:var d=c.tokens;c=c.tabID;d=d.length===1&&d[0].getInfo().render_type===b("MercuryTypeaheadConstants").THREAD_TYPE;if(!d)return l(a,c,b("MercurySheetPolicy").sheets.FantaAddFriendsSheet)}return a}e.exports={addParticipants:f,onBootloadTypeahead:c,onGetThreadResponse:a,openAddMoreFriends:d}}),null);
__d("FantaReducersCookie",["FantaMessageActions","FantaTabActions","PresenceState","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i=b("throttle").acrossTransitions(b("PresenceState").doSync,500);function a(a,b){switch(b.type){case g.RECEIVED_NEW_MESSAGE:case h.CLOSE_ALL_TABS:case h.CLOSE_AND_TAB_NEXT:case h.CLOSE_TAB:case h.DELETE_TAB:case h.MINIMIZE_ALL_TABS:case h.MINIMIZE_TAB:case h.OPEN_TAB:case h.OPEN_TAB_WITH_INTERSTITIAL_DATA:case h.REPLACE_TAB:case h.UNMINIMIZE_TAB:i();return j(a)}return a}function c(a,b){switch(b.type){case h.LOAD_FROM_DATA:var c=a.tabGroup;b=b.tabData;c=c.updatedTime;c=c>=b.updatedTime||b.updatedTime===undefined?c:b.updatedTime;return a.mergeIn(["tabGroup"],{updatedTime:c})}return a}function j(a){return a.mergeIn(["tabGroup"],{updatedTime:Date.now()})}e.exports={updateCookie:a,loadFromData:c}}),null);
__d("FantaReducersDockCalculator",["Arbiter","FantaTabActions","FantaMessageActions","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaMessageActions").Types,i=null;function j(a){i=a,b("setImmediate")(function(){b("Arbiter").inform("FantaReducersDockCalculator/shouldRecalculate")})}function k(a){if(!i||a.size!==i.size)j(a);else{var b=!1;a.forEach(function(a){var c=i&&i.get(a.id);(!c||a.isMinimized!==c.isMinimized)&&(b=!0)});b&&j(a)}}function a(a,b){var c=a.tabGroup.tabs;switch(b.type){case g.CLOSE_ALL_TABS:case g.CLOSE_AND_TAB_NEXT:case g.CLOSE_TAB:case g.DELETE_TAB:case g.MINIMIZE_ALL_TABS:case g.MINIMIZE_TAB:case g.OPEN_TAB:case g.OPEN_TAB_WITH_INTERSTITIAL_DATA:case g.UNMINIMIZE_TAB:j(c);break;case g.LOAD_FROM_DATA:case h.RECEIVED_NEW_MESSAGE:k(c);break}return a}e.exports={recalculateDock:a}}),null);
__d("FantaReducersLogging",["Bootloader","FantaTabActions","FantaTabSheetActions","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaTabSheetActions").Types;function a(a,c){__p&&__p();if(!b("gkx")("AT7OsZ9HtEyPgfhJFQHuE0P041fHeeN2NPSm1EqAg463b6aopCITyZWjbp4OgKkQKtYXSpA-M6CmnBX7-J8cZgbvURt5zoQ3MC2POa0dZoQCkA"))return a;switch(c.type){case h.OPEN_ADD_MORE_FRIENDS_SHEET:case g.OPEN_TAB:if(c.type===g.OPEN_TAB&&c.entryPoint!=="compose_link"&&c.entryPoint!=="jewel_new_message")return a;var d=a.mercury.tabContents.get(c.tabID);d&&b("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger","MessengerSecondarySearchFunnelConstants"],function(a,b){var e=void 0;switch(c.entryPoint){case"compose_link":e=b.ENTRY_SURFACES.SIDEBAR;break;case"jewel_new_message":e=b.ENTRY_SURFACES.JEWEL;break;default:e=b.ENTRY_SURFACES.EXISTING_TAB}a.startFunnel(b.CLIENTS.WWW,b.SEARCH_SURFACES.OMNIPICKER,e,c.type===h.OPEN_ADD_MORE_FRIENDS_SHEET?d.id:null,d.loggingID)},"FantaReducersLogging");break}return a}function c(a,c){switch(c.type){case g.CLOSE_ALL_TABS:case g.CLOSE_AND_TAB_NEXT:case g.CLOSE_TAB:case g.DELETE_TAB:case g.OPEN_TAB:case g.OPEN_TAB_WITH_INTERSTITIAL_DATA:var d=a.tabGroup.allowedRaisedTabs;c=a.tabGroup.getRaisedandUnraisedTabs();var e=c.raisedTabs;c=c.unraisedTabs;var f=e.count(),h=f+c.count();b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(d).setOpenTabs(h).setVisibleTabs(f).log()},"FantaReducersLogging")}return a}e.exports={updateVisibleTabs:c,logSearchEventsAfterAction:a}}),null);
__d("FantaTypeJoinableThread",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={admins:[],approvalMode:0,associatedObject:null,description:null,friendsInParticipants:[],imageURL:null,isViewerSubscribed:!1,isWorkpaceChat:!1,joinableMode:{mode:0,link:""},linkHash:"",participants:[],threadID:null,threadFBID:null,threadName:null};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeTabContents",["ChatPrivacyActionController","FantaGetMessageActions","FantaTypeComposer","immutable","ImmutableObject","MercuryIDs","emptyFunction","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c={composer:new(b("FantaTypeComposer"))(),hasFetchedAll:!1,id:"",isMultiCompany:null,isScrolledToBottom:!0,joinableInterstitialData:null,membershipParticipants:null,mentorship:null,messages:b("immutable").List(),messageStore:null,nullStateCTA:null,openSheet:null,pageIndicator:null,pageIndicatorDescription:null,privacyController:null,showContextBanner:!1,showUnseenMessages:b("emptyFunction"),signatureID:null,thread:null,threadPreviewID:null,threadPreviewRecipients:null,timezoneInfo:null,typeahead:null,workAvailabilityHumanReadable:null,workAvailabilityStatus:null,loggingID:null};d=babelHelpers.inherits(a,b("immutable").Record(c));g=d&&d.prototype;function a(a){var c=void 0,d=b("MercuryIDs").getUserIDFromThreadID(a.id);d&&(c=new(b("ChatPrivacyActionController"))(d,function(c){b("setImmediate")(function(){b("FantaGetMessageActions").onPrivacyStateChange(a.id,c)})}));g.constructor.call(this,babelHelpers["extends"]({privacyController:c},a))}e.exports=a}),null);
__d("FantaReducersMercury",["Arbiter","AsyncSignal","AvailableList","AvailableListConstants","Bootloader","FantaAvailableStatus","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTabSheetActions","FantaTypeJoinableThread","FantaTypeTabContents","JSLogger","MercuryIDs","MercuryThreadIDMap","TimeSlice","getPageIDFromThreadID","ifRequired","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadIDMap").get(),h=b("JSLogger").create("FantaReducersMercury"),i=b("FantaMessageActions").Types,j=b("FantaTabActions").Types,k=b("FantaGetMessageActions").Types,l=1;function m(){return Math.floor(Math.random()*2147483648).toString(16)}function a(a,c){__p&&__p();switch(c.type){case j.OPEN_TAB:case j.OPEN_TAB_WITH_INTERSTITIAL_DATA:var d=c.tabID;b("ifRequired")("FantaTabsReactApp",function(c){!b("MercuryIDs").isValidThreadID(d)?(a=a.deleteIn(["tabGroup","tabs",d]),r(d)):z(a,d)},function(){return a=n(a,c.tabID)});a=o(a,d);var e=m(),f=a.mercury.tabContents.get(d);f=f.merge({signatureID:e,loggingID:l++});a=a.setIn(["mercury","tabContents",d],f);new(b("AsyncSignal"))("/ajax/chat/opentab_tracking.php",{threadID:d,userID:b("MercuryIDs").getUserIDFromThreadID(d),signatureID:e}).send();if(c.interstitialData){e=new(b("FantaTypeJoinableThread"))(c.interstitialData);f=f.merge({joinableInterstitialData:e});a=a.setIn(["mercury","tabContents",d],f)}b("Arbiter").inform("jewel/hide");return a}return a}function n(a,c){b("ifRequired")("FantaTabsSlimApp",function(d){!b("MercuryIDs").isValidThreadID(c)?(a=a.deleteIn(["tabGroup","tabs",c]),r(c)):z(a,c)},function(){z(a,c)});return a}function c(a,b){switch(b.type){case i.RECEIVED_NEW_MESSAGE:a=o(a,b.tabID)}return a}function o(a,c){__p&&__p();var d=a.mercury.tabContents.get(c);if(!d){d=function(){__p&&__p();var d=b("getPageIDFromThreadID")(c);d&&b("Bootloader").loadModules(["PagesMercuryChatTabIndicatorHandler"],function(a){var e=b("AvailableListConstants").OFFLINE,f=new a(d,e,function(a){b("setImmediate")(function(){b("FantaTabSheetActions").openPageIndicatorSheet(c,a)})},function(){b("setImmediate")(function(){return b("FantaTabSheetActions").closePageIndicatorSheet(c)})});b("setImmediate")(function(){b("FantaTabSheetActions").onIsPageTab(c,f)});f.checkResponsiveness()},"FantaReducersMercury");return{v:a.setIn(["mercury","tabContents",c],new(b("FantaTypeTabContents"))({id:c}))}}();if(typeof d==="object")return d.v}return a}function d(a,b){switch(b.type){case j.REPLACE_TAB:a=q(a,b.newTabID);a=o(a,b.newTabID);return a}return a}function f(a,b){__p&&__p();switch(b.type){case k.ADD_PARTICIPANTS:var c=b.tabID;b=b.previewTabID;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({threadPreviewID:b});a=a.setIn(["mercury","tabContents",c],d);return a}return a}function p(a,c){switch(c.type){case k.CLEAR_PARTICIPANTS:c=c.tabID;var d=a.mercury.tabContents.get(c);d=d?d.loggingID:null;a=a.setIn(["mercury","tabContents",c],new(b("FantaTypeTabContents"))({id:c,loggingID:d}))}return a}function q(a,c){b("ifRequired")("FantaTabsReactApp",function(d){b("MercuryIDs").isValidThreadID(c)||(a=a.deleteIn(["tabGroup","tabs",c]),r(c))},function(){b("ifRequired")("FantaTabsSlimApp",function(d){b("MercuryIDs").isValidThreadID(c)||(a=a.deleteIn(["tabGroup","tabs",c]),r(c))})});return a}function r(a){g.getClientIDFromServerID(a,function(c){return b("setImmediate")(function(){b("MercuryIDs").isValidThreadID(c)?b("FantaTabActions").openTab(c):h.error("invalid id",a)})})}function s(a,b){switch(b.type){case j.FOCUS_TAB:z(a,b.tabID)}return a}function t(a,b){switch(b.type){case j.CLOSE_TAB:b=b.tabID;a=v(a,b)}return a}function u(a,b){switch(b.type){case j.DELETE_TAB:b=b.tabID;a=v(a,b);a=a.deleteIn(["mercury","tabContents",b])}return a}function v(a,c){b("ifRequired")("MessengerVideoAutoplayActions",function(a){a.deleteThread(c)});return a}function w(a,c){switch(c.type){case j.CLOSE_ALL_TABS:b("ifRequired")("MessengerVideoAutoplayActions",function(a){a.deleteAllThreads()});return a}return a}function x(a,b){switch(b.type){case j.FOCUS_NEXT_TAB:case j.FOCUS_PREVIOUS_TAB:case j.CLOSE_AND_TAB_NEXT:b=a.tabGroup.focusedTabID;b&&z(a,b)}return a}function y(a,b){switch(b.type){case j.CLOSE_AND_TAB_NEXT:b.tabID}return a}function z(a,c){__p&&__p();var d=b("MercuryIDs").getUserIDFromThreadID(c);if(d){var e=function(){b("AvailableList").updateForID(d)};b("TimeSlice").guard(e,"superfluous request to first open DD",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()}e=a.mercury.tabContents.get(c);if(e){a=e.thread;e=e.pageIndicator;e&&e.notifyPageOnlineStatusChanged(b("FantaAvailableStatus").getStatus(a,c))}}function A(a,b){switch(b.type){case j.UNMINIMIZE_TAB:z(a,b.tabID)}return a}function B(a,b){__p&&__p();switch(b.type){case j.LOAD_FROM_DATA:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a=o(a,e)}}return a}e.exports={addParticipants:f,clearParticipants:p,closeAllTabs:w,closeAndTabNext:y,closeTab:t,deleteTab:u,focusTab:s,focusTabEvents:x,loadFromData:B,openTab:a,receivedNewMessage:c,replaceTab:d,unminimizeTab:A}}),null);
__d("FantaReducersMessages",["CurrentUser","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTypeComposer","MercuryBrowserAlerts","MercuryParticipants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i=b("FantaGetMessageActions").Types;function a(a,c){switch(c.type){case g.RECEIVED_NEW_MESSAGE:c=c.message;b("MercuryBrowserAlerts").messageReceived(c);return a}return a}function c(a,b){switch(b.type){case g.COMPOSER_TEXT_UPDATE:var c=b.composer,d=b.message;b=b.threadID;var e=a.mercury.tabContents.get(b);return!e||e&&e.composer.version!==c.version?a:a.mergeIn(["mercury","tabContents",b,"composer"],{text:d})}return a}function d(a,b){switch(b.type){case g.REPLY_TO_MESSAGE:var c=b.message;b=b.threadID;var d=a.mercury.tabContents.get(b);if(!d)return a;d=c;return a.mergeIn(["mercury","tabContents",b,"composer"],{replyingToMessage:d})}return a}function f(a,b){switch(b.type){case g.CANCEL_REPLY_TO_MESSAGE:b=b.threadID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=null;return a.mergeIn(["mercury","tabContents",b,"composer"],{replyingToMessage:c})}return a}function j(a,c){switch(c.type){case h.CLOSE_TAB:case h.CLOSE_AND_TAB_NEXT:return!a.mercury.tabContents.get(c.tabID)?a:a.setIn(["mercury","tabContents",c.tabID,"composer"],new(b("FantaTypeComposer"))())}return a}function k(a,c){switch(c.type){case h.CLOSE_ALL_TABS:c=a.mercury.tabContents;c.forEach(function(c){c=c.id;a=a.setIn(["mercury","tabContents",c,"composer"],new(b("FantaTypeComposer"))())});return a}return a}function l(a,b){switch(b.type){case h.SCROLL_BOTTOM_CHANGED:var c=b.tabID,d=b.isScrolledToBottom;b=b.showUnseenMessages;var e=a.mercury.tabContents.get(c);if(!e)return a;e=e.merge({isScrolledToBottom:d,showUnseenMessages:b});a=a.setIn(["mercury","tabContents",c],e)}return a}function m(a,b){switch(b.type){case h.SHOW_UNSEEN_MESSAGES:b=b.tabID;b=a.mercury.tabContents.get(b);b&&b.showUnseenMessages()}return a}function n(a,c){__p&&__p();switch(c.type){case i.ON_GET_THREAD_RESPONSE:c=c.thread;var d=c.thread_id,e=a.mercury.tabContents.get(d);if(!e)return a;var f=null;b("CurrentUser").isWorkUser()&&c.participants&&(f=c.participants.map(b("MercuryParticipants").getOrFetch,b("MercuryParticipants")).find(function(a){return a&&a.is_coworker===!1})!==undefined);e=e.merge({thread:c,isMultiCompany:f});a=a.setIn(["mercury","tabContents",d],e);break}return a}e.exports={closeAllTabs:k,closeTab:j,composerTextUpdate:c,onGetThreadResponse:n,receivedNewMessage:a,scrollBottomChanged:l,showUnseenMessages:m,replyToMessage:d,cancelReplyToMessage:f}}),null);
__d("MessengerSecondarySearchFunnelConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",WWW:"www"});b=Object.freeze({ABANDON:"abandon",CREATE_GROUP:"create_group",ENTER_THREAD:"enter_thread",RESULT_SELECTED:"result_selected",SEND:"send",SINGLE_RESULT_SELECTED:"single_result_selected"});c=Object.freeze({ACTION:"action"});d=Object.freeze({EXISTING_TAB:"existing_tab",JEWEL:"jewel",SIDEBAR:"sidebar"});f=Object.freeze({END:"end",IMPRESSIONS:"impressions",MICRO_SESSION_ENDED:"micro_session_ended",MICRO_SESSION_STARTED:"micro_session_started",QUERY_CHANGED:"query_changed",RESULT_SELECTED:"result_selected",SOURCE_ENDED:"source_ended",SOURCE_STARTED:"source_started",START:"start",TOKEN_REMOVED:"token_removed"});var g=Object.freeze({BROADCAST:"broadcast",GROUP_CREATION:"group_creation",OMNIPICKER:"omnipicker",SHARE:"share"}),h=Object.freeze({DIRECT_SEND:"direct_send",ADD:"add"}),i=Object.freeze({FINISHED:"finished",FAILED:"failed"}),j=Object.freeze({BROADCAST:9500,GROUP_CREATE:9501}),k=Object.freeze({QUERY:"query",NO_QUERY:"no_query"}),l=Object.freeze({BOOTSTRAP:"bootstrap",LOCAL:"local",LOCAL_AND_SERVER:"local_and_server",LOCAL_CONTACTS:"local_contacts",ORDERED_GCF_FRIENDLIST:"local_ordered_gcf_friendlist",QUERY_CACHE:"query_cache",SERVER:"server",SHORT_PROFILES:"local_short_profiles",SUGGESTED_RECIPIENTS:"local_suggested_recipients"});e.exports={FUNNEL_NAME:"MESSENGER_SECONDARY_SEARCH_FUNNEL",CLIENTS:a,END_ACTIONS:b,END_REASONS:c,ENTRY_SURFACES:d,EVENTS:f,SEARCH_SURFACES:g,SELECTION_TYPES:h,SOURCE_STATUSES:i,LOGGING_IDS:j,MICRO_SESSION_TYPES:k,SOURCES:l}}),null);
__d("FantaReducersPreLogging",["Bootloader","FantaMessageActions","FantaTabActions","FantaTabSheetActions","MessengerSecondarySearchFunnelConstants","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaTabSheetActions").Types,i=b("FantaMessageActions").Types;c=b("MessengerSecondarySearchFunnelConstants").END_ACTIONS;var j=c.ABANDON,k=c.SEND,l=b("MessengerSecondarySearchFunnelConstants").END_REASONS.ACTION;function a(a,c){__p&&__p();if(!b("gkx")("AT7OsZ9HtEyPgfhJFQHuE0P041fHeeN2NPSm1EqAg463b6aopCITyZWjbp4OgKkQKtYXSpA-M6CmnBX7-J8cZgbvURt5zoQ3MC2POa0dZoQCkA"))return a;switch(c.type){case g.CLOSE_TAB:case g.CLOSE_AND_TAB_NEXT:case h.CLOSE_ADD_FRIENDS_SHEET:case h.CLOSE_ADD_MORE_FRIENDS_SHEET:a=m(a,c.tabID,l,j);break;case g.CLOSE_ALL_TABS:a.mercury.tabContents.forEach(function(b){a=m(a,b.id,l,j)});break;case i.SEND_GROUP_MESSAGE:a=m(a,c.threadID,l,k,!0);break;case i.SEND_HOT_LIKE:case i.SEND_MESSAGE:case i.SEND_PHOTO:case i.SEND_STICKER:a=m(a,c.threadID,l,k);break}return a}function m(a,c,d,e,f){if(!b("gkx")("AT7OsZ9HtEyPgfhJFQHuE0P041fHeeN2NPSm1EqAg463b6aopCITyZWjbp4OgKkQKtYXSpA-M6CmnBX7-J8cZgbvURt5zoQ3MC2POa0dZoQCkA"))return a;var g=a.mercury.tabContents.get(c),h=g?g.loggingID:null,i=g?g.threadPreviewID:null;h&&b("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger"],function(b){a=a.setIn(["mercury","tabContents",c],g.merge({loggingID:null}));var j=void 0;e===k&&(f===null||f===undefined)?j=g&&g.messages.size===0:j=f;b.endFunnel(d,e,h,i?i.split(":")[1]:c,j)},"FantaReducersPreLogging");return a}e.exports={logSearchEvents:a}}),null);
__d("FantaTypeTab",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={focusCounter:0,id:"",isHovered:!1,isMinimized:!1,openCounter:0,entryPoint:"unknown"};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeTabGroup",["FantaConst","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c={allowedRaisedTabs:b("FantaConst").DEFAULT_ALLOWED_RAISED_TABS,focusedTabID:null,tabs:b("immutable").Map({}),updatedTime:0};var h=function(a){return a.openCounter*-1},i=function(a){return a.focusCounter*-1};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;a.prototype.getRaisedandUnraisedTabs=function(){var a=this.tabs.sortBy(i),b=a.slice(this.allowedRaisedTabs);a=a.take(this.allowedRaisedTabs).sortBy(h);return{raisedTabs:a,unraisedTabs:b}};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("isWebMessengerURI",[],(function(a,b,c,d,e,f){function a(a){return/^(\/messages)/.test(a.getPath())}e.exports=a}),null);
__d("FantaReducersTabs",["Bootloader","EventProfiler","FantaConst","FantaMessageActions","FantaTabActions","FantaTypeTab","FantaTypeTabGroup","LogHistory","MercuryThreads","MessengerDiscoveryEntryPoint","PinnedConversationNubsConfig","TimeSlice","URI","isWebMessengerURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreads").get(),h=b("FantaMessageActions").Types,i=b("FantaTabActions").Types,j="tab_",k=b("LogHistory").getInstance("fanta_tabs"),l=1,m=1,n=1;function a(a,c){switch(c.type){case i.OPEN_TAB:case i.OPEN_TAB_WITH_INTERSTITIAL_DATA:k.debug(c.type,JSON.stringify({id:c.tabID}));m===1&&b("EventProfiler").tagCurrentActiveInteractionsAs("FirstChatTabOpen");return r(a,c.tabID||j+n++,!0,c.entryPoint)}return a}function c(a,b){__p&&__p();switch(b.type){case i.REPLACE_TAB:var c=b.tabID,d=b.newTabID,e=a.tabGroup;e=e.tabs;e=e.get(c);k.debug(b.type,JSON.stringify({id:c,isExisting:!!e,newID:d}));if(e){b=e.id===a.tabGroup.focusedTabID;a=a.setIn(["tabGroup","tabs",d],e.merge({id:d})).deleteIn(["tabGroup","tabs",c]);return r(a,d,b,"replace_tab")}return r(a,d,!1,"replace_tab")}return a}function d(a,b){switch(b.type){case i.MINIMIZE_TAB:return s(a,b.tabID,!0)}return a}function f(a,b){switch(b.type){case i.UNMINIMIZE_TAB:return s(a,b.tabID,!1)}return a}function o(a,b){switch(b.type){case i.FOCUS_TAB:b=b.tabID;return z(a,b)}return a}function p(a,b){switch(b.type){case i.BLUR_TAB:return A(a,b.tabID)}return a}function q(a,c){__p&&__p();switch(c.type){case h.RECEIVED_NEW_MESSAGE:var d=c.tabID,e=a.tabGroup.tabs.get(d);k.debug(c.type,JSON.stringify({id:d,isOpen:!!e}));if(!e){c=function(){__p&&__p();var c=a.tabGroup.focusedTabID;a=r(a,d,!1,"message_received");var e=a.tabGroup.allowedRaisedTabs,f=a.tabGroup.getRaisedandUnraisedTabs(),g=f.raisedTabs;f=f.unraisedTabs;var h=g.count(),i=h+f.count();b("TimeSlice").guard(function(){b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(e).setOpenTabs(i).setVisibleTabs(h).log()},"FantaReducersTabs")},"name",{propagationType:b("TimeSlice").PropagationType.ORPHAN})();g=b("URI").getNextURI();if(b("isWebMessengerURI")(g))return{v:a=s(a,d,!0)};else if(c)return{v:z(a,c)}}();if(typeof c==="object")return c.v}}return a}function r(a,c,d){var e=arguments.length<=3||arguments[3]===undefined?"unknown":arguments[3],f=a.tabGroup,g=f.tabs,h=g.get(c);!h?(h=new(b("FantaTypeTab"))({id:c,focusCounter:l,openCounter:m++,entryPoint:e}),a=a.setIn(["tabGroup","tabs",c],h)):h.isMinimized&&d&&(a=s(a,c,!1));return d?z(a,c):a}function s(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isMinimized:c}));return a}function t(a,b){__p&&__p();switch(b.type){case i.MINIMIZE_ALL_TABS:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a=s(a,e,!0)}return a}return a}function u(a,b){switch(b.type){case i.CLOSE_TAB:case i.DELETE_TAB:var c=b.tabID;k.debug(b.type,JSON.stringify({id:c}));return w(a,c)}return a}function v(a,b){switch(b.type){case h.SEND_GROUP_MESSAGE:b=b.threadID;var c=g.isEmptyLocalThread(b);if(c)return w(a,b)}return a}function w(a,b){a=A(a,b);return a.deleteIn(["tabGroup","tabs",b])}function x(a,b){switch(b.type){case i.CLOSE_ALL_TABS:k.debug(b.type);a=A(a,a.tabGroup.focusedTabID);return a.setIn(["tabGroup","tabs"],a.tabGroup.tabs.clear())}return a}function y(a,b){switch(b.type){case i.CLOSE_AND_TAB_NEXT:k.debug(b.type,JSON.stringify({id:b.tabID}));a=w(a,b.tabID);return I(a)}return a}function z(a,b){var c=arguments.length<=2||arguments[2]===undefined?!1:arguments[2],d=a.tabGroup,e=d.tabs.get(b);e&&(a=a.mergeIn(["tabGroup","tabs",b],{focusCounter:l++}));var f=c?null:b;a=a.mergeIn(["tabGroup"],{focusedTabID:f});return a}function A(a,b){return a.tabGroup.focusedTabID===b?a.mergeIn(["tabGroup"],{focusedTabID:null}):a}function B(a,b){switch(b.type){case i.HOVERED_TAB:b=b.tabID;return D(a,b,!0)}return a}function C(a,b){switch(b.type){case i.UNHOVERED_TAB:b=b.tabID;return D(a,b,!1)}return a}function D(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isHovered:c}));return a}function E(a,c){__p&&__p();switch(c.type){case i.SET_ALLOWED_RAISED_TABS:var d=c.allowedRaisedTabs,e=a.tabGroup.allowedRaisedTabs;d!==e&&(function(){k.debug(c.type,JSON.stringify({count:d}));b("PinnedConversationNubsConfig").chatTabTypingPriority||(d=Math.max(1,d));var f=a.tabGroup.tabs.count(),g=f>d?d:f,h=d>e&&f>e,i=d<e&&f>d;(h||i)&&b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(d).setOpenTabs(f).setVisibleTabs(g).log()},"FantaReducersTabs")})();return F(a,d)}return a}function F(a){var c=arguments.length<=1||arguments[1]===undefined?b("FantaConst").DEFAULT_ALLOWED_RAISED_TABS:arguments[1];if(c===a.tabGroup.allowedRaisedTabs)return a;b("PinnedConversationNubsConfig").chatTabTypingPriority||(c=Math.max(1,c));return a.mergeIn(["tabGroup"],{allowedRaisedTabs:c})}function G(a,c){__p&&__p();switch(c.type){case i.LOAD_FROM_DATA:var d=a.tabGroup,e=c.tabData,f=d.updatedTime;if(f>=e.updatedTime||e.updatedTime===undefined)return a;a=F(a.set("tabGroup",new(b("FantaTypeTabGroup"))()),d.allowedRaisedTabs);var g=[];e.tabs.sort(function(a,b){return a.openCounter-b.openCounter}).forEach(function(c){g.push(c.id),a=r(a,c.id,!1,[b("MessengerDiscoveryEntryPoint").FB_HEADER_DOCK_LOADED_FROM_BROWSER_COOKIE]),c.isMinimized&&(a=s(a,c.id,c.isMinimized))});e.tabs.sort(function(a,b){return a.focusCounter-b.focusCounter}).forEach(function(b){a=z(a,b.id,!0)});k.debug(c.type,JSON.stringify({updatedTime:f,newerTime:e.updatedTime,opened:g}));a=e.focusedTabID?z(a,e.focusedTabID,!0):A(a)}return a}function H(a,b){switch(b.type){case i.FOCUS_NEXT_TAB:return I(a)}return a}function I(a){__p&&__p();var b=a.tabGroup.focusedTabID,c=a.tabGroup.getRaisedandUnraisedTabs();c=c.raisedTabs;var d=c.count();if(d===0)return a;else if(c.count()===1)return z(a,c.first().id);d=c.skipUntil(function(a){return a.id===b}).rest();if(d.count()===0)return z(a,c.first().id);else return z(a,d.first().id)}function J(a,b){__p&&__p();switch(b.type){case i.FOCUS_PREVIOUS_TAB:var c=a.tabGroup.focusedTabID;b=a.tabGroup.getRaisedandUnraisedTabs();b=b.raisedTabs;if(b.count()<2)return a;var d=b.reverse().skipUntil(function(a){return a.id===c}).rest();if(d.count()===0)return z(a,b.last().id);else return z(a,d.first().id)}return a}e.exports={addParticipantsToLocalGroup:v,blurTab:p,closeAllTabs:x,closeAndTabNext:y,closeTab:u,focusNextTab:H,focusPreviousTab:J,focusTab:o,hoveredTab:B,loadFromData:G,minimizAllTabs:t,minimizeTab:d,openTab:a,receivedNewMessage:q,replaceTab:c,setAllowedRaisedTabs:E,unhoveredTab:C,unminimizeTab:f}}),null);
__d("FantaTypeMercuryState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={tabContents:b("immutable").Map({})};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeAppState",["FantaTypeMercuryState","FantaTypeTabGroup","immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={tabGroup:new(b("FantaTypeTabGroup"))(),mercury:new(b("FantaTypeMercuryState"))()};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaAppStore",["FantaComposeViewReducers","FantaDispatcher","FantaReducersCookie","FantaReducersDockCalculator","FantaReducersLogging","FantaReducersMercury","FantaReducersMessages","FantaReducersPreLogging","FantaReducersTabs","FantaTypeAppState","FluxReduceStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[].concat(Object.values(b("FantaReducersPreLogging")),Object.values(b("FantaReducersTabs")),Object.values(b("FantaReducersMercury")),Object.values(b("FantaReducersMessages")),Object.values(b("FantaReducersDockCalculator")),Object.values(b("FantaReducersCookie")),Object.values(b("FantaComposeViewReducers")),Object.values(b("FantaReducersLogging")));g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("FantaTypeAppState"))()};a.prototype.ignoreReducer=function(a){var b=Object.values(a);h=h.filter(function(a){return!b.find(function(b){return b===a})})};a.prototype.addReducers=function(a){this.ignoreReducer(a),h=h.concat(Object.values(a))};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;c=new a(b("FantaDispatcher"));e.exports=c}),null);
__d("FantaCookieUtil",["CurrentUser","FantaConst","MercuryIDs","MercuryThreads","MessengerDiscoveryEntryPoint","MercuryMessages","WorkModeConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreads").get();a={convertCookieData:function(a,b,c){__p&&__p();var d={tabs:[],focusedTabID:null,updatedTime:0,interstitialData:c};c=[];var e=this._getCookieKeys();a=a||{};a[e.tabs]&&(c=a[e.tabs]);c.forEach(function(a){d.tabs.push({id:a.i,isMinimized:!a.r,openCounter:a.o,focusCounter:a.f})});if(b)for(var c=b.tabs.values(),b=Array.isArray(c),f=0,c=b?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(b){if(f>=c.length)break;h=c[f++]}else{f=c.next();if(f.done)break;h=f.value}h=h;g.isEmptyLocalThread(h.id)&&d.tabs.push({id:h.id,isMinimized:h.isMinimized,openCounter:h.openCounter,focusCounter:h.focusCounter})}d.focusedTabID=a[e.focusedTabID];d.updatedTime=a[e.updatedTime];return d},createCookieData:function(a,c){__p&&__p();var d=[],e=this._getCookieKeys();if(c[e.updatedTime]>a.updatedTime)return c;for(var f=a.tabs.values(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;!b("MercuryIDs").isLocalThread(i.id)&&!this._shouldDisableForCookie(i.id,i.entryPoint)&&d.push({i:i.id,r:i.isMinimized?undefined:1,o:i.openCounter,f:i.focusCounter})}c[e.tabs]=d;c[e.focusedTabID]=a.focusedTabID;c[e.updatedTime]=a.updatedTime;return c},_shouldDisableForCookie:function(a,c){if(!c.includes(b("MessengerDiscoveryEntryPoint").FB_PAGE_USER_MESSAGE_PROMPT))return!1;c=b("MercuryMessages").getForFBID(b("CurrentUser").getID());c=c.getThreadMessagesRangeNow(a,0,1)[0];return c===undefined},_getCookieKeys:function(){var a=b("WorkModeConfig").is_work_user;return{tabs:a?b("FantaConst").cookieIDs.WORK_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_COOKIE_ID,focusedTabID:a?b("FantaConst").cookieIDs.WORK_FOCUS_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_FOCUS_COOKIE_ID,updatedTime:a?b("FantaConst").cookieIDs.WORK_TIME_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_TIME_COOKIE_ID}}};e.exports=a}),null);
__d("FantaMercuryThreadEventsBootloaded",["Bootloader","MercuryThreadInformer","MercuryThreads","MercuryViewer","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadInformer").get(),h=b("MercuryThreads").get();a={onMessagesReceived:function(a){__p&&__p();g.subscribe("messages-received",function(c,d){__p&&__p();if(!b("WorkplaceChatHelper").suppressChatIfActiveOnDesktop()){c=function(c){__p&&__p();var e,f=d[c],g=function(d){var e=f[d];if(e.author!=b("MercuryViewer").getID()){if(!e.is_unread)return"continue";h.getThreadMeta(c,function(d){b("Bootloader").loadModules(["ChatTabPolicy"],function(b){b.messageIsAllowed(d,e,function(){a(c,e)})},"FantaMercuryThreadEventsBootloaded")})}};for(var i=0;i<f.length;i++){var e=g(i);if(e==="continue")continue}};for(var e in d)c(e)}})}};e.exports=a}),null);
__d("FantaTabMainPlaceholder.react",["cx","React","XUISpinner.react","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return b("React").createElement("div",{className:"_59v1"},b("React").createElement("div",{className:"_5qi9 _5qib"},b("React").createElement("div",{className:"_3_9e _s0f _50mz _50m_ fbNub _50-v opened _27_3"+(b("gkx")("AT7HdSIkhS9TSQx6PWXopj-NxmSus9nuXkEu6XM1WdZJElXpLdnQNN92q5iZdzYJyRUbbjoWOgsBC8RH9ivzcfSt")?" _69cg":"")},b("React").createElement("div",{className:"fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent"},b("React").createElement("div",{className:"fbNubFlyoutOuter"},b("React").createElement("div",{className:"fbNubFlyoutInner"},b("React").createElement("div",{className:"_5-kq"},b("React").createElement(b("XUISpinner.react"),null))))))))};e.exports=a}),null);
__d("FantaTabViewportManager",["Arbiter","DockTabsViewportCalculator","DockTabsViewportFantaTabUtils","FantaTabActions","immutable","ifRequired","isWebMessengerURI","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=b("DockTabsViewportCalculator").getInstance(a);if(!c)return;c.registerFantaTabCallbacks({fantaTabModelStateGetter:function(){var a=b("immutable").Map({});b("ifRequired")("FantaAppStore",function(b){a=b.getState().tabGroup.tabs});return a},onAvailableWidthChanged:function(a){b("setImmediate")(function(){b("FantaTabActions").setAllowedRaisedTabs(b("DockTabsViewportFantaTabUtils").getTabCountToFitWidth(a))})}});b("Arbiter").subscribe("FantaReducersDockCalculator/shouldRecalculate",function(){c.forceRecalculateChatTabs()});c.forceRecalculateFBDockWidth();b("Arbiter").subscribe("page_transition",function(a,c){b("isWebMessengerURI")(c.uri)&&b("setImmediate")(function(){return b("FantaTabActions").minimizeAllTabs()})})}e.exports={init:a}}),null);
__d("HotLikeSound",["MercurySoundsConfig","SoundPlayer","StickerConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("MercurySoundsConfig").hot_like_grow_mp3_url,b("MercurySoundsConfig").hot_like_grow_ogg_url],h=[b("MercurySoundsConfig").hot_like_pop_mp3_url,b("MercurySoundsConfig").hot_like_pop_ogg_url],i=[b("MercurySoundsConfig").hot_like_outgoing_small_mp3_url,b("MercurySoundsConfig").hot_like_outgoing_small_ogg_url],j=[b("MercurySoundsConfig").hot_like_outgoing_medium_mp3_url,b("MercurySoundsConfig").hot_like_outgoing_medium_ogg_url],k=[b("MercurySoundsConfig").hot_like_outgoing_large_mp3_url,b("MercurySoundsConfig").hot_like_outgoing_large_ogg_url],l=function(){return!1};a={setCheckSoundEnabledFunc:function(a){l=a},start:function(){this._play(g)},stop:function(){b("SoundPlayer").stop(g)},pop:function(){this.stop(),this._play(h)},snap:function(a){this.stop(),a===b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID&&this._play(i),a===b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID&&this._play(j),a===b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID&&this._play(k)},_play:function(a){l()&&b("SoundPlayer").play(a)}};e.exports=a}),null);
__d("MercuryDeliveryState",["MercuryConfig","MercuryIDs","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInformer","PresencePrivacy","UserActivity","debounceAcrossTransitions","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryConfig").delivery_timeout||12e4;a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};function a(a){this.$8=function(){if(this.$5.length===0&&Object.keys(this.$6).length===0)return;var a=this.$5.map(function(a){return a.message_id});a&&this.$2.sendDeliveryReceipts(a,this.$6);this.$6={};this.$5=[]}.bind(this),this.$1=a,this.$2=b("MercuryServerRequests").getForFBID(this.$1),this.$3=b("MercuryThreadInformer").getForFBID(this.$1),this.$4=b("MercuryThreadIDMap").getForFBID(this.$1),this.$5=[],this.$6={},this.$3.subscribe("messages-received",this.$7.bind(this)),b("UserActivity").subscribe(b("debounceAcrossTransitions")(this.$8,300,this))}a.prototype.$7=function(a,c){for(var d in c){a=c[d];a.forEach(function(a){this.$9(a)&&(this.$5.push(a),this.$4.getServerIDFromClientID(d,function(b){this.$6[b]||(this.$6[b]=[]),this.$6[b].push(a.message_id)}.bind(this)))}.bind(this))}(b("UserActivity").isActive(g)||b("gkx")("AT6QldQ637XMvCyugHEhjQqDDf2-wtP50HTiWZ1Ww9U3TKMTy-LCSwNJff4SK8McDFogXyIPPHKCxhkz9mFRLCX-m6fUBuF8qkM5EElKo4EzDw"))&&this.$8()};a.prototype.$9=function(a){var c=a.author?b("MercuryIDs").getUserIDFromParticipantID(a.author):null;if(c===this.$1)return!1;return!a.is_unread?!1:!0};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncEnvironment",["Arbiter","ChannelInitialData","CurrentUser","MercurySyncDeltaHandler"],(function(a,b,c,d,e,f){"use strict";function a(){if(!b("ChannelInitialData").channelConfig)return;b("MercurySyncDeltaHandler").get();b("Arbiter").inform("MercurySyncDeltaHandler/initSeqID",{fbid:b("CurrentUser").getAccountID(),seqID:b("ChannelInitialData").channelConfig.sequenceId})}e.exports={setUp:a}}),null);
__d("MercuryUnseenState",["MessageThreadReadStateEffect","MercuryFolders","KeyedCallbackManager","LogHistory","MercuryActionType","MercuryDispatcher","MercuryGlobalActionType","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInfo","MercuryThreadlistConstants","MessagingTag","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","createObjectFrom","isEmpty"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessageThreadReadStateEffect").MessageThreadReadStateEffectType,h=b("MercuryThreadlistConstants").MAX_UNSEEN_COUNT,i="unseen_thread_hash",j="unseen_thread_list",k=b("LogHistory").getInstance("mercury_unseen_state");a.getForFBID=function(a){return l.getForFBID(a)};a.get=function(){return l.get()};function a(a){this.$2=a,this.$7=b("MercuryServerRequests").getForFBID(this.$2),this.$8=b("MercuryThreadIDMap").getForFBID(this.$2),this.$10=b("MercuryThreads").getForFBID(this.$2),this.$9=b("MercuryThreadInformer").getForFBID(this.$2),this.$1=b("MercuryDispatcher").getForFBID(this.$2),this.$3=0,this.$4=0,this.$5=!1,this.$6=!1,this.$11=new(b("KeyedCallbackManager"))(),this.$1.subscribe("update-unseen",function(a,b){this.$12(b)}.bind(this)),this.$1.subscribe("update-thread-ids",function(a,b){this.$13(b)}.bind(this))}a.prototype.getUnseenCount=function(){if(this.exceedsMaxCount()){k.error("unguarded_unseen_count_fetch","{}");return 0}return this.$14()};a.prototype.exceedsMaxCount=function(){return this.$5||this.$14()>h};a.prototype.markAsSeen=function(){var a=this.$14();a===null?this.$6=!0:(a>0||this.$5)&&(this.$7.markSeen(),this.$15(this.$7.getLastActionTimestamp(),[]))};a.prototype.$16=function(a,b){var c;this.$17((c={},c[a]=0,c),b)};a.prototype.$18=function(a){this.$11.setResource(i,a),this.$11.setResource(j,Object.keys(a))};a.prototype.$19=function(a){a=this.$11.executeOrEnqueue(i,a);a=this.$11.getUnavailableResources(a);a.length&&this.$7.fetchUnseenThreadIDs()};a.prototype.$20=function(){return this.$11.getResource(i)};a.prototype.$14=function(){var a=this.$11.getResource(j);if(a)return a.length;else return this.$3};a.prototype.$12=function(a){__p&&__p();var c,d=this,e=this.$21(a);if(a.unseen_thread_fbids)a.unseen_thread_fbids.forEach(function(a){if(a.folder!=b("MessagingTag").INBOX)return;a=(a.thread_fbids||[]).concat(a.other_user_fbids||[]);a=this.$22(a);var c=e.seen_timestamp?e.seen_timestamp:this.$4;this.$15(c,a);e.unseen_count>h&&(this.$5=!0)}.bind(this));else if(e.seen_timestamp!==undefined)this.$4=e.seen_timestamp,e.unseen_count>h?(this.$5=!0,this.$18({})):(this.$3=e.unseen_count,this.$3===0&&this.$18({}));else{var c=function(){__p&&__p();var c;(a.global_actions||[]).forEach(function(a){a.action_type===b("MercuryGlobalActionType").MARK_ALL_SEEN&&this.$15(a.timestamp,[])}.bind(d));if(d.$5)return{v:void 0};var e=a.actions;if(!e||!e.length)return{v:void 0};var f={},h={},i=function(a){__p&&__p();var c=e[a];a=c.action_type;var i=c.other_user_fbid?c.other_user_fbid:c.thread_fbid,j=c.thread_id?c.thread_id:i;if(a===b("MercuryActionType").MARK_THREAD_SEEN){d.$16(j,c.persistent);return"continue"}if(!d.$23(c))return"continue";if(c.thread_read_state_effect&&c.thread_read_state_effect!==g.MARK_UNREAD)return"continue";if(a===b("MercuryActionType").USER_GENERATED_MESSAGE||a===b("MercuryActionType").LOG_MESSAGE){i=f[j]?c.timestamp>f[j]:!1;i=i||!f[j];c.is_unread&&i&&d.$10.getThreadMeta(j,function(a){!b("MercuryThreadInfo").isMuted(a)&&!(a&&a.last_read_timestamp>=c.timestamp)&&(f[j]=c.timestamp)})}else a===b("MercuryActionType").CHANGE_READ_STATUS&&c.mark_as_read&&(h[j]=c.timestamp)};for(var j=0;j<e.length;j++){var c=i(j);if(c==="continue")continue}d.$24(f);d.$17(h)}();if(typeof c==="object")return c.v}this.$6&&(this.$6=!1,this.markAsSeen())};a.prototype.$15=function(a,c){__p&&__p();var d=this.$20();if(d===undefined||a>this.$4||this.$5){this.$4=a;c=c||[];c.length<=h&&(this.$5=!1);d={};a=this.$20();for(var e in a)if(a[e]!==!0){var f=a[e];this.$25(f)&&(d[e]=f)}f=Object.assign(b("createObjectFrom")(c,!0),d);this.$18(f);this.$9.updatedUnseenState()}};a.prototype.$24=function(a){__p&&__p();if(this.$5)return;var b={},c=!1;for(var d in a){var e=a[d];this.$25(e)&&(b[d]=e,c=!0)}if(!c)return;this.$19(function(a){for(var c in b){var d=b[c];!a[c]&&this.$25(d)&&(a[c]=b[c])}this.$18(a);this.$9.updatedUnseenState()}.bind(this))};a.prototype.$17=function(a,c){b("isEmpty")(a)||this.$19(function(b){var d=!1;for(var e in a){var f=a[e],g=f>=b[e];b[e]&&(!f||g)&&(delete b[e],d=!0)}d&&(this.$18(b),this.$9.updatedUnseenState(),c&&this.$14()===0&&this.$7.markSeen())}.bind(this))};a.prototype.$25=function(a){return a>this.$4};a.prototype.$22=function(a){return a.map(this.$8.convertThreadIDIfAvailable,this.$8)};a.prototype.$13=function(a){var b=this.$20();if(!b)return;for(var c in a){var d=a[c];b[c]&&(b[d]=b[c],delete b[c])}this.$18(b)};a.prototype.$23=function(a){var c=a.thread_id?this.$10.getThreadMetaNow(a.thread_id):null;c=c?b("MercuryFolders").getFromMeta(c):a.folder;return c===b("MessagingTag").INBOX||c===undefined};a.prototype.$21=function(a){a=a.message_counts||[];for(var c=0;c<a.length;c++)if(a[c].folder===b("MessagingTag").INBOX)return a[c];return{}};var l=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("FantaTabsAppBase",["Bootloader","ChatAppActions","ChatAppStore","ChatPerfInstrumentation","CSS","JSLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.init=function(a,c,d){__p&&__p();if(this.isInitialized()){b("JSLogger").create("chat_app").error("repeated_init");return}this.$1=a;this.tabsElem=c;var e=b("ChatAppStore").addListener(function(){var a=b("ChatAppStore").getPreviousState(),c=b("ChatAppStore").getState();a.initialDisplayDone===!1&&c.initialDisplayDone===!0&&(b("ChatPerfInstrumentation").logDisplayDone(),e.remove())});b("ChatPerfInstrumentation").init();this.$2(d);this.initializeFantaData(d.interstitial_data);this.initializeFantaUI();this.$3();b("ChatAppActions").tti();b("ChatPerfInstrumentation").logTTI()};a.prototype.isInitialized=function(){return!!b("ChatAppStore").getState().isInitialized};a.prototype.isHidden=function(){var a=b("ChatAppStore").getState();return!!(!a.isInitialized||a.isHidden)};a.prototype.hide=function(){if(this.isHidden())return;b("CSS").hide(this.$1);b("ChatAppActions").hide()};a.prototype.unhide=function(){var a=b("ChatAppStore").getState();a.isInitialized?a.isHidden&&(b("CSS").show(this.$1),d(["Dock"],function(a){a.resizeAllFlyouts()}),b("ChatAppActions").unhide()):a.isLoaded||(d(["UIPagelet"],function(a){a.loadFromEndpoint("ChatTabsPagelet","ChatTabsPagelet"),a.loadFromEndpoint("BuddylistPagelet","BuddylistPagelet")}),b("ChatAppActions").load())};a.prototype.initializeFantaData=function(a){};a.prototype.initializeFantaUI=function(){};a.prototype.$2=function(a){d(["MercuryDeliveryState","MercuryParticipants","MercuryServerPayloadPreprocessor","MercuryThreads","MercuryUnreadState","MercuryUnseenState","MercurySyncEnvironment","P2PSendMoneyDialogStore"],function(c,d,e,f,g,h,i,j){c.get(),d,f.get(),h.get(),g.get(),i.setUp(),b("ChatPerfInstrumentation").logInitStores(),a.graphql_payload?b("Bootloader").loadModules(["ChatInitialDataTransformer.bs"],function(b){var c=a.graphql_payload;b=b.transform(c);b.message_blocked_ids=c.message_blocked_ids;b.message_ignored_ids=c.message_ignored_ids;b.payload_source=c.payload_source;e.get().handleUpdate(b)},"FantaTabsAppBase"):e.get().handleUpdate(a.initial_data)})};a.prototype.$3=function(){d(["HotLikeSound","ChatOptions"],function(a,c){a.setCheckSoundEnabledFunc(function(){return c.getSetting("sound")}),b("ChatPerfInstrumentation").logInitSound()})};function a(){}e.exports=a}),null);
__d("FantaTabsEagerBootloader",["Bootloader","emptyFunction","ifRequired"],(function(a,b,c,d,e,f){"use strict";var g=function(a){b("ifRequired")("FantaAppStore",function(b){return b.addReducers(a)}),g=b("emptyFunction")};a={bootload:function(){b("ifRequired")("FantaTabsSlimApp",function(a){a.silentPumpUp()}),b("Bootloader").loadModules(["FantaReducersGetMessages","FantaTabsReactApp","MessengerGraphQLThreadFetcher.bs"],function(a){g(a)},"FantaTabsEagerBootloader")}};e.exports=a}),null);
__d("FBRTCLocalMessageQueue",["CacheStorage","FBRTCConsoleLogger"],(function(a,b,c,d,e,f){__p&&__p();var g="localstorage",h="RTC_",i="offer",j="offer_msg",k="data_",l=30*1e3,m=15*1e3,n=500,o=new Map();function a(){"use strict";this.$1=b("FBRTCConsoleLogger").getInstance()}a.prototype.enqueueOffer=function(a,b){"use strict";a=this.$2(a,j);this.$3(a,i,b)};a.prototype.getOffer=function(a){"use strict";a=this.$2(a,j);return this.$4(a,i)};a.prototype.removeOffer=function(a){"use strict";a=this.$2(a,j);a.remove(i)};a.prototype.enqueueMessage=function(a,b,c,d){"use strict";b=k+c.toString();c=o.get(a)||new Map();c.set(b,d);o.set(a,c);this.$1.log("Queued "+b)};a.prototype.drainQueue=function(a,b){"use strict";__p&&__p();var c=o.get(a)||new Map(),d;void 0;void 0;for(var c=c,e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;var d=g[0];g=g[1];void d;b(g)}o.set(a,new Map())};a.prototype.enableDequeuing=function(a,b,c,d){"use strict";d===undefined&&(d=m),this.$5(a,b,c,d)};a.prototype.$5=function(a,b,c,d){"use strict";var e=this.$2(a,b),f=e.keys(),g=f.length;for(var h=0;h<g;h++){var i=this.$6(e,f[h]);i&&c&&c(i)}this.$1.log("Dequeued "+g+" ("+a+") with "+d+" left)");d>0&&(d-=n,setTimeout(function(){this.$5(a,b,c,d)}.bind(this),n))};a.prototype.$3=function(a,b,c){"use strict";c={__t:Date.now(),__d:c};a.set(b,c)};a.prototype.$4=function(a,b){"use strict";var c=a.get(b);if(c&&this.$7(c))return c.__d;else c&&a.remove(b);return null};a.prototype.$6=function(a,b){"use strict";var c=this.$4(a,b);if(c!==null){a.remove(b);return c}return null};a.prototype.$7=function(a){"use strict";return Date.now()-a.__t<l};a.prototype.$2=function(a,c){"use strict";return new(b("CacheStorage"))(g,""+h+a+"_"+c+"_")};e.exports=a}),null);
__d("FBRTCMessageListener",["invariant","Arbiter","BonfireFeatureGating","ChannelConstants","FBRTCCallControlActions","FBRTCConstants","FBRTCLocalMessageQueue","FBRTCSupport","RTCConfig","guid","mixInEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").ChildWindowMessageType,i=45*1e3,j=[],k=null,l=null,m=null,n=null,o=null,p=!1,q=null,r=null,s=void 0;a={init:function(a,c){__p&&__p();if(p)return;p=!0;b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offer"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offerack"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("rtc_multi_json"),function(a,b){this._onMultiwayMessage(b.obj)}.bind(this));b("BonfireFeatureGating").canReceiveBonfireRingInterop()&&b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("parties_notifications"),function(a,b){this._onBonfireMessage(b.obj)}.bind(this));this._localMessageQueue=new(b("FBRTCLocalMessageQueue"))();if(b("RTCConfig").PassMessagesBetweenWindowsGK){if(b("FBRTCSupport").isWebrtcSupported()&&window.addEventListener){var d=a?this._handleWindowMessageToChild.bind(this):this._handleWindowMessageToParent.bind(this);window.addEventListener("message",d,!1)}a&&this._connectToParentWindow(c)}},setParentWindowNonce:function(a){n=a},generateNewNonce:function(){o=b("guid")();return o},setMultiwayMessageHandler:function(a,b){q&&g(0),q=b?a.bind(b):a},_onMultiwayMessage:function(a){this.emit("multiwayMessageReceived",a),q&&q(a)},setBonfireMessageHandler:function(a,b){r&&g(0),r=b?a.bind(b):a},_onBonfireMessage:function(a){this.emit("bonfireMessageReceived",a),r&&r(a)},setMessageHandler:function(a,b){k&&g(0);k=b?a.bind(b):a;while(j.length)k(j.shift())},removeMessageHandler:function(){k=null},setParentWindowStartCallHandler:function(a){s=a;return function(){return s=null}},_onMessage:function(a){a.from&&(a.from=a.from.toString()),this.emit("messageReceived",a),k?k(a):j.push(a),this._passMessageToChildWindow(a)},_connectToParentWindow:function(a){if(window.opener&&window.opener.postMessage){a={type:h.CHILD_WINDOW_READY,nonce:n,childNonce:this.generateNewNonce(),peerID:a};window.opener.postMessage(a,window.location.origin)}},_verifyWindowMessage:function(event){return event.origin===window.location.origin&&event.data&&o&&event.data.nonce===o},_handleWindowMessageToParent:function(event){if(!this._verifyWindowMessage(event))return;event.data.type===h.CHILD_WINDOW_READY&&(this.setParentWindowNonce(event.data.childNonce),this._setChildWindow(event.source),this._replayQueuedMessagesToChild(event.data.peerID,l))},_handleWindowMessageToChild:function(event){if(!this._verifyWindowMessage(event))return;event.data.type===h.CHILD_WINDOW_MESSAGE&&this._onMessage(event.data.message);event.data.type===h.CHILD_WINDOW_START_CALL&&(s?s():b("FBRTCCallControlActions").parentWindowStartCall())},_replayQueuedMessagesToChild:function(a,b){this._localMessageQueue.drainQueue(a,function(a){a={type:h.CHILD_WINDOW_MESSAGE,nonce:n,message:a};b.postMessage(a,window.location.origin)})},_setChildWindow:function(a){l=a,clearTimeout(m),m=setTimeout(function(){l=null},i),this._startCallInChildWindow(),this.generateNewNonce()},_passMessageToChildWindow:function(a){if(l){a={type:h.CHILD_WINDOW_MESSAGE,nonce:n,message:a};l.postMessage(a,window.location.origin)}},_startCallInChildWindow:function(){if(l){var a={type:h.CHILD_WINDOW_START_CALL,nonce:n};l.postMessage(a,window.location.origin)}}};b("mixInEventEmitter")(a,{messageReceived:!0,multiwayMessageReceived:!0,bonfireMessageReceived:!0});e.exports=a}),null);
__d("FBRTCIceStatsParser",[],(function(a,b,c,d,e,f){__p&&__p();var g=null;h.getInstance=function(){"use strict";g||(g=new h());return g};function h(){"use strict"}h.prototype.extractIceInfo=function(a){"use strict";var b=[];a=a.split("\r\n");for(var c=0;c<a.length;c++){var d=a[c];this.$1(d)&&b.push({gen:this.$2(d),type:this.$3(d)})}return b};h.prototype.$1=function(a){"use strict";return a.indexOf("candidate:")>-1};h.prototype.$2=function(a){"use strict";var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b};h.prototype.$3=function(a){"use strict";a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"};e.exports=h}),null);
__d("FBRTCMediaMetricTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(){this.$1=[],this.$2={},this.$3={}}g.prototype.addJitterBufferDelay=function(a){this.$1.push(a)};g.prototype.setVideoMetric=function(a,c){!this.$3[a]?this.$3[a]={first:c,startedTime:b("performanceNow")(),current:c,updatedTime:b("performanceNow")()}:(this.$3[a].current=c,this.$3[a].updatedTime=b("performanceNow")())};g.prototype.getVideoMetric=function(a){return this.$3[a]};g.prototype.addMetricStat=function(a,b){!this.$2[a]?this.$2[a]={min:b,max:b,total:b,count:1,mean:b}:(this.$2[a].total+=b,this.$2[a].count+=1,this.$2[a].min=Math.min(this.$2[a].min,b),this.$2[a].max=Math.max(this.$2[a].max,b),this.$2[a].mean=this.$2[a].total/this.$2[a].count)};g.prototype.getMetricKeys=function(){return Object.keys(this.$2)};g.prototype.getMetricStats=function(a){return this.$2[a]};g.prototype.getJitterBufferStats=function(){__p&&__p();var a=this.$1.length;if(a===0)return{min:-1,max:-1,mean:-1,median:-1,total:-1,count:0};this.$1.sort(function(a,b){return a-b});var b=this.$1.reduce(function(a,b){return a+b});if(a%2===0){var c=Math.floor((a-1)/2),d=Math.ceil((a-1)/2);c=(this.$1[c]+this.$1[d])/2}else c=this.$1[(a-1)/2];return{max:this.$1[this.$1.length-1],min:this.$1[0],mean:b/this.$1.length,median:c,total:b,count:this.$1.length}};g.prototype.toJsonString=function(){return JSON.stringify({stats:this.$2,jitterBufferDelays:this.$1,videoMetric:this.$3})};g.fromJsonString=function(a){var b=new g(),c=void 0;try{c=JSON.parse(a)}catch(a){return b}c.stats&&(b.$2=c.stats);c.jitterBufferDelays&&(b.$1=c.jitterBufferDelays);c.videoMetric&&(b.$3=c.videoMetric);return b};e.exports=g}),null);
__d("FBRTCCallSummary",["FBRTCConstants","FBRTCIceStatsParser","FBRTCLogger","FBRTCMediaMetricTracker","FBRTCUtils","SiteData","UserAgentData","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g=5*60*1e3,h={CALL_STARTED:"started",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended",SENT_JOIN_REQUEST:"s_jreq",RECV_JOIN_RESPONSE:"r_jresp",PROC_JOIN_RESPONSE:"p_jresp",RECV_RING_REQUEST:"r_rreq",SENT_RING_RESPONSE:"s_rresp"},i={FELLBACK_TO_AUDIO:"f_a",MEDIA_REQUESTED:"m_r",MEDIA_SUCCEEDED:"m_s",POPUP_OPENED:"opened",PRESSED_ANSWER:"p_a",TESTER_RETRIES:"t_r"},j={ESCALATION_IS_AVAILABLE:"esc_available",USER_INITIATED_REQUEST:"out_started",RECEIVED_INCOMING_REQUEST:"inc_started",REJECTED_INVALID_P2P_STATE:"rej_invalid_state",CONNECTING_TO_MULTIWAY:"u_connecting_mw",CONNECTED_TO_MULTIWAY:"u_connected_mw",PEER_CONNECTING_TO_MULTIWAY:"p_connecting_mw",PEER_CONNECTED_TO_MULTIWAY:"p_connected_mw",READY_TO_ESCALATE:"ready_esc",PEER_FAILED_TO_CONNECT_TO_MULTIWAY:"p_fail_conn",MULTIWAY_CALL_ENDED:"mw_call_ended",TIMED_OUT:"timed_out",PEER_ABORTED:"p_aborted",INTERNAL_ERROR:"internal_err"},k={ESCALATION_INITIATION_BUTTON_CLICKED:"esc_init_button",ESCALATION_APPROVED_BUTTON_CLICKED:"esc_appr_button",ESCALATION_DECLINED_BUTTON_CLICKED:"esc_decl_button",USERMEDIA_REQUEST:"media_req",USERMEDIA_SUCCESS:"media_success",USERMEDIA_FAILURE:"media_fail",SENT_ESC_REQUEST:"s_esc_req",RECV_ESC_REQUEST:"r_esc_req",SENT_ESC_REQUEST_ACK:"s_esc_req_ack",RECV_ESC_REQUEST_ACK:"s_esc_req_ack",SENT_ESC_RESPONSE:"s_esc_rep",RECV_ESC_ACCEPT:"r_esc_accept",RECV_ESC_DECLINE:"r_esc_decl",RECV_ESC_TIMEOUT:"r_esc_timeout"};function l(a){"use strict";this.peerID=String(a.peerID),this.callID=String(a.callID),this.$1=a.isCaller,this.$2=b("FBRTCUtils").getLocalUploadLogLevel(),this.$13=new Date().valueOf(),this.$3=null,this.$4={},this.$6={},this.$7={},this.$12={},this.$34=null,this.$35=null,this.$36=null,this.$15=0,this.$16=0,this.$33=!1,this.$23={},this.$24={},this.$8={},this.$9={},this.$10={},this.$11={},this.$25=null,this.$18=b("performanceNow")(),this.$14=0,this.$5={},this.$17=this.$18,this.$19=0,this.$20={},this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_INFO,this.$38()),this.$39(),this.$22=b("FBRTCIceStatsParser").getInstance(),this.$37=new(b("FBRTCMediaMetricTracker"))(),this.$21=b("FBRTCLogger").getInstance()}l.prototype.toJsonString=function(){"use strict";this.$16=new Date().valueOf();return JSON.stringify({version:l.CURRENT_SUMMARY_VERSION,peerID:this.peerID,callID:this.callID,isCaller:this.$1,uploadLogLevel:this.$2,clientVersion:this.$25,callType:this.$29,conferenceName:this.$27,activeConn:this.$26,escP2PCallID:this.$28,serverInfoData:this.$30,localVideoDuration:this.$31,remoteVideoDuration:this.$32,startTime:this.$13,trigger:this.$3,signalingTime:this.$4,escStateTimes:this.$6,applicationEventTime:this.$7,videoEscTimes:this.$12,endCallReason:this.$34,endCallSubreason:this.$35,isRemoteEnded:this.$36,lastUpdatedTime:this.$15,lastSerializedTime:this.$16,unsetOnRetrieve:this.$33,openCount:this.$19,extraInfo:this.$20,pcStats:this.$23,captureStats:this.$24,gen0IceSentCount:this.$8,gen0IceReceivedCount:this.$9,iceSentCount:this.$10,iceReceivedCount:this.$11,mediaMetricStats:this.$37.toJsonString(),newSignalingTime:this.$5,accumulatedCallTime:this.$40()})};l.fromJsonString=function(a){"use strict";__p&&__p();var c=void 0;try{c=JSON.parse(a)}catch(a){return null}if(c.version!==l.CURRENT_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(c,"peerID")||!Object.prototype.hasOwnProperty.call(c,"callID")||!Object.prototype.hasOwnProperty.call(c,"isCaller")||!Object.prototype.hasOwnProperty.call(c,"startTime")||!Object.prototype.hasOwnProperty.call(c,"trigger")||!Object.prototype.hasOwnProperty.call(c,"signalingTime")||!Object.prototype.hasOwnProperty.call(c,"endCallReason")||!Object.prototype.hasOwnProperty.call(c,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(c,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(c,"lastSerializedTime"))return null;a=new l({peerID:c.peerID,callID:c.callID,isCaller:c.isCaller});a.$2=c.uploadLogLevel;a.$25=c.clientVersion;a.$13=c.startTime;a.$3=c.trigger;a.$4=c.signalingTime;a.$34=c.endCallReason;a.$35=c.endCallSubreason;a.$36=c.isRemoteEnded;a.$15=c.lastUpdatedTime;a.$16=c.lastSerializedTime;c.callType&&(a.$29=c.callType);c.conferenceName&&(a.$27=c.conferenceName);c.escP2PCallID&&(a.$28=c.escP2PCallID);c.activeConn&&(a.$26=c.activeConn);c.serverInfoData&&(a.$30=c.serverInfoData);c.localVideoDuration&&(a.$31=c.localVideoDuration);c.remoteVideoDuration&&(a.$32=c.remoteVideoDuration);c.unsetOnRetrieve&&(a.$33=c.unsetOnRetrieve);c.openCount&&(a.$19=c.openCount);c.extraInfo&&(a.$20=c.extraInfo);c.pcStats&&(a.$23=c.pcStats);c.captureStats&&(a.$24=c.captureStats);c.gen0IceSentCount&&(a.$8=c.gen0IceSentCount);c.gen0IceReceivedCount&&(a.$9=c.gen0IceReceivedCount);c.iceSentCount&&(a.$10=c.iceSentCount);c.iceReceivedCount&&(a.$11=c.iceReceivedCount);c.newSignalingTime&&(a.$5=c.newSignalingTime);c.accumulatedCallTime&&(a.$14=c.accumulatedCallTime);c.escStateTimes&&(a.$6=c.escStateTimes);c.applicationEventTime&&(a.$7=c.applicationEventTime);c.videoEscTimes&&(a.$12=c.videoEscTimes);c.mediaMetricStats&&(a.$37=b("FBRTCMediaMetricTracker").fromJsonString(c.mediaMetricStats));return a};l.restoreOrInitialize=function(a,c,d,e,f,g){"use strict";c=String(c);d=String(d);a=a.retrieveCallSummary(c,d);!a?(a=new l({peerID:c,callID:d,isCaller:e}),f?(a.onFullMessageReceived({msg:f}),a.onOfferAckSent(f)):a.onCallStarted(g||b("FBRTCLogger").Trigger.UNKNOWN),b("FBRTCLogger").getInstance().logError(c,d,"Missing call summary from storage")):a.$33&&(a.$34=null,a.$35=null,a.$36=null,delete a.$4[h.CALL_ENDED],delete a.$5[h.CALL_ENDED],a.$33=null);return a};l.logSavedSummaries=function(a){"use strict";__p&&__p();var c=a.getLoggableSummaries(),d=c.length;if(d<=0)return;var e=b("FBRTCLogger").getInstance(),f=[];for(var g=0;g<d;g++){var h=c[g];e.logEndCallSummary(h);f.push({peerID:h.peerID,callID:h.callID})}a.removeCallSummaries(f);e.logToConsole("Logged pending summaries: "+d)};l.prototype.save=function(a){"use strict";var c=b("performanceNow")(),d=c-this.$17;if(d>g){this.$21.logInfo(this.peerID,this.callID,"Summary too old: "+d);return}a.storeCallSummary(this.peerID,this.callID,this);this.$17=c};l.prototype.getLastUpdatedTime=function(){"use strict";return this.$15};l.prototype.setLastUpdatedTime=function(a){"use strict";this.$15=a};l.prototype.getExtraInfo=function(){"use strict";return this.$20};l.prototype.getCallTrigger=function(){"use strict";return this.$3};l.prototype.addExtraInfo=function(a,b){"use strict";this.$20[a]=b,this.$39()};l.prototype.isCaller=function(){"use strict";return this.$1};l.prototype.isNetworkReady=function(){"use strict";if(this.$4[h.NETWORK_READY])return!0;else return!1};l.prototype.isAnswerReceived=function(){"use strict";if(this.$4[h.RECV_ANSWER])return!0;else return!1};l.prototype.onCallStarted=function(a){"use strict";this.$3=a,this.$41(h.CALL_STARTED),this.$39()};l.prototype.onPopupOpened=function(){"use strict";this.$42(i.POPUP_OPENED),this.$19++,this.$39()};l.prototype.onPressedAnswer=function(){"use strict";this.$42(i.PRESSED_ANSWER),this.$39()};l.prototype.onMediaRequested=function(){"use strict";this.$42(i.MEDIA_REQUESTED),this.$39()};l.prototype.onMediaSucceeded=function(){"use strict";this.$42(i.MEDIA_SUCCEEDED),this.$39()};l.prototype.onFellbackToAudio=function(){"use strict";this.$42(i.FELLBACK_TO_AUDIO),this.$39()};l.prototype.setTesterRetries=function(a){"use strict";this.$7[i.TESTER_RETRIES]=a,this.$39()};l.prototype.setPcStats=function(a){"use strict";this.$23=a,this.$39()};l.prototype.setVideoCaptureStats=function(a,b){"use strict";this.$24={w:a,h:b},this.$39()};l.prototype.setUploadLogLevel=function(a){"use strict";this.$2=a,this.$39()};l.prototype.getCallType=function(){"use strict";return this.$29};l.prototype.setCallType=function(a){"use strict";this.$29=a,this.addExtraInfo("call_type",a),this.$39()};l.prototype.setVideoDurations=function(a,b){"use strict";this.$31=a,this.$32=b,this.$39()};l.prototype.setScreenDuration=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.SCREEN_DURATION,a)};l.prototype.setConferenceName=function(a){"use strict";this.$27=a,this.$39()};l.prototype.setServerInfoData=function(a){"use strict";this.$30=a,this.$39()};l.prototype.setActiveConnection=function(a){"use strict";this.$26=a,this.$39()};l.prototype.setEscalationP2PCallID=function(a){"use strict";this.$28=a,this.$39()};l.prototype.onOfferAckSent=function(a){"use strict";this.onMessageSent({type:b("FBRTCConstants").PayloadType.OFFER_ACK,flag:a.flag})};l.prototype.onMessageSent=function(a){"use strict";__p&&__p();var c=a.flag===1;switch(a.type){case b("FBRTCConstants").PayloadType.OFFER:this.$43(c,h.SENT_OFFER,h.SENT_RETRIED_OFFER);this.$44(a,this.$8,this.$10);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$43(c,h.SENT_ANSWER,h.SENT_RETRIED_ANSWER);this.$44(a,this.$8,this.$10);break;case b("FBRTCConstants").PayloadType.OK:this.$41(h.SENT_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$41(h.SENT_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$43(c,h.SENT_OFFER_ACK,h.SENT_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$43(c,h.SENT_ANSWER_ACK,h.SENT_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$44(a,this.$8,this.$10);break;case b("FBRTCConstants").PayloadType.ACK:a.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$45(k.SENT_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:a.ack_id?this.$45(k.SENT_ESC_RESPONSE):this.$45(k.SENT_ESC_REQUEST);break;default:}this.$39()};l.prototype.$44=function(a,b,c){"use strict";var d,e=null;a=this.$22.extractIceInfo(a.sdp);for(var f=0;f<a.length;f++)d=a[f].gen,e=a[f].type,d===0&&this.$46(b,e),this.$46(c,e)};l.prototype.$46=function(a,b){"use strict";!a[b]?a[b]=1:a[b]=a[b]+1};l.prototype.$47=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.PEER_IS_MOBILE,a.isFromMobile()?"1":"0")};l.prototype.onFullMessageReceived=function(a){"use strict";__p&&__p();var c=a.msg,d=c.flag===1;switch(c.type){case b("FBRTCConstants").PayloadType.OFFER:this.$47(a);this.$43(d,h.RECV_OFFER,h.RECV_RETRIED_OFFER);this.$44(c,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$47(a);this.$43(d,h.RECV_ANSWER,h.RECV_RETRIED_ANSWER);this.$44(c,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.OK:this.$41(h.RECV_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$41(h.RECV_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$43(d,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$43(d,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$44(c,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ACK:c.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$45(k.RECV_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:c.ack_id?c.videoon||c.reqVideoOn?this.$45(k.RECV_ESC_ACCEPT):this.$45(k.RECV_ESC_DECLINE):c.videoon||c.reqVideoOn?this.$45(k.RECV_ESC_REQUEST):this.$45(k.RECV_ESC_TIMEOUT);default:}this.$39()};l.prototype.onMsgAckReceived=function(a,b){"use strict";a=a.msg.flag===1;b?this.$43(a,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK):this.$43(a,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK)};l.prototype.onNetworkReady=function(){"use strict";this.$41(h.NETWORK_READY),this.$39()};l.prototype.onCallConnected=function(){"use strict";this.$41(h.CALL_CONNECTED),this.$39()};l.prototype.onCallEnded=function(a,b,c,d){"use strict";this.$33=c,this.$34=String(a),this.$35=d,this.$36=b,this.$41(h.CALL_ENDED),this.$39()};l.prototype.setOfferSentTime=function(){"use strict";this.$41(h.SENT_OFFER)};l.prototype.setOfferAckReceivedTime=function(){"use strict";this.$41(h.RECV_OFFER_ACK)};l.prototype.setAnswerSentTime=function(){"use strict";this.$41(h.SENT_ANSWER)};l.prototype.setAnswerReceivedTime=function(){"use strict";this.$41(h.RECV_ANSWER)};l.prototype.setJoinRequestSent=function(){"use strict";this.$41(h.SENT_JOIN_REQUEST),this.$39()};l.prototype.setJoinResponseReceived=function(){"use strict";this.$41(h.RECV_JOIN_RESPONSE),this.$39()};l.prototype.setJoinResponseProcessed=function(){"use strict";this.$41(h.PROC_JOIN_RESPONSE),this.$39()};l.prototype.setRingRequestReceived=function(){"use strict";this.$41(h.RECV_RING_REQUEST),this.$39()};l.prototype.setRingResponseSent=function(){"use strict";this.$41(h.SENT_RING_RESPONSE),this.$39()};l.prototype.setEscalationAvailable=function(){"use strict";this.$48(j.ESCALATION_IS_AVAILABLE)};l.prototype.setEscalationInitiated=function(){"use strict";this.$48(j.USER_INITIATED_REQUEST)};l.prototype.setReceivedEscalationRequest=function(){"use strict";this.$48(j.RECEIVED_INCOMING_REQUEST)};l.prototype.setInvalidP2PEscalationState=function(){"use strict";this.$48(j.REJECTED_INVALID_P2P_STATE)};l.prototype.setEscalationConnectingToMultiway=function(){"use strict";this.$48(j.CONNECTING_TO_MULTIWAY)};l.prototype.setEscalationConnectedToMultiway=function(){"use strict";this.$48(j.CONNECTED_TO_MULTIWAY)};l.prototype.setEscalationPeerConnectingToMultiway=function(){"use strict";this.$48(j.PEER_CONNECTING_TO_MULTIWAY)};l.prototype.setEscalationPeerConnectedToMultiway=function(){"use strict";this.$48(j.PEER_CONNECTED_TO_MULTIWAY)};l.prototype.setReadyToEscalate=function(){"use strict";this.$48(j.READY_TO_ESCALATE)};l.prototype.setEscalationPeerFailedToConnectToMultiway=function(){"use strict";this.$48(j.PEER_FAILED_TO_CONNECT_TO_MULTIWAY)};l.prototype.setEscalationTimedOut=function(){"use strict";this.$48(j.TIMED_OUT)};l.prototype.setVidEscalationInitClick=function(){"use strict";this.$45(k.ESCALATION_INITIATION_BUTTON_CLICKED)};l.prototype.setVidEscalationAcceptedClick=function(){"use strict";this.$45(k.ESCALATION_APPROVED_BUTTON_CLICKED)};l.prototype.setVidEscalationDeclinedClick=function(){"use strict";this.$45(k.ESCALATION_DECLINED_BUTTON_CLICKED)};l.prototype.setVidEscalationMediaRequested=function(){"use strict";this.$45(k.USERMEDIA_REQUEST)};l.prototype.setVidEscalationMediaSuccess=function(){"use strict";this.$45(k.USERMEDIA_SUCCESS)};l.prototype.setVidEscalationMediaFailed=function(){"use strict";this.$45(k.USERMEDIA_FAILURE)};l.prototype.toString=function(){"use strict";var a={};a.core_metrics=this.$49();a.time_series=null;return JSON.stringify(a)};l.prototype.$49=function(){"use strict";__p&&__p();var a={};a.ver=l.CURRENT_SUMMARY_VERSION;a.log_level=b("FBRTCConstants").uploadLogLevelString(this.$2);a.caller=this.$1;a.call_type=this.$29;a.active_conn=this.$26;a.app_event_times=this.$7;a.conf_name=this.$27;a.esc_p2p_call_id=this.$28;a.esc_state_times=this.$6;a.vid_esc_times=this.$12;a.serv_info=this.$30;a.conn=this.$50();a.peer_id=this.peerID;a.has_video=!0;a.open_count=this.$19;a.signaling=this.$51();a.sender=this.$52();a.receiver=this.$53();a.end=this.$54();a.video=this.$55();a.push_phase=b("SiteData").push_phase;a.client_version=this.$25;a.DebugAudioMetrics=this.$56();return a};l.prototype.$56=function(){"use strict";return{NetworkReceive:{jb_nm:this.$57()}}};l.prototype.$57=function(){"use strict";var a={},b=this.$37.getMetricKeys();b.forEach(function(b){var c=this.$37.getMetricStats(b);c&&(a[b]={m:c.min,M:c.max,avg:c.mean})}.bind(this));b=this.$37.getJitterBufferStats();a.neteq={maxWait:b.max,meanWait:b.mean||0,mediaWait:b.median||0,minWait:b.min};return a};l.prototype.$50=function(){"use strict";var a={dtls:1};this.$23.sender&&this.$23.sender.rtt&&(a.rtt=this.$23.sender.rtt);return a};l.prototype.$51=function(){"use strict";__p&&__p();var a={};this.$3&&(a.trigger=this.$3);a.start_time=this.$13;a.time_from_start=this.$4;a.new_time_from_start=this.$5;var b=this.$5[h.CALL_CONNECTED]||this.$5[h.NETWORK_READY],c=this.$5[h.CALL_ENDED];if(b){c||(this.$14>0?c=this.$14:c=this.$40());c=c-b;c>0&&(a.duration=c)}return a};l.prototype.$52=function(){"use strict";var a={};this.$8&&(a.ice_g0=this.$8);this.$10&&(a.ice=this.$10);this.$23.sender&&Object.assign(a,this.$23.sender);return a};l.prototype.$53=function(){"use strict";var a={};this.$9&&(a.ice_g0=this.$9);this.$11&&(a.ice=this.$11);return a};l.prototype.$54=function(){"use strict";var a={};this.$34!==null&&(a.end_call_reason_string=b("FBRTCConstants").callEndReasonString(this.$34),this.$35!==null&&(a.end_call_subreason_string=this.$35),a.remote_ended=this.$36);this.$23.end&&Object.assign(a,this.$23.end);return a};l.prototype.$55=function(){"use strict";var a={capture:{},eqp:this.$58()};this.$23.video&&this.$23.video.sender&&Object.assign(a,this.$23.video.sender);this.$24&&Object.assign(a.capture,this.$24);return{sender:a,receiver:this.$59(),ld:this.$31,rd:this.$32}};l.prototype.$58=function(){"use strict";var a=this.$37.getVideoMetric("outbound_qp"),b=this.$37.getVideoMetric("frames_encoded");return a&&b?a.current/b.current:null};l.prototype.$59=function(){"use strict";var a={},b=this.$37.getVideoMetric("bytes_received");b&&(a.dec_bytes=b.current-b.first,a.dec_time=b.updatedTime-b.startedTime);return a};l.prototype.$60=function(){"use strict";return new Date().valueOf()-this.$13};l.prototype.$40=function(){"use strict";var a=b("performanceNow")()-this.$18;return Math.floor(this.$14+a)};l.prototype.$41=function(a){"use strict";if(this.$4[a])return;this.$4[a]=this.$60();this.$5[a]=this.$40()};l.prototype.$48=function(a){"use strict";if(this.$6[a])return;this.$6[a]=this.$60()};l.prototype.$42=function(event){"use strict";if(this.$7[event])return;this.$7[event]=this.$60()};l.prototype.$45=function(event){"use strict";if(this.$12[event])return;this.$12[event]=this.$60()};l.prototype.$43=function(a,b,c){"use strict";a?this.$41(c):this.$41(b)};l.prototype.$39=function(){"use strict";this.$15=new Date().valueOf()};l.prototype.$38=function(){"use strict";return{device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth}};l.prototype.setClientVersion=function(a){"use strict";this.$25=a};l.prototype.getCallDuration=function(){"use strict";var a=this.$51();return a.duration?a.duration:0};l.prototype.getConnectedStartTime=function(){"use strict";return this.$4[h.CALL_CONNECTED]?this.$4[h.CALL_CONNECTED]+this.$13:0};l.prototype.getMediaMetricTracker=function(){"use strict";return this.$37};l.CURRENT_SUMMARY_VERSION=19;e.exports=l}),null);
__d("FBRTCCallSummaryStore",["CacheStorage","FBRTCCallSummary","FBRTCLogger","areEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="localstorage",h="RTC_CALL_SUMMARY_",i="summary",j=2e3,k=3,l=3*60*1e3,m=null;n.getInstance=function(){m||(m=new n());return m};function n(){this.$1=new(b("CacheStorage"))(g,h),this.$2=b("FBRTCLogger").getInstance()}n.prototype.storeCallSummary=function(a,b,c){__p&&__p();var d=this;this.$3(function(e){__p&&__p();e[a]||(e[a]={});var f=e[a][b];if(f){f=d.$4(f);if(f&&f.getLastUpdatedTime()>c.getLastUpdatedTime()){d.$2.logToConsole("Outdated summaries");return null}}e[a][b]=d.$5(c);return e},d.$2.logError.bind(d.$2,a,b))};n.prototype.retrieveCallSummary=function(a,b){var c=this.$6(),d=null;c[a]&&(d=c[a][b]);if(d)return this.$4(d);else return null};n.prototype.removeCallSummary=function(a,b){this.removeCallSummaries([{peerID:a,callID:b}])};n.prototype.removeCallSummaries=function(a){this.$3(function(b){var c=a.length;for(var d=0;d<c;d++){var e=a[d].peerID,f=a[d].callID;b[e]&&b[e][f]&&(delete b[e][f],this.$7(b[e])&&delete b[e])}return b}.bind(this),this.$2.logError.bind(this.$2,null,null))};n.prototype.getLoggableSummaries=function(){var a=this.$6(),b=[];for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))for(var d in a[c])if(Object.prototype.hasOwnProperty.call(a[c],d)){var e=this.$4(a[c][d],l);e&&b.push(e)}return b};n.prototype.$7=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0};n.prototype.$5=function(a){a={__t:Date.now(),__d:a.toJsonString()};return a};n.prototype.$4=function(a,c){return a&&(!c||Date.now()-a.__t>=c)?b("FBRTCCallSummary").fromJsonString(a.__d):null};n.prototype.$6=function(){var a=this.$1.get(i)||{};return a};n.prototype.$3=function(a,c){__p&&__p();var d=this,e=arguments.length<=2||arguments[2]===undefined?k:arguments[2],f=arguments[3];(e===undefined||e===null)&&(e=k);var g=this.$6(),h=this.$6(),l=a(g);if(l===null)return;var m=this.$6();b("areEqual")(h,m)?(this.$1.set(i,l),this.$2.logToConsole("Updated summaries")):e>0?(c("Retry lock"),f?function(){var b=d;setTimeout(function(){b.$3(a,c,e-1,!0)},j)}():this.$3(a,c,e-1,!0)):c("Failed to lock")};e.exports=n}),null);
__d("FBRTCCallSummaryUploader",["Banzai","FBRTCCallSummary","FBRTCCallSummaryStore"],(function(a,b,c,d,e,f){a={init:function(){var a=b("FBRTCCallSummaryStore").getInstance();b("Banzai").subscribe(b("Banzai").SEND,function(){b("FBRTCCallSummary").logSavedSummaries(a)})}};e.exports=a}),null);
__d("MessengerRTCMessageHandler",["Bootloader","FBRTCCallSummaryUploader","FBRTCExperiment","FBRTCMessageListener","FBRTCSupport","URI","isFacebookURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h=null,i=null;function j(){b("isFacebookURI")(new(b("URI"))(window.top.location.href))&&b("FBRTCExperiment").getIncomingCallExperiments().logExposure()}a={init:function(){b("FBRTCSupport").isReceiveWebrtcSupported()&&(b("FBRTCCallSummaryUploader").init(),b("FBRTCMessageListener").init(!1),b("FBRTCMessageListener").once("messageReceived",function(a){k()}),b("FBRTCMessageListener").once("multiwayMessageReceived",function(a){l(a)}),b("FBRTCMessageListener").once("bonfireMessageReceived",function(a){m(a)}))}};function k(){g||(j(),b("Bootloader").loadModules(["FBRTCIncomingCallController","MessengerRTCIncomingDialogController","MessengerRTCMissedCallDialogController","FBRTCUnsupportedBrowserMessage"],function(a,c,d,e){g=new a(c,e,d),b("FBRTCMessageListener").setMessageHandler(g.onMessageReceived,g)},"MessengerRTCMessageHandler"))}function l(a){h||(j(),b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","MessengerRTCGroupCallIncomingDialogController"],function(c,d){h=new c(d,!1),b("FBRTCMessageListener").setMultiwayMessageHandler(h.onMessageReceived,h),h.onMessageReceived(a)},"MessengerRTCMessageHandler"))}function m(a){i||(j(),b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","MessengerRTCGroupCallIncomingDialogController"],function(c,d){i=new c(d),b("FBRTCMessageListener").setBonfireMessageHandler(i.onBonfireMessageReceived,i),i.onBonfireMessageReceived(a)},"MessengerRTCMessageHandler"))}e.exports=a}),null);
__d("FBRTCMessageHandler",["Bootloader","FBRTCExperiment","FBRTCMessageListener","FBRTCSupport","MessengerRTCMessageHandler"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=!1,i=null,j=null;a={init:function(){if(b("FBRTCExperiment").getIncomingCallExperiments().getBool("use_messenger_on_fb",!1)){b("MessengerRTCMessageHandler").init();return}!h&&b("FBRTCSupport").isReceiveWebrtcSupported()&&(h=!0,b("FBRTCMessageListener").init(!1),b("FBRTCMessageListener").once("messageReceived",function(a){k()}),b("FBRTCMessageListener").once("multiwayMessageReceived",function(a){l(a)}),b("FBRTCMessageListener").once("bonfireMessageReceived",function(a){m(a)}))}};function k(){g||b("Bootloader").loadModules(["FBRTCIncomingCallController","FBRTCIncomingCallDialog","FBRTCMissedVideoCallHandler","FBRTCUnsupportedBrowserMessage"],function(a,c,d,e){b("FBRTCExperiment").getIncomingCallExperiments().logExposure(),g=new a(c,e,new d()),b("FBRTCMessageListener").setMessageHandler(g.onMessageReceived,g)},"FBRTCMessageHandler")}function l(a){i||b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","FBRTCGroupCallIncomingDialog"],function(c,d){b("FBRTCExperiment").getIncomingCallExperiments().logExposure(),i=new c(d,!0),b("FBRTCMessageListener").setMultiwayMessageHandler(i.onMessageReceived,i),i.onMessageReceived(a)},"FBRTCMessageHandler")}function m(a){j||b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","FBRTCGroupCallIncomingDialog"],function(c,d){b("FBRTCExperiment").getIncomingCallExperiments().logExposure(),j=new c(d),b("FBRTCMessageListener").setBonfireMessageHandler(j.onBonfireMessageReceived,j),j.onBonfireMessageReceived(a)},"FBRTCMessageHandler")}e.exports=a}),null);
__d("FantaTabsSlimApp",["BootloadOnRender.react","ChatPerfInstrumentation","FantaTabMainPlaceholder.react","FantaTabsAppBase","JSResource","LazyComponent.react","React","ReactDOM","emptyFunction","ifRequired","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=void 0;c=babelHelpers.inherits(a,b("FantaTabsAppBase"));g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$FantaTabsSlimApp1=!1,this.$FantaTabsSlimApp3=function(a,c){this.$FantaTabsSlimApp1?b("ifRequired")("FantaMessageActions",function(d){b("setImmediate")(function(){d.receivedNewMessage(a,c)})}):this.$FantaTabsSlimApp2(function(){b("ifRequired")("FantaMessageActions",function(d){b("setImmediate")(function(){d.receivedNewMessage(a,c)})})})}.bind(this),c}a.prototype.getPumpedUp=function(a){this.$FantaTabsSlimApp1?a():this.$FantaTabsSlimApp2(a)};a.prototype.silentPumpUp=function(){this.$FantaTabsSlimApp1||this.$FantaTabsSlimApp2(b("emptyFunction"),!0)};a.prototype.getViewComponent=function(a){a=a?b("React").createElement("div",null):b("React").createElement(b("FantaTabMainPlaceholder.react"),null);return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{loadDataOnMount:!1}),loader:b("JSResource")("FantaMercuryTabsWithMain.react").__setRef("FantaTabsSlimApp"),placeholder:a})};a.prototype.initializeFantaData=function(a){__p&&__p();d(["FantaCookieUtil","MercuryThreadInformer","PresenceState"],function(c,d,e){__p&&__p();e.registerStateLoader(function(d){var e=this;this.$FantaTabsSlimApp1?b("ifRequired")("FantaTabActions",function(e){b("ifRequired")("FantaAppStore",function(b){e.loadFromData(c.convertCookieData(d,b.getState().tabGroup,a))})}):(function(){var f=c.convertCookieData(d,null,a);f&&f.tabs.length>0&&e.$FantaTabsSlimApp2(function(){b("ifRequired")("FantaTabActions",function(a){a.loadFromData(f)})})})()}.bind(this)),e.doSync(),d.get().subscribe("threads-updated",function(a,c){b("ifRequired")("FantaGetMessageActions",function(a){Object.keys(c).forEach(function(c){b("setImmediate")(function(){a.refreshThread(c)})})})}),b("ChatPerfInstrumentation").logInitData()}.bind(this))};a.prototype.$FantaTabsSlimApp2=function(a,c){__p&&__p();b("ifRequired")("FantaAppStore",function(b){a()},function(){d(["FantaAppStore","FantaCookieUtil","FantaMessageActions","FantaTabActions","FantaTabViewportManager","PresenceState"],function(d,e,f,g,i,j){j.registerStateStorer(function(a){var b=d.getState().tabGroup;if(!h||h&&!h.equals(b)){h=b;return e.createCookieData(b,a)}else return a}),b("ReactDOM").render(this.getViewComponent(c),this.tabsElem),i.init(this.tabsElem),this.$FantaTabsSlimApp1=!0,a()}.bind(this))}.bind(this))};a.prototype.initializeFantaUI=function(){d(["FantaMercuryThreadEventsBootloaded","FantaMessageActions","FantaTabActions","FantaTabViewportManager","FBRTCMessageHandler","MercuryBrowserAlerts"],function(a,c,d,e,f,g){f.init(),g.init(),a.onMessagesReceived(this.$FantaTabsSlimApp3),b("ChatPerfInstrumentation").logInitUI(),b("ChatPerfInstrumentation").logDisplayDone()}.bind(this))};e.exports=new a()}),null);
__d("MNCommerceDialogStateStore",["FluxStore","MessengerDispatcher","MNCommerceActionTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("MessengerDispatcher")),this.$MNCommerceDialogStateStore1=null,this.$MNCommerceDialogStateStore2=null}a.prototype.__onDispatch=function(a){__p&&__p();var c=a.type;switch(c){case b("MNCommerceActionTypes").DIALOG.SHOW:this.$MNCommerceDialogStateStore1=a.dialogContainer;this.$MNCommerceDialogStateStore2=a.state;this.__emitChange();break;case b("MNCommerceActionTypes").DIALOG.HIDE:this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null;this.__emitChange();break}};a.prototype.getDialogContainer=function(){return this.$MNCommerceDialogStateStore1};a.prototype.getState=function(){return this.$MNCommerceDialogStateStore2};a.__moduleID=e.id;e.exports=new a()}),null);
__d("MNCommerceDialogContainerMount",["MNCommerceDialogContainer.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={mount:function(a){b("ReactDOM").render(b("React").createElement(b("MNCommerceDialogContainer.react"),null),a)}};e.exports=a}),null);
__d("NotificationJewelReminderLoader",["promiseDone"],(function(a,b,c,d,e,f){e.exports={init:function(a,c){b("promiseDone")(a.load(),function(a){a.init(c)})}}}),null);
__d("P2PDialogContainerMount",["P2PDialogContainer.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={mount:function(a){b("ReactDOM").render(b("React").createElement(b("P2PDialogContainer.react"),null),a)}};e.exports=a}),null);
__d("PagesPlatformDialogContainerMount",["PagesPlatformDialogContainer.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={mount:function(a){b("ReactDOM").render(b("React").createElement(b("PagesPlatformDialogContainer.react"),null),a)}};e.exports=a}),null);
__d("LiveMessageReceiver",["Arbiter","ChannelConstants","emptyFunction","shield"],(function(a,b,c,d,e,f){__p&&__p();function g(a){this.eventName=a,this.subs=null,this.handler=b("emptyFunction"),this.shutdownHandler=null,this.registered=!1,this.appId=1}Object.assign(g,{getAppMessageType:function(a,b){return"live_message/"+a+":"+b},route:function(a){var c=function(c){var d=g.getAppMessageType(a.app_id,a.event_name);b("Arbiter").inform(d,c,b("Arbiter").BEHAVIOR_PERSISTENT)};c(a.response)}});Object.assign(g.prototype,{setAppId:function(a){this.appId=a;return this},setHandler:function(a){this.handler=a;this._dirty();return this},setRestartHandler:b("emptyFunction"),setShutdownHandler:function(a){this.shutdownHandler=b("shield")(a);this._dirty();return this},_dirty:function(){this.registered&&(this.unregister(),this.register())},register:function(){var a=function(a,b){return this.handler(b)}.bind(this),c=g.getAppMessageType(this.appId,this.eventName);this.subs={};this.subs.main=b("Arbiter").subscribe(c,a);this.shutdownHandler&&(this.subs.shut=b("Arbiter").subscribe(b("ChannelConstants").ON_SHUTDOWN,this.shutdownHandler));this.registered=!0;return this},unregister:function(){if(!this.subs)return this;for(var a in this.subs)this.subs[a]&&this.subs[a].unsubscribe();this.subs=null;this.registered=!1;return this}});e.exports=g}),null);
__d("initLiveMessageReceiver",["Arbiter","ChannelConstants","LiveMessageReceiver"],(function(a,b,c,d,e,f){b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("app_msg"),function(a,c){b("LiveMessageReceiver").route(c.obj)})}),null);
__d("Carousel",["cx","Animation","CSS","Ease","Locale","Slideshow","Style","shield"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("Locale").isRTL()?"right":"left",j=b("Ease").sineInOut;c=babelHelpers.inherits(a,b("Slideshow"));h=c&&c.prototype;function a(a,b){"use strict";h.constructor.call(this,a,b),this.subscribe("items_updated",this._updateItemState.bind(this)),this._width=this._config.width}a.prototype._updateItemState=function(a,c){"use strict";this._setContainerPos(a),b("Style").set(this._container,"width",this._items.length*this._config.width+this._config.widthunit)};a.prototype._updateArrowState=function(a){"use strict";if(!this._config.arrows)return;var c=this._config.wrap,d=this._items.length;d=Math.floor(d/this._config.photosperframe);b("CSS").conditionClass(this._arrowNext,"_2xo",d===1||!c&&a===d-1);b("CSS").conditionClass(this._arrowPrev,"_2xo",d===1||!c&&a===0)};a.prototype._animate=function(a){var c=arguments.length<=1||arguments[1]===undefined?null:arguments[1],d=arguments[2],e=a===-1?this._items.length-1:a,f=0,g;f=this._calcOffset(a,this._config.width,this._config.peek,this._config.item_margin);this._animating=!0;this.inform("page_start",e);var h=new(b("Animation"))(this._container).setUnit(this._config.widthunit).to(i,f).duration(this._config.animationDuration).ease(j).ondone(d);c!==null&&(g=this._calcOffset(c,this._config.width,this._config.peek,this._config.item_margin),h.from(i,g));h.go()};a.prototype._calcOffset=function(a,b,c,d){"use strict";if(this._config.peek_with_offset){var e=-a*(b-c*2);a>0&&(e=e+c-a*(d/2));a===this._items.length-1&&(e+=c);return e}else return-a*b};a.prototype._setContainerPos=function(a){"use strict";b("Style").set(this._container,i,-a*this._config.width+this._config.widthunit)};a.prototype._animateTo=function(a){__p&&__p();var c=arguments.length<=1||arguments[1]===undefined?null:arguments[1];if(this._animating)return;var d=this._items.length;if(0<=a&&a<d||!this._config.wrap){var e=(a+d)%d;this._updateArrowState(e);return this._animate(e,c,b("shield")(this._setCurrent,this,e))}var f=a%d,g=f?d-1:0,h=this._items[d-1];b("Style").set(h,"position","absolute");b("Style").set(h,i,-this._config.width+this._config.widthunit);g===0&&this._setContainerPos(-1);this._animate(f,c,function(){b("Style").set(h,"position","static"),b("Style").set(h,i,"auto"),this._setContainerPos(g),this._setCurrent(g)}.bind(this))};e.exports=a}),null);